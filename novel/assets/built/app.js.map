{"version":3,"file":"app.js","sources":["../../node_modules/ev-emitter/ev-emitter.js","../../node_modules/imagesloaded/imagesloaded.js","../../node_modules/photoswipe/dist/photoswipe.js","../../node_modules/photoswipe/dist/photoswipe-ui-default.js","../js/lightbox.js","../js/app.js","../../node_modules/reframe.js/dist/reframe.es.js","../js/dropdown.js","../js/pagination.js"],"sourcesContent":["/**\n * EvEmitter v2.1.1\n * Lil' event emitter\n * MIT License\n */\n\n( function( global, factory ) {\n  // universal module definition\n  if ( typeof module == 'object' && module.exports ) {\n    // CommonJS - Browserify, Webpack\n    module.exports = factory();\n  } else {\n    // Browser globals\n    global.EvEmitter = factory();\n  }\n\n}( typeof window != 'undefined' ? window : this, function() {\n\nfunction EvEmitter() {}\n\nlet proto = EvEmitter.prototype;\n\nproto.on = function( eventName, listener ) {\n  if ( !eventName || !listener ) return this;\n\n  // set events hash\n  let events = this._events = this._events || {};\n  // set listeners array\n  let listeners = events[ eventName ] = events[ eventName ] || [];\n  // only add once\n  if ( !listeners.includes( listener ) ) {\n    listeners.push( listener );\n  }\n\n  return this;\n};\n\nproto.once = function( eventName, listener ) {\n  if ( !eventName || !listener ) return this;\n\n  // add event\n  this.on( eventName, listener );\n  // set once flag\n  // set onceEvents hash\n  let onceEvents = this._onceEvents = this._onceEvents || {};\n  // set onceListeners object\n  let onceListeners = onceEvents[ eventName ] = onceEvents[ eventName ] || {};\n  // set flag\n  onceListeners[ listener ] = true;\n\n  return this;\n};\n\nproto.off = function( eventName, listener ) {\n  let listeners = this._events && this._events[ eventName ];\n  if ( !listeners || !listeners.length ) return this;\n\n  let index = listeners.indexOf( listener );\n  if ( index != -1 ) {\n    listeners.splice( index, 1 );\n  }\n\n  return this;\n};\n\nproto.emitEvent = function( eventName, args ) {\n  let listeners = this._events && this._events[ eventName ];\n  if ( !listeners || !listeners.length ) return this;\n\n  // copy over to avoid interference if .off() in listener\n  listeners = listeners.slice( 0 );\n  args = args || [];\n  // once stuff\n  let onceListeners = this._onceEvents && this._onceEvents[ eventName ];\n\n  for ( let listener of listeners ) {\n    let isOnce = onceListeners && onceListeners[ listener ];\n    if ( isOnce ) {\n      // remove listener\n      // remove before trigger to prevent recursion\n      this.off( eventName, listener );\n      // unset once flag\n      delete onceListeners[ listener ];\n    }\n    // trigger listener\n    listener.apply( this, args );\n  }\n\n  return this;\n};\n\nproto.allOff = function() {\n  delete this._events;\n  delete this._onceEvents;\n  return this;\n};\n\nreturn EvEmitter;\n\n} ) );\n","/*!\n * imagesLoaded v5.0.0\n * JavaScript is all like \"You images are done yet or what?\"\n * MIT License\n */\n\n( function( window, factory ) {\n  // universal module definition\n  if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory( window, require('ev-emitter') );\n  } else {\n    // browser global\n    window.imagesLoaded = factory( window, window.EvEmitter );\n  }\n\n} )( typeof window !== 'undefined' ? window : this,\n    function factory( window, EvEmitter ) {\n\nlet $ = window.jQuery;\nlet console = window.console;\n\n// -------------------------- helpers -------------------------- //\n\n// turn element or nodeList into an array\nfunction makeArray( obj ) {\n  // use object if already an array\n  if ( Array.isArray( obj ) ) return obj;\n\n  let isArrayLike = typeof obj == 'object' && typeof obj.length == 'number';\n  // convert nodeList to array\n  if ( isArrayLike ) return [ ...obj ];\n\n  // array of single index\n  return [ obj ];\n}\n\n// -------------------------- imagesLoaded -------------------------- //\n\n/**\n * @param {[Array, Element, NodeList, String]} elem\n * @param {[Object, Function]} options - if function, use as callback\n * @param {Function} onAlways - callback function\n * @returns {ImagesLoaded}\n */\nfunction ImagesLoaded( elem, options, onAlways ) {\n  // coerce ImagesLoaded() without new, to be new ImagesLoaded()\n  if ( !( this instanceof ImagesLoaded ) ) {\n    return new ImagesLoaded( elem, options, onAlways );\n  }\n  // use elem as selector string\n  let queryElem = elem;\n  if ( typeof elem == 'string' ) {\n    queryElem = document.querySelectorAll( elem );\n  }\n  // bail if bad element\n  if ( !queryElem ) {\n    console.error(`Bad element for imagesLoaded ${queryElem || elem}`);\n    return;\n  }\n\n  this.elements = makeArray( queryElem );\n  this.options = {};\n  // shift arguments if no options set\n  if ( typeof options == 'function' ) {\n    onAlways = options;\n  } else {\n    Object.assign( this.options, options );\n  }\n\n  if ( onAlways ) this.on( 'always', onAlways );\n\n  this.getImages();\n  // add jQuery Deferred object\n  if ( $ ) this.jqDeferred = new $.Deferred();\n\n  // HACK check async to allow time to bind listeners\n  setTimeout( this.check.bind( this ) );\n}\n\nImagesLoaded.prototype = Object.create( EvEmitter.prototype );\n\nImagesLoaded.prototype.getImages = function() {\n  this.images = [];\n\n  // filter & find items if we have an item selector\n  this.elements.forEach( this.addElementImages, this );\n};\n\nconst elementNodeTypes = [ 1, 9, 11 ];\n\n/**\n * @param {Node} elem\n */\nImagesLoaded.prototype.addElementImages = function( elem ) {\n  // filter siblings\n  if ( elem.nodeName === 'IMG' ) {\n    this.addImage( elem );\n  }\n  // get background image on element\n  if ( this.options.background === true ) {\n    this.addElementBackgroundImages( elem );\n  }\n\n  // find children\n  // no non-element nodes, #143\n  let { nodeType } = elem;\n  if ( !nodeType || !elementNodeTypes.includes( nodeType ) ) return;\n\n  let childImgs = elem.querySelectorAll('img');\n  // concat childElems to filterFound array\n  for ( let img of childImgs ) {\n    this.addImage( img );\n  }\n\n  // get child background images\n  if ( typeof this.options.background == 'string' ) {\n    let children = elem.querySelectorAll( this.options.background );\n    for ( let child of children ) {\n      this.addElementBackgroundImages( child );\n    }\n  }\n};\n\nconst reURL = /url\\((['\"])?(.*?)\\1\\)/gi;\n\nImagesLoaded.prototype.addElementBackgroundImages = function( elem ) {\n  let style = getComputedStyle( elem );\n  // Firefox returns null if in a hidden iframe https://bugzil.la/548397\n  if ( !style ) return;\n\n  // get url inside url(\"...\")\n  let matches = reURL.exec( style.backgroundImage );\n  while ( matches !== null ) {\n    let url = matches && matches[2];\n    if ( url ) {\n      this.addBackground( url, elem );\n    }\n    matches = reURL.exec( style.backgroundImage );\n  }\n};\n\n/**\n * @param {Image} img\n */\nImagesLoaded.prototype.addImage = function( img ) {\n  let loadingImage = new LoadingImage( img );\n  this.images.push( loadingImage );\n};\n\nImagesLoaded.prototype.addBackground = function( url, elem ) {\n  let background = new Background( url, elem );\n  this.images.push( background );\n};\n\nImagesLoaded.prototype.check = function() {\n  this.progressedCount = 0;\n  this.hasAnyBroken = false;\n  // complete if no images\n  if ( !this.images.length ) {\n    this.complete();\n    return;\n  }\n\n  /* eslint-disable-next-line func-style */\n  let onProgress = ( image, elem, message ) => {\n    // HACK - Chrome triggers event before object properties have changed. #83\n    setTimeout( () => {\n      this.progress( image, elem, message );\n    } );\n  };\n\n  this.images.forEach( function( loadingImage ) {\n    loadingImage.once( 'progress', onProgress );\n    loadingImage.check();\n  } );\n};\n\nImagesLoaded.prototype.progress = function( image, elem, message ) {\n  this.progressedCount++;\n  this.hasAnyBroken = this.hasAnyBroken || !image.isLoaded;\n  // progress event\n  this.emitEvent( 'progress', [ this, image, elem ] );\n  if ( this.jqDeferred && this.jqDeferred.notify ) {\n    this.jqDeferred.notify( this, image );\n  }\n  // check if completed\n  if ( this.progressedCount === this.images.length ) {\n    this.complete();\n  }\n\n  if ( this.options.debug && console ) {\n    console.log( `progress: ${message}`, image, elem );\n  }\n};\n\nImagesLoaded.prototype.complete = function() {\n  let eventName = this.hasAnyBroken ? 'fail' : 'done';\n  this.isComplete = true;\n  this.emitEvent( eventName, [ this ] );\n  this.emitEvent( 'always', [ this ] );\n  if ( this.jqDeferred ) {\n    let jqMethod = this.hasAnyBroken ? 'reject' : 'resolve';\n    this.jqDeferred[ jqMethod ]( this );\n  }\n};\n\n// --------------------------  -------------------------- //\n\nfunction LoadingImage( img ) {\n  this.img = img;\n}\n\nLoadingImage.prototype = Object.create( EvEmitter.prototype );\n\nLoadingImage.prototype.check = function() {\n  // If complete is true and browser supports natural sizes,\n  // try to check for image status manually.\n  let isComplete = this.getIsImageComplete();\n  if ( isComplete ) {\n    // report based on naturalWidth\n    this.confirm( this.img.naturalWidth !== 0, 'naturalWidth' );\n    return;\n  }\n\n  // If none of the checks above matched, simulate loading on detached element.\n  this.proxyImage = new Image();\n  // add crossOrigin attribute. #204\n  if ( this.img.crossOrigin ) {\n    this.proxyImage.crossOrigin = this.img.crossOrigin;\n  }\n  this.proxyImage.addEventListener( 'load', this );\n  this.proxyImage.addEventListener( 'error', this );\n  // bind to image as well for Firefox. #191\n  this.img.addEventListener( 'load', this );\n  this.img.addEventListener( 'error', this );\n  this.proxyImage.src = this.img.currentSrc || this.img.src;\n};\n\nLoadingImage.prototype.getIsImageComplete = function() {\n  // check for non-zero, non-undefined naturalWidth\n  // fixes Safari+InfiniteScroll+Masonry bug infinite-scroll#671\n  return this.img.complete && this.img.naturalWidth;\n};\n\nLoadingImage.prototype.confirm = function( isLoaded, message ) {\n  this.isLoaded = isLoaded;\n  let { parentNode } = this.img;\n  // emit progress with parent <picture> or self <img>\n  let elem = parentNode.nodeName === 'PICTURE' ? parentNode : this.img;\n  this.emitEvent( 'progress', [ this, elem, message ] );\n};\n\n// ----- events ----- //\n\n// trigger specified handler for event type\nLoadingImage.prototype.handleEvent = function( event ) {\n  let method = 'on' + event.type;\n  if ( this[ method ] ) {\n    this[ method ]( event );\n  }\n};\n\nLoadingImage.prototype.onload = function() {\n  this.confirm( true, 'onload' );\n  this.unbindEvents();\n};\n\nLoadingImage.prototype.onerror = function() {\n  this.confirm( false, 'onerror' );\n  this.unbindEvents();\n};\n\nLoadingImage.prototype.unbindEvents = function() {\n  this.proxyImage.removeEventListener( 'load', this );\n  this.proxyImage.removeEventListener( 'error', this );\n  this.img.removeEventListener( 'load', this );\n  this.img.removeEventListener( 'error', this );\n};\n\n// -------------------------- Background -------------------------- //\n\nfunction Background( url, element ) {\n  this.url = url;\n  this.element = element;\n  this.img = new Image();\n}\n\n// inherit LoadingImage prototype\nBackground.prototype = Object.create( LoadingImage.prototype );\n\nBackground.prototype.check = function() {\n  this.img.addEventListener( 'load', this );\n  this.img.addEventListener( 'error', this );\n  this.img.src = this.url;\n  // check if image is already complete\n  let isComplete = this.getIsImageComplete();\n  if ( isComplete ) {\n    this.confirm( this.img.naturalWidth !== 0, 'naturalWidth' );\n    this.unbindEvents();\n  }\n};\n\nBackground.prototype.unbindEvents = function() {\n  this.img.removeEventListener( 'load', this );\n  this.img.removeEventListener( 'error', this );\n};\n\nBackground.prototype.confirm = function( isLoaded, message ) {\n  this.isLoaded = isLoaded;\n  this.emitEvent( 'progress', [ this, this.element, message ] );\n};\n\n// -------------------------- jQuery -------------------------- //\n\nImagesLoaded.makeJQueryPlugin = function( jQuery ) {\n  jQuery = jQuery || window.jQuery;\n  if ( !jQuery ) return;\n\n  // set local variable\n  $ = jQuery;\n  // $().imagesLoaded()\n  $.fn.imagesLoaded = function( options, onAlways ) {\n    let instance = new ImagesLoaded( this, options, onAlways );\n    return instance.jqDeferred.promise( $( this ) );\n  };\n};\n// try making plugin\nImagesLoaded.makeJQueryPlugin();\n\n// --------------------------  -------------------------- //\n\nreturn ImagesLoaded;\n\n} );\n","/*! PhotoSwipe - v4.1.3 - 2019-01-08\n* http://photoswipe.com\n* Copyright (c) 2019 Dmitry Semenov; */\n(function (root, factory) { \n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine(factory);\n\t} else if (typeof exports === 'object') {\n\t\tmodule.exports = factory();\n\t} else {\n\t\troot.PhotoSwipe = factory();\n\t}\n})(this, function () {\n\n\t'use strict';\n\tvar PhotoSwipe = function(template, UiClass, items, options){\n\n/*>>framework-bridge*/\n/**\n *\n * Set of generic functions used by gallery.\n * \n * You're free to modify anything here as long as functionality is kept.\n * \n */\nvar framework = {\n\tfeatures: null,\n\tbind: function(target, type, listener, unbind) {\n\t\tvar methodName = (unbind ? 'remove' : 'add') + 'EventListener';\n\t\ttype = type.split(' ');\n\t\tfor(var i = 0; i < type.length; i++) {\n\t\t\tif(type[i]) {\n\t\t\t\ttarget[methodName]( type[i], listener, false);\n\t\t\t}\n\t\t}\n\t},\n\tisArray: function(obj) {\n\t\treturn (obj instanceof Array);\n\t},\n\tcreateEl: function(classes, tag) {\n\t\tvar el = document.createElement(tag || 'div');\n\t\tif(classes) {\n\t\t\tel.className = classes;\n\t\t}\n\t\treturn el;\n\t},\n\tgetScrollY: function() {\n\t\tvar yOffset = window.pageYOffset;\n\t\treturn yOffset !== undefined ? yOffset : document.documentElement.scrollTop;\n\t},\n\tunbind: function(target, type, listener) {\n\t\tframework.bind(target,type,listener,true);\n\t},\n\tremoveClass: function(el, className) {\n\t\tvar reg = new RegExp('(\\\\s|^)' + className + '(\\\\s|$)');\n\t\tel.className = el.className.replace(reg, ' ').replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, ''); \n\t},\n\taddClass: function(el, className) {\n\t\tif( !framework.hasClass(el,className) ) {\n\t\t\tel.className += (el.className ? ' ' : '') + className;\n\t\t}\n\t},\n\thasClass: function(el, className) {\n\t\treturn el.className && new RegExp('(^|\\\\s)' + className + '(\\\\s|$)').test(el.className);\n\t},\n\tgetChildByClass: function(parentEl, childClassName) {\n\t\tvar node = parentEl.firstChild;\n\t\twhile(node) {\n\t\t\tif( framework.hasClass(node, childClassName) ) {\n\t\t\t\treturn node;\n\t\t\t}\n\t\t\tnode = node.nextSibling;\n\t\t}\n\t},\n\tarraySearch: function(array, value, key) {\n\t\tvar i = array.length;\n\t\twhile(i--) {\n\t\t\tif(array[i][key] === value) {\n\t\t\t\treturn i;\n\t\t\t} \n\t\t}\n\t\treturn -1;\n\t},\n\textend: function(o1, o2, preventOverwrite) {\n\t\tfor (var prop in o2) {\n\t\t\tif (o2.hasOwnProperty(prop)) {\n\t\t\t\tif(preventOverwrite && o1.hasOwnProperty(prop)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\to1[prop] = o2[prop];\n\t\t\t}\n\t\t}\n\t},\n\teasing: {\n\t\tsine: {\n\t\t\tout: function(k) {\n\t\t\t\treturn Math.sin(k * (Math.PI / 2));\n\t\t\t},\n\t\t\tinOut: function(k) {\n\t\t\t\treturn - (Math.cos(Math.PI * k) - 1) / 2;\n\t\t\t}\n\t\t},\n\t\tcubic: {\n\t\t\tout: function(k) {\n\t\t\t\treturn --k * k * k + 1;\n\t\t\t}\n\t\t}\n\t\t/*\n\t\t\telastic: {\n\t\t\t\tout: function ( k ) {\n\n\t\t\t\t\tvar s, a = 0.1, p = 0.4;\n\t\t\t\t\tif ( k === 0 ) return 0;\n\t\t\t\t\tif ( k === 1 ) return 1;\n\t\t\t\t\tif ( !a || a < 1 ) { a = 1; s = p / 4; }\n\t\t\t\t\telse s = p * Math.asin( 1 / a ) / ( 2 * Math.PI );\n\t\t\t\t\treturn ( a * Math.pow( 2, - 10 * k) * Math.sin( ( k - s ) * ( 2 * Math.PI ) / p ) + 1 );\n\n\t\t\t\t},\n\t\t\t},\n\t\t\tback: {\n\t\t\t\tout: function ( k ) {\n\t\t\t\t\tvar s = 1.70158;\n\t\t\t\t\treturn --k * k * ( ( s + 1 ) * k + s ) + 1;\n\t\t\t\t}\n\t\t\t}\n\t\t*/\n\t},\n\n\t/**\n\t * \n\t * @return {object}\n\t * \n\t * {\n\t *  raf : request animation frame function\n\t *  caf : cancel animation frame function\n\t *  transfrom : transform property key (with vendor), or null if not supported\n\t *  oldIE : IE8 or below\n\t * }\n\t * \n\t */\n\tdetectFeatures: function() {\n\t\tif(framework.features) {\n\t\t\treturn framework.features;\n\t\t}\n\t\tvar helperEl = framework.createEl(),\n\t\t\thelperStyle = helperEl.style,\n\t\t\tvendor = '',\n\t\t\tfeatures = {};\n\n\t\t// IE8 and below\n\t\tfeatures.oldIE = document.all && !document.addEventListener;\n\n\t\tfeatures.touch = 'ontouchstart' in window;\n\n\t\tif(window.requestAnimationFrame) {\n\t\t\tfeatures.raf = window.requestAnimationFrame;\n\t\t\tfeatures.caf = window.cancelAnimationFrame;\n\t\t}\n\n\t\tfeatures.pointerEvent = !!(window.PointerEvent) || navigator.msPointerEnabled;\n\n\t\t// fix false-positive detection of old Android in new IE\n\t\t// (IE11 ua string contains \"Android 4.0\")\n\t\t\n\t\tif(!features.pointerEvent) { \n\n\t\t\tvar ua = navigator.userAgent;\n\n\t\t\t// Detect if device is iPhone or iPod and if it's older than iOS 8\n\t\t\t// http://stackoverflow.com/a/14223920\n\t\t\t// \n\t\t\t// This detection is made because of buggy top/bottom toolbars\n\t\t\t// that don't trigger window.resize event.\n\t\t\t// For more info refer to _isFixedPosition variable in core.js\n\n\t\t\tif (/iP(hone|od)/.test(navigator.platform)) {\n\t\t\t\tvar v = (navigator.appVersion).match(/OS (\\d+)_(\\d+)_?(\\d+)?/);\n\t\t\t\tif(v && v.length > 0) {\n\t\t\t\t\tv = parseInt(v[1], 10);\n\t\t\t\t\tif(v >= 1 && v < 8 ) {\n\t\t\t\t\t\tfeatures.isOldIOSPhone = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Detect old Android (before KitKat)\n\t\t\t// due to bugs related to position:fixed\n\t\t\t// http://stackoverflow.com/questions/7184573/pick-up-the-android-version-in-the-browser-by-javascript\n\t\t\t\n\t\t\tvar match = ua.match(/Android\\s([0-9\\.]*)/);\n\t\t\tvar androidversion =  match ? match[1] : 0;\n\t\t\tandroidversion = parseFloat(androidversion);\n\t\t\tif(androidversion >= 1 ) {\n\t\t\t\tif(androidversion < 4.4) {\n\t\t\t\t\tfeatures.isOldAndroid = true; // for fixed position bug & performance\n\t\t\t\t}\n\t\t\t\tfeatures.androidVersion = androidversion; // for touchend bug\n\t\t\t}\t\n\t\t\tfeatures.isMobileOpera = /opera mini|opera mobi/i.test(ua);\n\n\t\t\t// p.s. yes, yes, UA sniffing is bad, propose your solution for above bugs.\n\t\t}\n\t\t\n\t\tvar styleChecks = ['transform', 'perspective', 'animationName'],\n\t\t\tvendors = ['', 'webkit','Moz','ms','O'],\n\t\t\tstyleCheckItem,\n\t\t\tstyleName;\n\n\t\tfor(var i = 0; i < 4; i++) {\n\t\t\tvendor = vendors[i];\n\n\t\t\tfor(var a = 0; a < 3; a++) {\n\t\t\t\tstyleCheckItem = styleChecks[a];\n\n\t\t\t\t// uppercase first letter of property name, if vendor is present\n\t\t\t\tstyleName = vendor + (vendor ? \n\t\t\t\t\t\t\t\t\t\tstyleCheckItem.charAt(0).toUpperCase() + styleCheckItem.slice(1) : \n\t\t\t\t\t\t\t\t\t\tstyleCheckItem);\n\t\t\t\n\t\t\t\tif(!features[styleCheckItem] && styleName in helperStyle ) {\n\t\t\t\t\tfeatures[styleCheckItem] = styleName;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(vendor && !features.raf) {\n\t\t\t\tvendor = vendor.toLowerCase();\n\t\t\t\tfeatures.raf = window[vendor+'RequestAnimationFrame'];\n\t\t\t\tif(features.raf) {\n\t\t\t\t\tfeatures.caf = window[vendor+'CancelAnimationFrame'] || \n\t\t\t\t\t\t\t\t\twindow[vendor+'CancelRequestAnimationFrame'];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\t\n\t\tif(!features.raf) {\n\t\t\tvar lastTime = 0;\n\t\t\tfeatures.raf = function(fn) {\n\t\t\t\tvar currTime = new Date().getTime();\n\t\t\t\tvar timeToCall = Math.max(0, 16 - (currTime - lastTime));\n\t\t\t\tvar id = window.setTimeout(function() { fn(currTime + timeToCall); }, timeToCall);\n\t\t\t\tlastTime = currTime + timeToCall;\n\t\t\t\treturn id;\n\t\t\t};\n\t\t\tfeatures.caf = function(id) { clearTimeout(id); };\n\t\t}\n\n\t\t// Detect SVG support\n\t\tfeatures.svg = !!document.createElementNS && \n\t\t\t\t\t\t!!document.createElementNS('http://www.w3.org/2000/svg', 'svg').createSVGRect;\n\n\t\tframework.features = features;\n\n\t\treturn features;\n\t}\n};\n\nframework.detectFeatures();\n\n// Override addEventListener for old versions of IE\nif(framework.features.oldIE) {\n\n\tframework.bind = function(target, type, listener, unbind) {\n\t\t\n\t\ttype = type.split(' ');\n\n\t\tvar methodName = (unbind ? 'detach' : 'attach') + 'Event',\n\t\t\tevName,\n\t\t\t_handleEv = function() {\n\t\t\t\tlistener.handleEvent.call(listener);\n\t\t\t};\n\n\t\tfor(var i = 0; i < type.length; i++) {\n\t\t\tevName = type[i];\n\t\t\tif(evName) {\n\n\t\t\t\tif(typeof listener === 'object' && listener.handleEvent) {\n\t\t\t\t\tif(!unbind) {\n\t\t\t\t\t\tlistener['oldIE' + evName] = _handleEv;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif(!listener['oldIE' + evName]) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\ttarget[methodName]( 'on' + evName, listener['oldIE' + evName]);\n\t\t\t\t} else {\n\t\t\t\t\ttarget[methodName]( 'on' + evName, listener);\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\t};\n\t\n}\n\n/*>>framework-bridge*/\n\n/*>>core*/\n//function(template, UiClass, items, options)\n\nvar self = this;\n\n/**\n * Static vars, don't change unless you know what you're doing.\n */\nvar DOUBLE_TAP_RADIUS = 25, \n\tNUM_HOLDERS = 3;\n\n/**\n * Options\n */\nvar _options = {\n\tallowPanToNext:true,\n\tspacing: 0.12,\n\tbgOpacity: 1,\n\tmouseUsed: false,\n\tloop: true,\n\tpinchToClose: true,\n\tcloseOnScroll: true,\n\tcloseOnVerticalDrag: true,\n\tverticalDragRange: 0.75,\n\thideAnimationDuration: 333,\n\tshowAnimationDuration: 333,\n\tshowHideOpacity: false,\n\tfocus: true,\n\tescKey: true,\n\tarrowKeys: true,\n\tmainScrollEndFriction: 0.35,\n\tpanEndFriction: 0.35,\n\tisClickableElement: function(el) {\n        return el.tagName === 'A';\n    },\n    getDoubleTapZoom: function(isMouseClick, item) {\n    \tif(isMouseClick) {\n    \t\treturn 1;\n    \t} else {\n    \t\treturn item.initialZoomLevel < 0.7 ? 1 : 1.33;\n    \t}\n    },\n    maxSpreadZoom: 1.33,\n\tmodal: true,\n\n\t// not fully implemented yet\n\tscaleMode: 'fit' // TODO\n};\nframework.extend(_options, options);\n\n\n/**\n * Private helper variables & functions\n */\n\nvar _getEmptyPoint = function() { \n\t\treturn {x:0,y:0}; \n\t};\n\nvar _isOpen,\n\t_isDestroying,\n\t_closedByScroll,\n\t_currentItemIndex,\n\t_containerStyle,\n\t_containerShiftIndex,\n\t_currPanDist = _getEmptyPoint(),\n\t_startPanOffset = _getEmptyPoint(),\n\t_panOffset = _getEmptyPoint(),\n\t_upMoveEvents, // drag move, drag end & drag cancel events array\n\t_downEvents, // drag start events array\n\t_globalEventHandlers,\n\t_viewportSize = {},\n\t_currZoomLevel,\n\t_startZoomLevel,\n\t_translatePrefix,\n\t_translateSufix,\n\t_updateSizeInterval,\n\t_itemsNeedUpdate,\n\t_currPositionIndex = 0,\n\t_offset = {},\n\t_slideSize = _getEmptyPoint(), // size of slide area, including spacing\n\t_itemHolders,\n\t_prevItemIndex,\n\t_indexDiff = 0, // difference of indexes since last content update\n\t_dragStartEvent,\n\t_dragMoveEvent,\n\t_dragEndEvent,\n\t_dragCancelEvent,\n\t_transformKey,\n\t_pointerEventEnabled,\n\t_isFixedPosition = true,\n\t_likelyTouchDevice,\n\t_modules = [],\n\t_requestAF,\n\t_cancelAF,\n\t_initalClassName,\n\t_initalWindowScrollY,\n\t_oldIE,\n\t_currentWindowScrollY,\n\t_features,\n\t_windowVisibleSize = {},\n\t_renderMaxResolution = false,\n\t_orientationChangeTimeout,\n\n\n\t// Registers PhotoSWipe module (History, Controller ...)\n\t_registerModule = function(name, module) {\n\t\tframework.extend(self, module.publicMethods);\n\t\t_modules.push(name);\n\t},\n\n\t_getLoopedId = function(index) {\n\t\tvar numSlides = _getNumItems();\n\t\tif(index > numSlides - 1) {\n\t\t\treturn index - numSlides;\n\t\t} else  if(index < 0) {\n\t\t\treturn numSlides + index;\n\t\t}\n\t\treturn index;\n\t},\n\t\n\t// Micro bind/trigger\n\t_listeners = {},\n\t_listen = function(name, fn) {\n\t\tif(!_listeners[name]) {\n\t\t\t_listeners[name] = [];\n\t\t}\n\t\treturn _listeners[name].push(fn);\n\t},\n\t_shout = function(name) {\n\t\tvar listeners = _listeners[name];\n\n\t\tif(listeners) {\n\t\t\tvar args = Array.prototype.slice.call(arguments);\n\t\t\targs.shift();\n\n\t\t\tfor(var i = 0; i < listeners.length; i++) {\n\t\t\t\tlisteners[i].apply(self, args);\n\t\t\t}\n\t\t}\n\t},\n\n\t_getCurrentTime = function() {\n\t\treturn new Date().getTime();\n\t},\n\t_applyBgOpacity = function(opacity) {\n\t\t_bgOpacity = opacity;\n\t\tself.bg.style.opacity = opacity * _options.bgOpacity;\n\t},\n\n\t_applyZoomTransform = function(styleObj,x,y,zoom,item) {\n\t\tif(!_renderMaxResolution || (item && item !== self.currItem) ) {\n\t\t\tzoom = zoom / (item ? item.fitRatio : self.currItem.fitRatio);\t\n\t\t}\n\t\t\t\n\t\tstyleObj[_transformKey] = _translatePrefix + x + 'px, ' + y + 'px' + _translateSufix + ' scale(' + zoom + ')';\n\t},\n\t_applyCurrentZoomPan = function( allowRenderResolution ) {\n\t\tif(_currZoomElementStyle) {\n\n\t\t\tif(allowRenderResolution) {\n\t\t\t\tif(_currZoomLevel > self.currItem.fitRatio) {\n\t\t\t\t\tif(!_renderMaxResolution) {\n\t\t\t\t\t\t_setImageSize(self.currItem, false, true);\n\t\t\t\t\t\t_renderMaxResolution = true;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif(_renderMaxResolution) {\n\t\t\t\t\t\t_setImageSize(self.currItem);\n\t\t\t\t\t\t_renderMaxResolution = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\n\t\t\t_applyZoomTransform(_currZoomElementStyle, _panOffset.x, _panOffset.y, _currZoomLevel);\n\t\t}\n\t},\n\t_applyZoomPanToItem = function(item) {\n\t\tif(item.container) {\n\n\t\t\t_applyZoomTransform(item.container.style, \n\t\t\t\t\t\t\t\titem.initialPosition.x, \n\t\t\t\t\t\t\t\titem.initialPosition.y, \n\t\t\t\t\t\t\t\titem.initialZoomLevel,\n\t\t\t\t\t\t\t\titem);\n\t\t}\n\t},\n\t_setTranslateX = function(x, elStyle) {\n\t\telStyle[_transformKey] = _translatePrefix + x + 'px, 0px' + _translateSufix;\n\t},\n\t_moveMainScroll = function(x, dragging) {\n\n\t\tif(!_options.loop && dragging) {\n\t\t\tvar newSlideIndexOffset = _currentItemIndex + (_slideSize.x * _currPositionIndex - x) / _slideSize.x,\n\t\t\t\tdelta = Math.round(x - _mainScrollPos.x);\n\n\t\t\tif( (newSlideIndexOffset < 0 && delta > 0) || \n\t\t\t\t(newSlideIndexOffset >= _getNumItems() - 1 && delta < 0) ) {\n\t\t\t\tx = _mainScrollPos.x + delta * _options.mainScrollEndFriction;\n\t\t\t} \n\t\t}\n\t\t\n\t\t_mainScrollPos.x = x;\n\t\t_setTranslateX(x, _containerStyle);\n\t},\n\t_calculatePanOffset = function(axis, zoomLevel) {\n\t\tvar m = _midZoomPoint[axis] - _offset[axis];\n\t\treturn _startPanOffset[axis] + _currPanDist[axis] + m - m * ( zoomLevel / _startZoomLevel );\n\t},\n\t\n\t_equalizePoints = function(p1, p2) {\n\t\tp1.x = p2.x;\n\t\tp1.y = p2.y;\n\t\tif(p2.id) {\n\t\t\tp1.id = p2.id;\n\t\t}\n\t},\n\t_roundPoint = function(p) {\n\t\tp.x = Math.round(p.x);\n\t\tp.y = Math.round(p.y);\n\t},\n\n\t_mouseMoveTimeout = null,\n\t_onFirstMouseMove = function() {\n\t\t// Wait until mouse move event is fired at least twice during 100ms\n\t\t// We do this, because some mobile browsers trigger it on touchstart\n\t\tif(_mouseMoveTimeout ) { \n\t\t\tframework.unbind(document, 'mousemove', _onFirstMouseMove);\n\t\t\tframework.addClass(template, 'pswp--has_mouse');\n\t\t\t_options.mouseUsed = true;\n\t\t\t_shout('mouseUsed');\n\t\t}\n\t\t_mouseMoveTimeout = setTimeout(function() {\n\t\t\t_mouseMoveTimeout = null;\n\t\t}, 100);\n\t},\n\n\t_bindEvents = function() {\n\t\tframework.bind(document, 'keydown', self);\n\n\t\tif(_features.transform) {\n\t\t\t// don't bind click event in browsers that don't support transform (mostly IE8)\n\t\t\tframework.bind(self.scrollWrap, 'click', self);\n\t\t}\n\t\t\n\n\t\tif(!_options.mouseUsed) {\n\t\t\tframework.bind(document, 'mousemove', _onFirstMouseMove);\n\t\t}\n\n\t\tframework.bind(window, 'resize scroll orientationchange', self);\n\n\t\t_shout('bindEvents');\n\t},\n\n\t_unbindEvents = function() {\n\t\tframework.unbind(window, 'resize scroll orientationchange', self);\n\t\tframework.unbind(window, 'scroll', _globalEventHandlers.scroll);\n\t\tframework.unbind(document, 'keydown', self);\n\t\tframework.unbind(document, 'mousemove', _onFirstMouseMove);\n\n\t\tif(_features.transform) {\n\t\t\tframework.unbind(self.scrollWrap, 'click', self);\n\t\t}\n\n\t\tif(_isDragging) {\n\t\t\tframework.unbind(window, _upMoveEvents, self);\n\t\t}\n\n\t\tclearTimeout(_orientationChangeTimeout);\n\n\t\t_shout('unbindEvents');\n\t},\n\t\n\t_calculatePanBounds = function(zoomLevel, update) {\n\t\tvar bounds = _calculateItemSize( self.currItem, _viewportSize, zoomLevel );\n\t\tif(update) {\n\t\t\t_currPanBounds = bounds;\n\t\t}\n\t\treturn bounds;\n\t},\n\t\n\t_getMinZoomLevel = function(item) {\n\t\tif(!item) {\n\t\t\titem = self.currItem;\n\t\t}\n\t\treturn item.initialZoomLevel;\n\t},\n\t_getMaxZoomLevel = function(item) {\n\t\tif(!item) {\n\t\t\titem = self.currItem;\n\t\t}\n\t\treturn item.w > 0 ? _options.maxSpreadZoom : 1;\n\t},\n\n\t// Return true if offset is out of the bounds\n\t_modifyDestPanOffset = function(axis, destPanBounds, destPanOffset, destZoomLevel) {\n\t\tif(destZoomLevel === self.currItem.initialZoomLevel) {\n\t\t\tdestPanOffset[axis] = self.currItem.initialPosition[axis];\n\t\t\treturn true;\n\t\t} else {\n\t\t\tdestPanOffset[axis] = _calculatePanOffset(axis, destZoomLevel); \n\n\t\t\tif(destPanOffset[axis] > destPanBounds.min[axis]) {\n\t\t\t\tdestPanOffset[axis] = destPanBounds.min[axis];\n\t\t\t\treturn true;\n\t\t\t} else if(destPanOffset[axis] < destPanBounds.max[axis] ) {\n\t\t\t\tdestPanOffset[axis] = destPanBounds.max[axis];\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n\n\t_setupTransforms = function() {\n\n\t\tif(_transformKey) {\n\t\t\t// setup 3d transforms\n\t\t\tvar allow3dTransform = _features.perspective && !_likelyTouchDevice;\n\t\t\t_translatePrefix = 'translate' + (allow3dTransform ? '3d(' : '(');\n\t\t\t_translateSufix = _features.perspective ? ', 0px)' : ')';\t\n\t\t\treturn;\n\t\t}\n\n\t\t// Override zoom/pan/move functions in case old browser is used (most likely IE)\n\t\t// (so they use left/top/width/height, instead of CSS transform)\n\t\n\t\t_transformKey = 'left';\n\t\tframework.addClass(template, 'pswp--ie');\n\n\t\t_setTranslateX = function(x, elStyle) {\n\t\t\telStyle.left = x + 'px';\n\t\t};\n\t\t_applyZoomPanToItem = function(item) {\n\n\t\t\tvar zoomRatio = item.fitRatio > 1 ? 1 : item.fitRatio,\n\t\t\t\ts = item.container.style,\n\t\t\t\tw = zoomRatio * item.w,\n\t\t\t\th = zoomRatio * item.h;\n\n\t\t\ts.width = w + 'px';\n\t\t\ts.height = h + 'px';\n\t\t\ts.left = item.initialPosition.x + 'px';\n\t\t\ts.top = item.initialPosition.y + 'px';\n\n\t\t};\n\t\t_applyCurrentZoomPan = function() {\n\t\t\tif(_currZoomElementStyle) {\n\n\t\t\t\tvar s = _currZoomElementStyle,\n\t\t\t\t\titem = self.currItem,\n\t\t\t\t\tzoomRatio = item.fitRatio > 1 ? 1 : item.fitRatio,\n\t\t\t\t\tw = zoomRatio * item.w,\n\t\t\t\t\th = zoomRatio * item.h;\n\n\t\t\t\ts.width = w + 'px';\n\t\t\t\ts.height = h + 'px';\n\n\n\t\t\t\ts.left = _panOffset.x + 'px';\n\t\t\t\ts.top = _panOffset.y + 'px';\n\t\t\t}\n\t\t\t\n\t\t};\n\t},\n\n\t_onKeyDown = function(e) {\n\t\tvar keydownAction = '';\n\t\tif(_options.escKey && e.keyCode === 27) { \n\t\t\tkeydownAction = 'close';\n\t\t} else if(_options.arrowKeys) {\n\t\t\tif(e.keyCode === 37) {\n\t\t\t\tkeydownAction = 'prev';\n\t\t\t} else if(e.keyCode === 39) { \n\t\t\t\tkeydownAction = 'next';\n\t\t\t}\n\t\t}\n\n\t\tif(keydownAction) {\n\t\t\t// don't do anything if special key pressed to prevent from overriding default browser actions\n\t\t\t// e.g. in Chrome on Mac cmd+arrow-left returns to previous page\n\t\t\tif( !e.ctrlKey && !e.altKey && !e.shiftKey && !e.metaKey ) {\n\t\t\t\tif(e.preventDefault) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t} else {\n\t\t\t\t\te.returnValue = false;\n\t\t\t\t} \n\t\t\t\tself[keydownAction]();\n\t\t\t}\n\t\t}\n\t},\n\n\t_onGlobalClick = function(e) {\n\t\tif(!e) {\n\t\t\treturn;\n\t\t}\n\n\t\t// don't allow click event to pass through when triggering after drag or some other gesture\n\t\tif(_moved || _zoomStarted || _mainScrollAnimating || _verticalDragInitiated) {\n\t\t\te.preventDefault();\n\t\t\te.stopPropagation();\n\t\t}\n\t},\n\n\t_updatePageScrollOffset = function() {\n\t\tself.setScrollOffset(0, framework.getScrollY());\t\t\n\t};\n\t\n\n\n\t\n\n\n\n// Micro animation engine\nvar _animations = {},\n\t_numAnimations = 0,\n\t_stopAnimation = function(name) {\n\t\tif(_animations[name]) {\n\t\t\tif(_animations[name].raf) {\n\t\t\t\t_cancelAF( _animations[name].raf );\n\t\t\t}\n\t\t\t_numAnimations--;\n\t\t\tdelete _animations[name];\n\t\t}\n\t},\n\t_registerStartAnimation = function(name) {\n\t\tif(_animations[name]) {\n\t\t\t_stopAnimation(name);\n\t\t}\n\t\tif(!_animations[name]) {\n\t\t\t_numAnimations++;\n\t\t\t_animations[name] = {};\n\t\t}\n\t},\n\t_stopAllAnimations = function() {\n\t\tfor (var prop in _animations) {\n\n\t\t\tif( _animations.hasOwnProperty( prop ) ) {\n\t\t\t\t_stopAnimation(prop);\n\t\t\t} \n\t\t\t\n\t\t}\n\t},\n\t_animateProp = function(name, b, endProp, d, easingFn, onUpdate, onComplete) {\n\t\tvar startAnimTime = _getCurrentTime(), t;\n\t\t_registerStartAnimation(name);\n\n\t\tvar animloop = function(){\n\t\t\tif ( _animations[name] ) {\n\t\t\t\t\n\t\t\t\tt = _getCurrentTime() - startAnimTime; // time diff\n\t\t\t\t//b - beginning (start prop)\n\t\t\t\t//d - anim duration\n\n\t\t\t\tif ( t >= d ) {\n\t\t\t\t\t_stopAnimation(name);\n\t\t\t\t\tonUpdate(endProp);\n\t\t\t\t\tif(onComplete) {\n\t\t\t\t\t\tonComplete();\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tonUpdate( (endProp - b) * easingFn(t/d) + b );\n\n\t\t\t\t_animations[name].raf = _requestAF(animloop);\n\t\t\t}\n\t\t};\n\t\tanimloop();\n\t};\n\t\n\n\nvar publicMethods = {\n\n\t// make a few local variables and functions public\n\tshout: _shout,\n\tlisten: _listen,\n\tviewportSize: _viewportSize,\n\toptions: _options,\n\n\tisMainScrollAnimating: function() {\n\t\treturn _mainScrollAnimating;\n\t},\n\tgetZoomLevel: function() {\n\t\treturn _currZoomLevel;\n\t},\n\tgetCurrentIndex: function() {\n\t\treturn _currentItemIndex;\n\t},\n\tisDragging: function() {\n\t\treturn _isDragging;\n\t},\t\n\tisZooming: function() {\n\t\treturn _isZooming;\n\t},\n\tsetScrollOffset: function(x,y) {\n\t\t_offset.x = x;\n\t\t_currentWindowScrollY = _offset.y = y;\n\t\t_shout('updateScrollOffset', _offset);\n\t},\n\tapplyZoomPan: function(zoomLevel,panX,panY,allowRenderResolution) {\n\t\t_panOffset.x = panX;\n\t\t_panOffset.y = panY;\n\t\t_currZoomLevel = zoomLevel;\n\t\t_applyCurrentZoomPan( allowRenderResolution );\n\t},\n\n\tinit: function() {\n\n\t\tif(_isOpen || _isDestroying) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar i;\n\n\t\tself.framework = framework; // basic functionality\n\t\tself.template = template; // root DOM element of PhotoSwipe\n\t\tself.bg = framework.getChildByClass(template, 'pswp__bg');\n\n\t\t_initalClassName = template.className;\n\t\t_isOpen = true;\n\t\t\t\t\n\t\t_features = framework.detectFeatures();\n\t\t_requestAF = _features.raf;\n\t\t_cancelAF = _features.caf;\n\t\t_transformKey = _features.transform;\n\t\t_oldIE = _features.oldIE;\n\t\t\n\t\tself.scrollWrap = framework.getChildByClass(template, 'pswp__scroll-wrap');\n\t\tself.container = framework.getChildByClass(self.scrollWrap, 'pswp__container');\n\n\t\t_containerStyle = self.container.style; // for fast access\n\n\t\t// Objects that hold slides (there are only 3 in DOM)\n\t\tself.itemHolders = _itemHolders = [\n\t\t\t{el:self.container.children[0] , wrap:0, index: -1},\n\t\t\t{el:self.container.children[1] , wrap:0, index: -1},\n\t\t\t{el:self.container.children[2] , wrap:0, index: -1}\n\t\t];\n\n\t\t// hide nearby item holders until initial zoom animation finishes (to avoid extra Paints)\n\t\t_itemHolders[0].el.style.display = _itemHolders[2].el.style.display = 'none';\n\n\t\t_setupTransforms();\n\n\t\t// Setup global events\n\t\t_globalEventHandlers = {\n\t\t\tresize: self.updateSize,\n\n\t\t\t// Fixes: iOS 10.3 resize event\n\t\t\t// does not update scrollWrap.clientWidth instantly after resize\n\t\t\t// https://github.com/dimsemenov/PhotoSwipe/issues/1315\n\t\t\torientationchange: function() {\n\t\t\t\tclearTimeout(_orientationChangeTimeout);\n\t\t\t\t_orientationChangeTimeout = setTimeout(function() {\n\t\t\t\t\tif(_viewportSize.x !== self.scrollWrap.clientWidth) {\n\t\t\t\t\t\tself.updateSize();\n\t\t\t\t\t}\n\t\t\t\t}, 500);\n\t\t\t},\n\t\t\tscroll: _updatePageScrollOffset,\n\t\t\tkeydown: _onKeyDown,\n\t\t\tclick: _onGlobalClick\n\t\t};\n\n\t\t// disable show/hide effects on old browsers that don't support CSS animations or transforms, \n\t\t// old IOS, Android and Opera mobile. Blackberry seems to work fine, even older models.\n\t\tvar oldPhone = _features.isOldIOSPhone || _features.isOldAndroid || _features.isMobileOpera;\n\t\tif(!_features.animationName || !_features.transform || oldPhone) {\n\t\t\t_options.showAnimationDuration = _options.hideAnimationDuration = 0;\n\t\t}\n\n\t\t// init modules\n\t\tfor(i = 0; i < _modules.length; i++) {\n\t\t\tself['init' + _modules[i]]();\n\t\t}\n\t\t\n\t\t// init\n\t\tif(UiClass) {\n\t\t\tvar ui = self.ui = new UiClass(self, framework);\n\t\t\tui.init();\n\t\t}\n\n\t\t_shout('firstUpdate');\n\t\t_currentItemIndex = _currentItemIndex || _options.index || 0;\n\t\t// validate index\n\t\tif( isNaN(_currentItemIndex) || _currentItemIndex < 0 || _currentItemIndex >= _getNumItems() ) {\n\t\t\t_currentItemIndex = 0;\n\t\t}\n\t\tself.currItem = _getItemAt( _currentItemIndex );\n\n\t\t\n\t\tif(_features.isOldIOSPhone || _features.isOldAndroid) {\n\t\t\t_isFixedPosition = false;\n\t\t}\n\t\t\n\t\ttemplate.setAttribute('aria-hidden', 'false');\n\t\tif(_options.modal) {\n\t\t\tif(!_isFixedPosition) {\n\t\t\t\ttemplate.style.position = 'absolute';\n\t\t\t\ttemplate.style.top = framework.getScrollY() + 'px';\n\t\t\t} else {\n\t\t\t\ttemplate.style.position = 'fixed';\n\t\t\t}\n\t\t}\n\n\t\tif(_currentWindowScrollY === undefined) {\n\t\t\t_shout('initialLayout');\n\t\t\t_currentWindowScrollY = _initalWindowScrollY = framework.getScrollY();\n\t\t}\n\t\t\n\t\t// add classes to root element of PhotoSwipe\n\t\tvar rootClasses = 'pswp--open ';\n\t\tif(_options.mainClass) {\n\t\t\trootClasses += _options.mainClass + ' ';\n\t\t}\n\t\tif(_options.showHideOpacity) {\n\t\t\trootClasses += 'pswp--animate_opacity ';\n\t\t}\n\t\trootClasses += _likelyTouchDevice ? 'pswp--touch' : 'pswp--notouch';\n\t\trootClasses += _features.animationName ? ' pswp--css_animation' : '';\n\t\trootClasses += _features.svg ? ' pswp--svg' : '';\n\t\tframework.addClass(template, rootClasses);\n\n\t\tself.updateSize();\n\n\t\t// initial update\n\t\t_containerShiftIndex = -1;\n\t\t_indexDiff = null;\n\t\tfor(i = 0; i < NUM_HOLDERS; i++) {\n\t\t\t_setTranslateX( (i+_containerShiftIndex) * _slideSize.x, _itemHolders[i].el.style);\n\t\t}\n\n\t\tif(!_oldIE) {\n\t\t\tframework.bind(self.scrollWrap, _downEvents, self); // no dragging for old IE\n\t\t}\t\n\n\t\t_listen('initialZoomInEnd', function() {\n\t\t\tself.setContent(_itemHolders[0], _currentItemIndex-1);\n\t\t\tself.setContent(_itemHolders[2], _currentItemIndex+1);\n\n\t\t\t_itemHolders[0].el.style.display = _itemHolders[2].el.style.display = 'block';\n\n\t\t\tif(_options.focus) {\n\t\t\t\t// focus causes layout, \n\t\t\t\t// which causes lag during the animation, \n\t\t\t\t// that's why we delay it untill the initial zoom transition ends\n\t\t\t\ttemplate.focus();\n\t\t\t}\n\t\t\t \n\n\t\t\t_bindEvents();\n\t\t});\n\n\t\t// set content for center slide (first time)\n\t\tself.setContent(_itemHolders[1], _currentItemIndex);\n\t\t\n\t\tself.updateCurrItem();\n\n\t\t_shout('afterInit');\n\n\t\tif(!_isFixedPosition) {\n\n\t\t\t// On all versions of iOS lower than 8.0, we check size of viewport every second.\n\t\t\t// \n\t\t\t// This is done to detect when Safari top & bottom bars appear, \n\t\t\t// as this action doesn't trigger any events (like resize). \n\t\t\t// \n\t\t\t// On iOS8 they fixed this.\n\t\t\t// \n\t\t\t// 10 Nov 2014: iOS 7 usage ~40%. iOS 8 usage 56%.\n\t\t\t\n\t\t\t_updateSizeInterval = setInterval(function() {\n\t\t\t\tif(!_numAnimations && !_isDragging && !_isZooming && (_currZoomLevel === self.currItem.initialZoomLevel)  ) {\n\t\t\t\t\tself.updateSize();\n\t\t\t\t}\n\t\t\t}, 1000);\n\t\t}\n\n\t\tframework.addClass(template, 'pswp--visible');\n\t},\n\n\t// Close the gallery, then destroy it\n\tclose: function() {\n\t\tif(!_isOpen) {\n\t\t\treturn;\n\t\t}\n\n\t\t_isOpen = false;\n\t\t_isDestroying = true;\n\t\t_shout('close');\n\t\t_unbindEvents();\n\n\t\t_showOrHide(self.currItem, null, true, self.destroy);\n\t},\n\n\t// destroys the gallery (unbinds events, cleans up intervals and timeouts to avoid memory leaks)\n\tdestroy: function() {\n\t\t_shout('destroy');\n\n\t\tif(_showOrHideTimeout) {\n\t\t\tclearTimeout(_showOrHideTimeout);\n\t\t}\n\t\t\n\t\ttemplate.setAttribute('aria-hidden', 'true');\n\t\ttemplate.className = _initalClassName;\n\n\t\tif(_updateSizeInterval) {\n\t\t\tclearInterval(_updateSizeInterval);\n\t\t}\n\n\t\tframework.unbind(self.scrollWrap, _downEvents, self);\n\n\t\t// we unbind scroll event at the end, as closing animation may depend on it\n\t\tframework.unbind(window, 'scroll', self);\n\n\t\t_stopDragUpdateLoop();\n\n\t\t_stopAllAnimations();\n\n\t\t_listeners = null;\n\t},\n\n\t/**\n\t * Pan image to position\n\t * @param {Number} x     \n\t * @param {Number} y     \n\t * @param {Boolean} force Will ignore bounds if set to true.\n\t */\n\tpanTo: function(x,y,force) {\n\t\tif(!force) {\n\t\t\tif(x > _currPanBounds.min.x) {\n\t\t\t\tx = _currPanBounds.min.x;\n\t\t\t} else if(x < _currPanBounds.max.x) {\n\t\t\t\tx = _currPanBounds.max.x;\n\t\t\t}\n\n\t\t\tif(y > _currPanBounds.min.y) {\n\t\t\t\ty = _currPanBounds.min.y;\n\t\t\t} else if(y < _currPanBounds.max.y) {\n\t\t\t\ty = _currPanBounds.max.y;\n\t\t\t}\n\t\t}\n\t\t\n\t\t_panOffset.x = x;\n\t\t_panOffset.y = y;\n\t\t_applyCurrentZoomPan();\n\t},\n\t\n\thandleEvent: function (e) {\n\t\te = e || window.event;\n\t\tif(_globalEventHandlers[e.type]) {\n\t\t\t_globalEventHandlers[e.type](e);\n\t\t}\n\t},\n\n\n\tgoTo: function(index) {\n\n\t\tindex = _getLoopedId(index);\n\n\t\tvar diff = index - _currentItemIndex;\n\t\t_indexDiff = diff;\n\n\t\t_currentItemIndex = index;\n\t\tself.currItem = _getItemAt( _currentItemIndex );\n\t\t_currPositionIndex -= diff;\n\t\t\n\t\t_moveMainScroll(_slideSize.x * _currPositionIndex);\n\t\t\n\n\t\t_stopAllAnimations();\n\t\t_mainScrollAnimating = false;\n\n\t\tself.updateCurrItem();\n\t},\n\tnext: function() {\n\t\tself.goTo( _currentItemIndex + 1);\n\t},\n\tprev: function() {\n\t\tself.goTo( _currentItemIndex - 1);\n\t},\n\n\t// update current zoom/pan objects\n\tupdateCurrZoomItem: function(emulateSetContent) {\n\t\tif(emulateSetContent) {\n\t\t\t_shout('beforeChange', 0);\n\t\t}\n\n\t\t// itemHolder[1] is middle (current) item\n\t\tif(_itemHolders[1].el.children.length) {\n\t\t\tvar zoomElement = _itemHolders[1].el.children[0];\n\t\t\tif( framework.hasClass(zoomElement, 'pswp__zoom-wrap') ) {\n\t\t\t\t_currZoomElementStyle = zoomElement.style;\n\t\t\t} else {\n\t\t\t\t_currZoomElementStyle = null;\n\t\t\t}\n\t\t} else {\n\t\t\t_currZoomElementStyle = null;\n\t\t}\n\t\t\n\t\t_currPanBounds = self.currItem.bounds;\t\n\t\t_startZoomLevel = _currZoomLevel = self.currItem.initialZoomLevel;\n\n\t\t_panOffset.x = _currPanBounds.center.x;\n\t\t_panOffset.y = _currPanBounds.center.y;\n\n\t\tif(emulateSetContent) {\n\t\t\t_shout('afterChange');\n\t\t}\n\t},\n\n\n\tinvalidateCurrItems: function() {\n\t\t_itemsNeedUpdate = true;\n\t\tfor(var i = 0; i < NUM_HOLDERS; i++) {\n\t\t\tif( _itemHolders[i].item ) {\n\t\t\t\t_itemHolders[i].item.needsUpdate = true;\n\t\t\t}\n\t\t}\n\t},\n\n\tupdateCurrItem: function(beforeAnimation) {\n\n\t\tif(_indexDiff === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar diffAbs = Math.abs(_indexDiff),\n\t\t\ttempHolder;\n\n\t\tif(beforeAnimation && diffAbs < 2) {\n\t\t\treturn;\n\t\t}\n\n\n\t\tself.currItem = _getItemAt( _currentItemIndex );\n\t\t_renderMaxResolution = false;\n\t\t\n\t\t_shout('beforeChange', _indexDiff);\n\n\t\tif(diffAbs >= NUM_HOLDERS) {\n\t\t\t_containerShiftIndex += _indexDiff + (_indexDiff > 0 ? -NUM_HOLDERS : NUM_HOLDERS);\n\t\t\tdiffAbs = NUM_HOLDERS;\n\t\t}\n\t\tfor(var i = 0; i < diffAbs; i++) {\n\t\t\tif(_indexDiff > 0) {\n\t\t\t\ttempHolder = _itemHolders.shift();\n\t\t\t\t_itemHolders[NUM_HOLDERS-1] = tempHolder; // move first to last\n\n\t\t\t\t_containerShiftIndex++;\n\t\t\t\t_setTranslateX( (_containerShiftIndex+2) * _slideSize.x, tempHolder.el.style);\n\t\t\t\tself.setContent(tempHolder, _currentItemIndex - diffAbs + i + 1 + 1);\n\t\t\t} else {\n\t\t\t\ttempHolder = _itemHolders.pop();\n\t\t\t\t_itemHolders.unshift( tempHolder ); // move last to first\n\n\t\t\t\t_containerShiftIndex--;\n\t\t\t\t_setTranslateX( _containerShiftIndex * _slideSize.x, tempHolder.el.style);\n\t\t\t\tself.setContent(tempHolder, _currentItemIndex + diffAbs - i - 1 - 1);\n\t\t\t}\n\t\t\t\n\t\t}\n\n\t\t// reset zoom/pan on previous item\n\t\tif(_currZoomElementStyle && Math.abs(_indexDiff) === 1) {\n\n\t\t\tvar prevItem = _getItemAt(_prevItemIndex);\n\t\t\tif(prevItem.initialZoomLevel !== _currZoomLevel) {\n\t\t\t\t_calculateItemSize(prevItem , _viewportSize );\n\t\t\t\t_setImageSize(prevItem);\n\t\t\t\t_applyZoomPanToItem( prevItem ); \t\t\t\t\n\t\t\t}\n\n\t\t}\n\n\t\t// reset diff after update\n\t\t_indexDiff = 0;\n\n\t\tself.updateCurrZoomItem();\n\n\t\t_prevItemIndex = _currentItemIndex;\n\n\t\t_shout('afterChange');\n\t\t\n\t},\n\n\n\n\tupdateSize: function(force) {\n\t\t\n\t\tif(!_isFixedPosition && _options.modal) {\n\t\t\tvar windowScrollY = framework.getScrollY();\n\t\t\tif(_currentWindowScrollY !== windowScrollY) {\n\t\t\t\ttemplate.style.top = windowScrollY + 'px';\n\t\t\t\t_currentWindowScrollY = windowScrollY;\n\t\t\t}\n\t\t\tif(!force && _windowVisibleSize.x === window.innerWidth && _windowVisibleSize.y === window.innerHeight) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t_windowVisibleSize.x = window.innerWidth;\n\t\t\t_windowVisibleSize.y = window.innerHeight;\n\n\t\t\t//template.style.width = _windowVisibleSize.x + 'px';\n\t\t\ttemplate.style.height = _windowVisibleSize.y + 'px';\n\t\t}\n\n\n\n\t\t_viewportSize.x = self.scrollWrap.clientWidth;\n\t\t_viewportSize.y = self.scrollWrap.clientHeight;\n\n\t\t_updatePageScrollOffset();\n\n\t\t_slideSize.x = _viewportSize.x + Math.round(_viewportSize.x * _options.spacing);\n\t\t_slideSize.y = _viewportSize.y;\n\n\t\t_moveMainScroll(_slideSize.x * _currPositionIndex);\n\n\t\t_shout('beforeResize'); // even may be used for example to switch image sources\n\n\n\t\t// don't re-calculate size on inital size update\n\t\tif(_containerShiftIndex !== undefined) {\n\n\t\t\tvar holder,\n\t\t\t\titem,\n\t\t\t\thIndex;\n\n\t\t\tfor(var i = 0; i < NUM_HOLDERS; i++) {\n\t\t\t\tholder = _itemHolders[i];\n\t\t\t\t_setTranslateX( (i+_containerShiftIndex) * _slideSize.x, holder.el.style);\n\n\t\t\t\thIndex = _currentItemIndex+i-1;\n\n\t\t\t\tif(_options.loop && _getNumItems() > 2) {\n\t\t\t\t\thIndex = _getLoopedId(hIndex);\n\t\t\t\t}\n\n\t\t\t\t// update zoom level on items and refresh source (if needsUpdate)\n\t\t\t\titem = _getItemAt( hIndex );\n\n\t\t\t\t// re-render gallery item if `needsUpdate`,\n\t\t\t\t// or doesn't have `bounds` (entirely new slide object)\n\t\t\t\tif( item && (_itemsNeedUpdate || item.needsUpdate || !item.bounds) ) {\n\n\t\t\t\t\tself.cleanSlide( item );\n\t\t\t\t\t\n\t\t\t\t\tself.setContent( holder, hIndex );\n\n\t\t\t\t\t// if \"center\" slide\n\t\t\t\t\tif(i === 1) {\n\t\t\t\t\t\tself.currItem = item;\n\t\t\t\t\t\tself.updateCurrZoomItem(true);\n\t\t\t\t\t}\n\n\t\t\t\t\titem.needsUpdate = false;\n\n\t\t\t\t} else if(holder.index === -1 && hIndex >= 0) {\n\t\t\t\t\t// add content first time\n\t\t\t\t\tself.setContent( holder, hIndex );\n\t\t\t\t}\n\t\t\t\tif(item && item.container) {\n\t\t\t\t\t_calculateItemSize(item, _viewportSize);\n\t\t\t\t\t_setImageSize(item);\n\t\t\t\t\t_applyZoomPanToItem( item );\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t\t_itemsNeedUpdate = false;\n\t\t}\t\n\n\t\t_startZoomLevel = _currZoomLevel = self.currItem.initialZoomLevel;\n\t\t_currPanBounds = self.currItem.bounds;\n\n\t\tif(_currPanBounds) {\n\t\t\t_panOffset.x = _currPanBounds.center.x;\n\t\t\t_panOffset.y = _currPanBounds.center.y;\n\t\t\t_applyCurrentZoomPan( true );\n\t\t}\n\t\t\n\t\t_shout('resize');\n\t},\n\t\n\t// Zoom current item to\n\tzoomTo: function(destZoomLevel, centerPoint, speed, easingFn, updateFn) {\n\t\t/*\n\t\t\tif(destZoomLevel === 'fit') {\n\t\t\t\tdestZoomLevel = self.currItem.fitRatio;\n\t\t\t} else if(destZoomLevel === 'fill') {\n\t\t\t\tdestZoomLevel = self.currItem.fillRatio;\n\t\t\t}\n\t\t*/\n\n\t\tif(centerPoint) {\n\t\t\t_startZoomLevel = _currZoomLevel;\n\t\t\t_midZoomPoint.x = Math.abs(centerPoint.x) - _panOffset.x ;\n\t\t\t_midZoomPoint.y = Math.abs(centerPoint.y) - _panOffset.y ;\n\t\t\t_equalizePoints(_startPanOffset, _panOffset);\n\t\t}\n\n\t\tvar destPanBounds = _calculatePanBounds(destZoomLevel, false),\n\t\t\tdestPanOffset = {};\n\n\t\t_modifyDestPanOffset('x', destPanBounds, destPanOffset, destZoomLevel);\n\t\t_modifyDestPanOffset('y', destPanBounds, destPanOffset, destZoomLevel);\n\n\t\tvar initialZoomLevel = _currZoomLevel;\n\t\tvar initialPanOffset = {\n\t\t\tx: _panOffset.x,\n\t\t\ty: _panOffset.y\n\t\t};\n\n\t\t_roundPoint(destPanOffset);\n\n\t\tvar onUpdate = function(now) {\n\t\t\tif(now === 1) {\n\t\t\t\t_currZoomLevel = destZoomLevel;\n\t\t\t\t_panOffset.x = destPanOffset.x;\n\t\t\t\t_panOffset.y = destPanOffset.y;\n\t\t\t} else {\n\t\t\t\t_currZoomLevel = (destZoomLevel - initialZoomLevel) * now + initialZoomLevel;\n\t\t\t\t_panOffset.x = (destPanOffset.x - initialPanOffset.x) * now + initialPanOffset.x;\n\t\t\t\t_panOffset.y = (destPanOffset.y - initialPanOffset.y) * now + initialPanOffset.y;\n\t\t\t}\n\n\t\t\tif(updateFn) {\n\t\t\t\tupdateFn(now);\n\t\t\t}\n\n\t\t\t_applyCurrentZoomPan( now === 1 );\n\t\t};\n\n\t\tif(speed) {\n\t\t\t_animateProp('customZoomTo', 0, 1, speed, easingFn || framework.easing.sine.inOut, onUpdate);\n\t\t} else {\n\t\t\tonUpdate(1);\n\t\t}\n\t}\n\n\n};\n\n\n/*>>core*/\n\n/*>>gestures*/\n/**\n * Mouse/touch/pointer event handlers.\n * \n * separated from @core.js for readability\n */\n\nvar MIN_SWIPE_DISTANCE = 30,\n\tDIRECTION_CHECK_OFFSET = 10; // amount of pixels to drag to determine direction of swipe\n\nvar _gestureStartTime,\n\t_gestureCheckSpeedTime,\n\n\t// pool of objects that are used during dragging of zooming\n\tp = {}, // first point\n\tp2 = {}, // second point (for zoom gesture)\n\tdelta = {},\n\t_currPoint = {},\n\t_startPoint = {},\n\t_currPointers = [],\n\t_startMainScrollPos = {},\n\t_releaseAnimData,\n\t_posPoints = [], // array of points during dragging, used to determine type of gesture\n\t_tempPoint = {},\n\n\t_isZoomingIn,\n\t_verticalDragInitiated,\n\t_oldAndroidTouchEndTimeout,\n\t_currZoomedItemIndex = 0,\n\t_centerPoint = _getEmptyPoint(),\n\t_lastReleaseTime = 0,\n\t_isDragging, // at least one pointer is down\n\t_isMultitouch, // at least two _pointers are down\n\t_zoomStarted, // zoom level changed during zoom gesture\n\t_moved,\n\t_dragAnimFrame,\n\t_mainScrollShifted,\n\t_currentPoints, // array of current touch points\n\t_isZooming,\n\t_currPointsDistance,\n\t_startPointsDistance,\n\t_currPanBounds,\n\t_mainScrollPos = _getEmptyPoint(),\n\t_currZoomElementStyle,\n\t_mainScrollAnimating, // true, if animation after swipe gesture is running\n\t_midZoomPoint = _getEmptyPoint(),\n\t_currCenterPoint = _getEmptyPoint(),\n\t_direction,\n\t_isFirstMove,\n\t_opacityChanged,\n\t_bgOpacity,\n\t_wasOverInitialZoom,\n\n\t_isEqualPoints = function(p1, p2) {\n\t\treturn p1.x === p2.x && p1.y === p2.y;\n\t},\n\t_isNearbyPoints = function(touch0, touch1) {\n\t\treturn Math.abs(touch0.x - touch1.x) < DOUBLE_TAP_RADIUS && Math.abs(touch0.y - touch1.y) < DOUBLE_TAP_RADIUS;\n\t},\n\t_calculatePointsDistance = function(p1, p2) {\n\t\t_tempPoint.x = Math.abs( p1.x - p2.x );\n\t\t_tempPoint.y = Math.abs( p1.y - p2.y );\n\t\treturn Math.sqrt(_tempPoint.x * _tempPoint.x + _tempPoint.y * _tempPoint.y);\n\t},\n\t_stopDragUpdateLoop = function() {\n\t\tif(_dragAnimFrame) {\n\t\t\t_cancelAF(_dragAnimFrame);\n\t\t\t_dragAnimFrame = null;\n\t\t}\n\t},\n\t_dragUpdateLoop = function() {\n\t\tif(_isDragging) {\n\t\t\t_dragAnimFrame = _requestAF(_dragUpdateLoop);\n\t\t\t_renderMovement();\n\t\t}\n\t},\n\t_canPan = function() {\n\t\treturn !(_options.scaleMode === 'fit' && _currZoomLevel ===  self.currItem.initialZoomLevel);\n\t},\n\t\n\t// find the closest parent DOM element\n\t_closestElement = function(el, fn) {\n\t  \tif(!el || el === document) {\n\t  \t\treturn false;\n\t  \t}\n\n\t  \t// don't search elements above pswp__scroll-wrap\n\t  \tif(el.getAttribute('class') && el.getAttribute('class').indexOf('pswp__scroll-wrap') > -1 ) {\n\t  \t\treturn false;\n\t  \t}\n\n\t  \tif( fn(el) ) {\n\t  \t\treturn el;\n\t  \t}\n\n\t  \treturn _closestElement(el.parentNode, fn);\n\t},\n\n\t_preventObj = {},\n\t_preventDefaultEventBehaviour = function(e, isDown) {\n\t    _preventObj.prevent = !_closestElement(e.target, _options.isClickableElement);\n\n\t\t_shout('preventDragEvent', e, isDown, _preventObj);\n\t\treturn _preventObj.prevent;\n\n\t},\n\t_convertTouchToPoint = function(touch, p) {\n\t\tp.x = touch.pageX;\n\t\tp.y = touch.pageY;\n\t\tp.id = touch.identifier;\n\t\treturn p;\n\t},\n\t_findCenterOfPoints = function(p1, p2, pCenter) {\n\t\tpCenter.x = (p1.x + p2.x) * 0.5;\n\t\tpCenter.y = (p1.y + p2.y) * 0.5;\n\t},\n\t_pushPosPoint = function(time, x, y) {\n\t\tif(time - _gestureCheckSpeedTime > 50) {\n\t\t\tvar o = _posPoints.length > 2 ? _posPoints.shift() : {};\n\t\t\to.x = x;\n\t\t\to.y = y; \n\t\t\t_posPoints.push(o);\n\t\t\t_gestureCheckSpeedTime = time;\n\t\t}\n\t},\n\n\t_calculateVerticalDragOpacityRatio = function() {\n\t\tvar yOffset = _panOffset.y - self.currItem.initialPosition.y; // difference between initial and current position\n\t\treturn 1 -  Math.abs( yOffset / (_viewportSize.y / 2)  );\n\t},\n\n\t\n\t// points pool, reused during touch events\n\t_ePoint1 = {},\n\t_ePoint2 = {},\n\t_tempPointsArr = [],\n\t_tempCounter,\n\t_getTouchPoints = function(e) {\n\t\t// clean up previous points, without recreating array\n\t\twhile(_tempPointsArr.length > 0) {\n\t\t\t_tempPointsArr.pop();\n\t\t}\n\n\t\tif(!_pointerEventEnabled) {\n\t\t\tif(e.type.indexOf('touch') > -1) {\n\n\t\t\t\tif(e.touches && e.touches.length > 0) {\n\t\t\t\t\t_tempPointsArr[0] = _convertTouchToPoint(e.touches[0], _ePoint1);\n\t\t\t\t\tif(e.touches.length > 1) {\n\t\t\t\t\t\t_tempPointsArr[1] = _convertTouchToPoint(e.touches[1], _ePoint2);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t} else {\n\t\t\t\t_ePoint1.x = e.pageX;\n\t\t\t\t_ePoint1.y = e.pageY;\n\t\t\t\t_ePoint1.id = '';\n\t\t\t\t_tempPointsArr[0] = _ePoint1;//_ePoint1;\n\t\t\t}\n\t\t} else {\n\t\t\t_tempCounter = 0;\n\t\t\t// we can use forEach, as pointer events are supported only in modern browsers\n\t\t\t_currPointers.forEach(function(p) {\n\t\t\t\tif(_tempCounter === 0) {\n\t\t\t\t\t_tempPointsArr[0] = p;\n\t\t\t\t} else if(_tempCounter === 1) {\n\t\t\t\t\t_tempPointsArr[1] = p;\n\t\t\t\t}\n\t\t\t\t_tempCounter++;\n\n\t\t\t});\n\t\t}\n\t\treturn _tempPointsArr;\n\t},\n\n\t_panOrMoveMainScroll = function(axis, delta) {\n\n\t\tvar panFriction,\n\t\t\toverDiff = 0,\n\t\t\tnewOffset = _panOffset[axis] + delta[axis],\n\t\t\tstartOverDiff,\n\t\t\tdir = delta[axis] > 0,\n\t\t\tnewMainScrollPosition = _mainScrollPos.x + delta.x,\n\t\t\tmainScrollDiff = _mainScrollPos.x - _startMainScrollPos.x,\n\t\t\tnewPanPos,\n\t\t\tnewMainScrollPos;\n\n\t\t// calculate fdistance over the bounds and friction\n\t\tif(newOffset > _currPanBounds.min[axis] || newOffset < _currPanBounds.max[axis]) {\n\t\t\tpanFriction = _options.panEndFriction;\n\t\t\t// Linear increasing of friction, so at 1/4 of viewport it's at max value. \n\t\t\t// Looks not as nice as was expected. Left for history.\n\t\t\t// panFriction = (1 - (_panOffset[axis] + delta[axis] + panBounds.min[axis]) / (_viewportSize[axis] / 4) );\n\t\t} else {\n\t\t\tpanFriction = 1;\n\t\t}\n\t\t\n\t\tnewOffset = _panOffset[axis] + delta[axis] * panFriction;\n\n\t\t// move main scroll or start panning\n\t\tif(_options.allowPanToNext || _currZoomLevel === self.currItem.initialZoomLevel) {\n\n\n\t\t\tif(!_currZoomElementStyle) {\n\t\t\t\t\n\t\t\t\tnewMainScrollPos = newMainScrollPosition;\n\n\t\t\t} else if(_direction === 'h' && axis === 'x' && !_zoomStarted ) {\n\t\t\t\t\n\t\t\t\tif(dir) {\n\t\t\t\t\tif(newOffset > _currPanBounds.min[axis]) {\n\t\t\t\t\t\tpanFriction = _options.panEndFriction;\n\t\t\t\t\t\toverDiff = _currPanBounds.min[axis] - newOffset;\n\t\t\t\t\t\tstartOverDiff = _currPanBounds.min[axis] - _startPanOffset[axis];\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// drag right\n\t\t\t\t\tif( (startOverDiff <= 0 || mainScrollDiff < 0) && _getNumItems() > 1 ) {\n\t\t\t\t\t\tnewMainScrollPos = newMainScrollPosition;\n\t\t\t\t\t\tif(mainScrollDiff < 0 && newMainScrollPosition > _startMainScrollPos.x) {\n\t\t\t\t\t\t\tnewMainScrollPos = _startMainScrollPos.x;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif(_currPanBounds.min.x !== _currPanBounds.max.x) {\n\t\t\t\t\t\t\tnewPanPos = newOffset;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif(newOffset < _currPanBounds.max[axis] ) {\n\t\t\t\t\t\tpanFriction =_options.panEndFriction;\n\t\t\t\t\t\toverDiff = newOffset - _currPanBounds.max[axis];\n\t\t\t\t\t\tstartOverDiff = _startPanOffset[axis] - _currPanBounds.max[axis];\n\t\t\t\t\t}\n\n\t\t\t\t\tif( (startOverDiff <= 0 || mainScrollDiff > 0) && _getNumItems() > 1 ) {\n\t\t\t\t\t\tnewMainScrollPos = newMainScrollPosition;\n\n\t\t\t\t\t\tif(mainScrollDiff > 0 && newMainScrollPosition < _startMainScrollPos.x) {\n\t\t\t\t\t\t\tnewMainScrollPos = _startMainScrollPos.x;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif(_currPanBounds.min.x !== _currPanBounds.max.x) {\n\t\t\t\t\t\t\tnewPanPos = newOffset;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t\t//\n\t\t\t}\n\n\t\t\tif(axis === 'x') {\n\n\t\t\t\tif(newMainScrollPos !== undefined) {\n\t\t\t\t\t_moveMainScroll(newMainScrollPos, true);\n\t\t\t\t\tif(newMainScrollPos === _startMainScrollPos.x) {\n\t\t\t\t\t\t_mainScrollShifted = false;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_mainScrollShifted = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif(_currPanBounds.min.x !== _currPanBounds.max.x) {\n\t\t\t\t\tif(newPanPos !== undefined) {\n\t\t\t\t\t\t_panOffset.x = newPanPos;\n\t\t\t\t\t} else if(!_mainScrollShifted) {\n\t\t\t\t\t\t_panOffset.x += delta.x * panFriction;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn newMainScrollPos !== undefined;\n\t\t\t}\n\n\t\t}\n\n\t\tif(!_mainScrollAnimating) {\n\t\t\t\n\t\t\tif(!_mainScrollShifted) {\n\t\t\t\tif(_currZoomLevel > self.currItem.fitRatio) {\n\t\t\t\t\t_panOffset[axis] += delta[axis] * panFriction;\n\t\t\t\t\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t\n\t\t}\n\t\t\n\t},\n\n\t// Pointerdown/touchstart/mousedown handler\n\t_onDragStart = function(e) {\n\n\t\t// Allow dragging only via left mouse button.\n\t\t// As this handler is not added in IE8 - we ignore e.which\n\t\t// \n\t\t// http://www.quirksmode.org/js/events_properties.html\n\t\t// https://developer.mozilla.org/en-US/docs/Web/API/event.button\n\t\tif(e.type === 'mousedown' && e.button > 0  ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif(_initialZoomRunning) {\n\t\t\te.preventDefault();\n\t\t\treturn;\n\t\t}\n\n\t\tif(_oldAndroidTouchEndTimeout && e.type === 'mousedown') {\n\t\t\treturn;\n\t\t}\n\n\t\tif(_preventDefaultEventBehaviour(e, true)) {\n\t\t\te.preventDefault();\n\t\t}\n\n\n\n\t\t_shout('pointerDown');\n\n\t\tif(_pointerEventEnabled) {\n\t\t\tvar pointerIndex = framework.arraySearch(_currPointers, e.pointerId, 'id');\n\t\t\tif(pointerIndex < 0) {\n\t\t\t\tpointerIndex = _currPointers.length;\n\t\t\t}\n\t\t\t_currPointers[pointerIndex] = {x:e.pageX, y:e.pageY, id: e.pointerId};\n\t\t}\n\t\t\n\n\n\t\tvar startPointsList = _getTouchPoints(e),\n\t\t\tnumPoints = startPointsList.length;\n\n\t\t_currentPoints = null;\n\n\t\t_stopAllAnimations();\n\n\t\t// init drag\n\t\tif(!_isDragging || numPoints === 1) {\n\n\t\t\t\n\n\t\t\t_isDragging = _isFirstMove = true;\n\t\t\tframework.bind(window, _upMoveEvents, self);\n\n\t\t\t_isZoomingIn = \n\t\t\t\t_wasOverInitialZoom = \n\t\t\t\t_opacityChanged = \n\t\t\t\t_verticalDragInitiated = \n\t\t\t\t_mainScrollShifted = \n\t\t\t\t_moved = \n\t\t\t\t_isMultitouch = \n\t\t\t\t_zoomStarted = false;\n\n\t\t\t_direction = null;\n\n\t\t\t_shout('firstTouchStart', startPointsList);\n\n\t\t\t_equalizePoints(_startPanOffset, _panOffset);\n\n\t\t\t_currPanDist.x = _currPanDist.y = 0;\n\t\t\t_equalizePoints(_currPoint, startPointsList[0]);\n\t\t\t_equalizePoints(_startPoint, _currPoint);\n\n\t\t\t//_equalizePoints(_startMainScrollPos, _mainScrollPos);\n\t\t\t_startMainScrollPos.x = _slideSize.x * _currPositionIndex;\n\n\t\t\t_posPoints = [{\n\t\t\t\tx: _currPoint.x,\n\t\t\t\ty: _currPoint.y\n\t\t\t}];\n\n\t\t\t_gestureCheckSpeedTime = _gestureStartTime = _getCurrentTime();\n\n\t\t\t//_mainScrollAnimationEnd(true);\n\t\t\t_calculatePanBounds( _currZoomLevel, true );\n\t\t\t\n\t\t\t// Start rendering\n\t\t\t_stopDragUpdateLoop();\n\t\t\t_dragUpdateLoop();\n\t\t\t\n\t\t}\n\n\t\t// init zoom\n\t\tif(!_isZooming && numPoints > 1 && !_mainScrollAnimating && !_mainScrollShifted) {\n\t\t\t_startZoomLevel = _currZoomLevel;\n\t\t\t_zoomStarted = false; // true if zoom changed at least once\n\n\t\t\t_isZooming = _isMultitouch = true;\n\t\t\t_currPanDist.y = _currPanDist.x = 0;\n\n\t\t\t_equalizePoints(_startPanOffset, _panOffset);\n\n\t\t\t_equalizePoints(p, startPointsList[0]);\n\t\t\t_equalizePoints(p2, startPointsList[1]);\n\n\t\t\t_findCenterOfPoints(p, p2, _currCenterPoint);\n\n\t\t\t_midZoomPoint.x = Math.abs(_currCenterPoint.x) - _panOffset.x;\n\t\t\t_midZoomPoint.y = Math.abs(_currCenterPoint.y) - _panOffset.y;\n\t\t\t_currPointsDistance = _startPointsDistance = _calculatePointsDistance(p, p2);\n\t\t}\n\n\n\t},\n\n\t// Pointermove/touchmove/mousemove handler\n\t_onDragMove = function(e) {\n\n\t\te.preventDefault();\n\n\t\tif(_pointerEventEnabled) {\n\t\t\tvar pointerIndex = framework.arraySearch(_currPointers, e.pointerId, 'id');\n\t\t\tif(pointerIndex > -1) {\n\t\t\t\tvar p = _currPointers[pointerIndex];\n\t\t\t\tp.x = e.pageX;\n\t\t\t\tp.y = e.pageY; \n\t\t\t}\n\t\t}\n\n\t\tif(_isDragging) {\n\t\t\tvar touchesList = _getTouchPoints(e);\n\t\t\tif(!_direction && !_moved && !_isZooming) {\n\n\t\t\t\tif(_mainScrollPos.x !== _slideSize.x * _currPositionIndex) {\n\t\t\t\t\t// if main scroll position is shifted  direction is always horizontal\n\t\t\t\t\t_direction = 'h';\n\t\t\t\t} else {\n\t\t\t\t\tvar diff = Math.abs(touchesList[0].x - _currPoint.x) - Math.abs(touchesList[0].y - _currPoint.y);\n\t\t\t\t\t// check the direction of movement\n\t\t\t\t\tif(Math.abs(diff) >= DIRECTION_CHECK_OFFSET) {\n\t\t\t\t\t\t_direction = diff > 0 ? 'h' : 'v';\n\t\t\t\t\t\t_currentPoints = touchesList;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t} else {\n\t\t\t\t_currentPoints = touchesList;\n\t\t\t}\n\t\t}\t\n\t},\n\t// \n\t_renderMovement =  function() {\n\n\t\tif(!_currentPoints) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar numPoints = _currentPoints.length;\n\n\t\tif(numPoints === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\t_equalizePoints(p, _currentPoints[0]);\n\n\t\tdelta.x = p.x - _currPoint.x;\n\t\tdelta.y = p.y - _currPoint.y;\n\n\t\tif(_isZooming && numPoints > 1) {\n\t\t\t// Handle behaviour for more than 1 point\n\n\t\t\t_currPoint.x = p.x;\n\t\t\t_currPoint.y = p.y;\n\t\t\n\t\t\t// check if one of two points changed\n\t\t\tif( !delta.x && !delta.y && _isEqualPoints(_currentPoints[1], p2) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t_equalizePoints(p2, _currentPoints[1]);\n\n\n\t\t\tif(!_zoomStarted) {\n\t\t\t\t_zoomStarted = true;\n\t\t\t\t_shout('zoomGestureStarted');\n\t\t\t}\n\t\t\t\n\t\t\t// Distance between two points\n\t\t\tvar pointsDistance = _calculatePointsDistance(p,p2);\n\n\t\t\tvar zoomLevel = _calculateZoomLevel(pointsDistance);\n\n\t\t\t// slightly over the of initial zoom level\n\t\t\tif(zoomLevel > self.currItem.initialZoomLevel + self.currItem.initialZoomLevel / 15) {\n\t\t\t\t_wasOverInitialZoom = true;\n\t\t\t}\n\n\t\t\t// Apply the friction if zoom level is out of the bounds\n\t\t\tvar zoomFriction = 1,\n\t\t\t\tminZoomLevel = _getMinZoomLevel(),\n\t\t\t\tmaxZoomLevel = _getMaxZoomLevel();\n\n\t\t\tif ( zoomLevel < minZoomLevel ) {\n\t\t\t\t\n\t\t\t\tif(_options.pinchToClose && !_wasOverInitialZoom && _startZoomLevel <= self.currItem.initialZoomLevel) {\n\t\t\t\t\t// fade out background if zooming out\n\t\t\t\t\tvar minusDiff = minZoomLevel - zoomLevel;\n\t\t\t\t\tvar percent = 1 - minusDiff / (minZoomLevel / 1.2);\n\n\t\t\t\t\t_applyBgOpacity(percent);\n\t\t\t\t\t_shout('onPinchClose', percent);\n\t\t\t\t\t_opacityChanged = true;\n\t\t\t\t} else {\n\t\t\t\t\tzoomFriction = (minZoomLevel - zoomLevel) / minZoomLevel;\n\t\t\t\t\tif(zoomFriction > 1) {\n\t\t\t\t\t\tzoomFriction = 1;\n\t\t\t\t\t}\n\t\t\t\t\tzoomLevel = minZoomLevel - zoomFriction * (minZoomLevel / 3);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t} else if ( zoomLevel > maxZoomLevel ) {\n\t\t\t\t// 1.5 - extra zoom level above the max. E.g. if max is x6, real max 6 + 1.5 = 7.5\n\t\t\t\tzoomFriction = (zoomLevel - maxZoomLevel) / ( minZoomLevel * 6 );\n\t\t\t\tif(zoomFriction > 1) {\n\t\t\t\t\tzoomFriction = 1;\n\t\t\t\t}\n\t\t\t\tzoomLevel = maxZoomLevel + zoomFriction * minZoomLevel;\n\t\t\t}\n\n\t\t\tif(zoomFriction < 0) {\n\t\t\t\tzoomFriction = 0;\n\t\t\t}\n\n\t\t\t// distance between touch points after friction is applied\n\t\t\t_currPointsDistance = pointsDistance;\n\n\t\t\t// _centerPoint - The point in the middle of two pointers\n\t\t\t_findCenterOfPoints(p, p2, _centerPoint);\n\t\t\n\t\t\t// paning with two pointers pressed\n\t\t\t_currPanDist.x += _centerPoint.x - _currCenterPoint.x;\n\t\t\t_currPanDist.y += _centerPoint.y - _currCenterPoint.y;\n\t\t\t_equalizePoints(_currCenterPoint, _centerPoint);\n\n\t\t\t_panOffset.x = _calculatePanOffset('x', zoomLevel);\n\t\t\t_panOffset.y = _calculatePanOffset('y', zoomLevel);\n\n\t\t\t_isZoomingIn = zoomLevel > _currZoomLevel;\n\t\t\t_currZoomLevel = zoomLevel;\n\t\t\t_applyCurrentZoomPan();\n\n\t\t} else {\n\n\t\t\t// handle behaviour for one point (dragging or panning)\n\n\t\t\tif(!_direction) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif(_isFirstMove) {\n\t\t\t\t_isFirstMove = false;\n\n\t\t\t\t// subtract drag distance that was used during the detection direction  \n\n\t\t\t\tif( Math.abs(delta.x) >= DIRECTION_CHECK_OFFSET) {\n\t\t\t\t\tdelta.x -= _currentPoints[0].x - _startPoint.x;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif( Math.abs(delta.y) >= DIRECTION_CHECK_OFFSET) {\n\t\t\t\t\tdelta.y -= _currentPoints[0].y - _startPoint.y;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t_currPoint.x = p.x;\n\t\t\t_currPoint.y = p.y;\n\n\t\t\t// do nothing if pointers position hasn't changed\n\t\t\tif(delta.x === 0 && delta.y === 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif(_direction === 'v' && _options.closeOnVerticalDrag) {\n\t\t\t\tif(!_canPan()) {\n\t\t\t\t\t_currPanDist.y += delta.y;\n\t\t\t\t\t_panOffset.y += delta.y;\n\n\t\t\t\t\tvar opacityRatio = _calculateVerticalDragOpacityRatio();\n\n\t\t\t\t\t_verticalDragInitiated = true;\n\t\t\t\t\t_shout('onVerticalDrag', opacityRatio);\n\n\t\t\t\t\t_applyBgOpacity(opacityRatio);\n\t\t\t\t\t_applyCurrentZoomPan();\n\t\t\t\t\treturn ;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t_pushPosPoint(_getCurrentTime(), p.x, p.y);\n\n\t\t\t_moved = true;\n\t\t\t_currPanBounds = self.currItem.bounds;\n\t\t\t\n\t\t\tvar mainScrollChanged = _panOrMoveMainScroll('x', delta);\n\t\t\tif(!mainScrollChanged) {\n\t\t\t\t_panOrMoveMainScroll('y', delta);\n\n\t\t\t\t_roundPoint(_panOffset);\n\t\t\t\t_applyCurrentZoomPan();\n\t\t\t}\n\n\t\t}\n\n\t},\n\t\n\t// Pointerup/pointercancel/touchend/touchcancel/mouseup event handler\n\t_onDragRelease = function(e) {\n\n\t\tif(_features.isOldAndroid ) {\n\n\t\t\tif(_oldAndroidTouchEndTimeout && e.type === 'mouseup') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// on Android (v4.1, 4.2, 4.3 & possibly older) \n\t\t\t// ghost mousedown/up event isn't preventable via e.preventDefault,\n\t\t\t// which causes fake mousedown event\n\t\t\t// so we block mousedown/up for 600ms\n\t\t\tif( e.type.indexOf('touch') > -1 ) {\n\t\t\t\tclearTimeout(_oldAndroidTouchEndTimeout);\n\t\t\t\t_oldAndroidTouchEndTimeout = setTimeout(function() {\n\t\t\t\t\t_oldAndroidTouchEndTimeout = 0;\n\t\t\t\t}, 600);\n\t\t\t}\n\t\t\t\n\t\t}\n\n\t\t_shout('pointerUp');\n\n\t\tif(_preventDefaultEventBehaviour(e, false)) {\n\t\t\te.preventDefault();\n\t\t}\n\n\t\tvar releasePoint;\n\n\t\tif(_pointerEventEnabled) {\n\t\t\tvar pointerIndex = framework.arraySearch(_currPointers, e.pointerId, 'id');\n\t\t\t\n\t\t\tif(pointerIndex > -1) {\n\t\t\t\treleasePoint = _currPointers.splice(pointerIndex, 1)[0];\n\n\t\t\t\tif(navigator.msPointerEnabled) {\n\t\t\t\t\tvar MSPOINTER_TYPES = {\n\t\t\t\t\t\t4: 'mouse', // event.MSPOINTER_TYPE_MOUSE\n\t\t\t\t\t\t2: 'touch', // event.MSPOINTER_TYPE_TOUCH \n\t\t\t\t\t\t3: 'pen' // event.MSPOINTER_TYPE_PEN\n\t\t\t\t\t};\n\t\t\t\t\treleasePoint.type = MSPOINTER_TYPES[e.pointerType];\n\n\t\t\t\t\tif(!releasePoint.type) {\n\t\t\t\t\t\treleasePoint.type = e.pointerType || 'mouse';\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\treleasePoint.type = e.pointerType || 'mouse';\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\n\t\tvar touchList = _getTouchPoints(e),\n\t\t\tgestureType,\n\t\t\tnumPoints = touchList.length;\n\n\t\tif(e.type === 'mouseup') {\n\t\t\tnumPoints = 0;\n\t\t}\n\n\t\t// Do nothing if there were 3 touch points or more\n\t\tif(numPoints === 2) {\n\t\t\t_currentPoints = null;\n\t\t\treturn true;\n\t\t}\n\n\t\t// if second pointer released\n\t\tif(numPoints === 1) {\n\t\t\t_equalizePoints(_startPoint, touchList[0]);\n\t\t}\t\t\t\t\n\n\n\t\t// pointer hasn't moved, send \"tap release\" point\n\t\tif(numPoints === 0 && !_direction && !_mainScrollAnimating) {\n\t\t\tif(!releasePoint) {\n\t\t\t\tif(e.type === 'mouseup') {\n\t\t\t\t\treleasePoint = {x: e.pageX, y: e.pageY, type:'mouse'};\n\t\t\t\t} else if(e.changedTouches && e.changedTouches[0]) {\n\t\t\t\t\treleasePoint = {x: e.changedTouches[0].pageX, y: e.changedTouches[0].pageY, type:'touch'};\n\t\t\t\t}\t\t\n\t\t\t}\n\n\t\t\t_shout('touchRelease', e, releasePoint);\n\t\t}\n\n\t\t// Difference in time between releasing of two last touch points (zoom gesture)\n\t\tvar releaseTimeDiff = -1;\n\n\t\t// Gesture completed, no pointers left\n\t\tif(numPoints === 0) {\n\t\t\t_isDragging = false;\n\t\t\tframework.unbind(window, _upMoveEvents, self);\n\n\t\t\t_stopDragUpdateLoop();\n\n\t\t\tif(_isZooming) {\n\t\t\t\t// Two points released at the same time\n\t\t\t\treleaseTimeDiff = 0;\n\t\t\t} else if(_lastReleaseTime !== -1) {\n\t\t\t\treleaseTimeDiff = _getCurrentTime() - _lastReleaseTime;\n\t\t\t}\n\t\t}\n\t\t_lastReleaseTime = numPoints === 1 ? _getCurrentTime() : -1;\n\t\t\n\t\tif(releaseTimeDiff !== -1 && releaseTimeDiff < 150) {\n\t\t\tgestureType = 'zoom';\n\t\t} else {\n\t\t\tgestureType = 'swipe';\n\t\t}\n\n\t\tif(_isZooming && numPoints < 2) {\n\t\t\t_isZooming = false;\n\n\t\t\t// Only second point released\n\t\t\tif(numPoints === 1) {\n\t\t\t\tgestureType = 'zoomPointerUp';\n\t\t\t}\n\t\t\t_shout('zoomGestureEnded');\n\t\t}\n\n\t\t_currentPoints = null;\n\t\tif(!_moved && !_zoomStarted && !_mainScrollAnimating && !_verticalDragInitiated) {\n\t\t\t// nothing to animate\n\t\t\treturn;\n\t\t}\n\t\n\t\t_stopAllAnimations();\n\n\t\t\n\t\tif(!_releaseAnimData) {\n\t\t\t_releaseAnimData = _initDragReleaseAnimationData();\n\t\t}\n\t\t\n\t\t_releaseAnimData.calculateSwipeSpeed('x');\n\n\n\t\tif(_verticalDragInitiated) {\n\n\t\t\tvar opacityRatio = _calculateVerticalDragOpacityRatio();\n\n\t\t\tif(opacityRatio < _options.verticalDragRange) {\n\t\t\t\tself.close();\n\t\t\t} else {\n\t\t\t\tvar initalPanY = _panOffset.y,\n\t\t\t\t\tinitialBgOpacity = _bgOpacity;\n\n\t\t\t\t_animateProp('verticalDrag', 0, 1, 300, framework.easing.cubic.out, function(now) {\n\t\t\t\t\t\n\t\t\t\t\t_panOffset.y = (self.currItem.initialPosition.y - initalPanY) * now + initalPanY;\n\n\t\t\t\t\t_applyBgOpacity(  (1 - initialBgOpacity) * now + initialBgOpacity );\n\t\t\t\t\t_applyCurrentZoomPan();\n\t\t\t\t});\n\n\t\t\t\t_shout('onVerticalDrag', 1);\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\n\t\t// main scroll \n\t\tif(  (_mainScrollShifted || _mainScrollAnimating) && numPoints === 0) {\n\t\t\tvar itemChanged = _finishSwipeMainScrollGesture(gestureType, _releaseAnimData);\n\t\t\tif(itemChanged) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tgestureType = 'zoomPointerUp';\n\t\t}\n\n\t\t// prevent zoom/pan animation when main scroll animation runs\n\t\tif(_mainScrollAnimating) {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\t// Complete simple zoom gesture (reset zoom level if it's out of the bounds)  \n\t\tif(gestureType !== 'swipe') {\n\t\t\t_completeZoomGesture();\n\t\t\treturn;\n\t\t}\n\t\n\t\t// Complete pan gesture if main scroll is not shifted, and it's possible to pan current image\n\t\tif(!_mainScrollShifted && _currZoomLevel > self.currItem.fitRatio) {\n\t\t\t_completePanGesture(_releaseAnimData);\n\t\t}\n\t},\n\n\n\t// Returns object with data about gesture\n\t// It's created only once and then reused\n\t_initDragReleaseAnimationData  = function() {\n\t\t// temp local vars\n\t\tvar lastFlickDuration,\n\t\t\ttempReleasePos;\n\n\t\t// s = this\n\t\tvar s = {\n\t\t\tlastFlickOffset: {},\n\t\t\tlastFlickDist: {},\n\t\t\tlastFlickSpeed: {},\n\t\t\tslowDownRatio:  {},\n\t\t\tslowDownRatioReverse:  {},\n\t\t\tspeedDecelerationRatio:  {},\n\t\t\tspeedDecelerationRatioAbs:  {},\n\t\t\tdistanceOffset:  {},\n\t\t\tbackAnimDestination: {},\n\t\t\tbackAnimStarted: {},\n\t\t\tcalculateSwipeSpeed: function(axis) {\n\t\t\t\t\n\n\t\t\t\tif( _posPoints.length > 1) {\n\t\t\t\t\tlastFlickDuration = _getCurrentTime() - _gestureCheckSpeedTime + 50;\n\t\t\t\t\ttempReleasePos = _posPoints[_posPoints.length-2][axis];\n\t\t\t\t} else {\n\t\t\t\t\tlastFlickDuration = _getCurrentTime() - _gestureStartTime; // total gesture duration\n\t\t\t\t\ttempReleasePos = _startPoint[axis];\n\t\t\t\t}\n\t\t\t\ts.lastFlickOffset[axis] = _currPoint[axis] - tempReleasePos;\n\t\t\t\ts.lastFlickDist[axis] = Math.abs(s.lastFlickOffset[axis]);\n\t\t\t\tif(s.lastFlickDist[axis] > 20) {\n\t\t\t\t\ts.lastFlickSpeed[axis] = s.lastFlickOffset[axis] / lastFlickDuration;\n\t\t\t\t} else {\n\t\t\t\t\ts.lastFlickSpeed[axis] = 0;\n\t\t\t\t}\n\t\t\t\tif( Math.abs(s.lastFlickSpeed[axis]) < 0.1 ) {\n\t\t\t\t\ts.lastFlickSpeed[axis] = 0;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\ts.slowDownRatio[axis] = 0.95;\n\t\t\t\ts.slowDownRatioReverse[axis] = 1 - s.slowDownRatio[axis];\n\t\t\t\ts.speedDecelerationRatio[axis] = 1;\n\t\t\t},\n\n\t\t\tcalculateOverBoundsAnimOffset: function(axis, speed) {\n\t\t\t\tif(!s.backAnimStarted[axis]) {\n\n\t\t\t\t\tif(_panOffset[axis] > _currPanBounds.min[axis]) {\n\t\t\t\t\t\ts.backAnimDestination[axis] = _currPanBounds.min[axis];\n\t\t\t\t\t\t\n\t\t\t\t\t} else if(_panOffset[axis] < _currPanBounds.max[axis]) {\n\t\t\t\t\t\ts.backAnimDestination[axis] = _currPanBounds.max[axis];\n\t\t\t\t\t}\n\n\t\t\t\t\tif(s.backAnimDestination[axis] !== undefined) {\n\t\t\t\t\t\ts.slowDownRatio[axis] = 0.7;\n\t\t\t\t\t\ts.slowDownRatioReverse[axis] = 1 - s.slowDownRatio[axis];\n\t\t\t\t\t\tif(s.speedDecelerationRatioAbs[axis] < 0.05) {\n\n\t\t\t\t\t\t\ts.lastFlickSpeed[axis] = 0;\n\t\t\t\t\t\t\ts.backAnimStarted[axis] = true;\n\n\t\t\t\t\t\t\t_animateProp('bounceZoomPan'+axis,_panOffset[axis], \n\t\t\t\t\t\t\t\ts.backAnimDestination[axis], \n\t\t\t\t\t\t\t\tspeed || 300, \n\t\t\t\t\t\t\t\tframework.easing.sine.out, \n\t\t\t\t\t\t\t\tfunction(pos) {\n\t\t\t\t\t\t\t\t\t_panOffset[axis] = pos;\n\t\t\t\t\t\t\t\t\t_applyCurrentZoomPan();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// Reduces the speed by slowDownRatio (per 10ms)\n\t\t\tcalculateAnimOffset: function(axis) {\n\t\t\t\tif(!s.backAnimStarted[axis]) {\n\t\t\t\t\ts.speedDecelerationRatio[axis] = s.speedDecelerationRatio[axis] * (s.slowDownRatio[axis] + \n\t\t\t\t\t\t\t\t\t\t\t\ts.slowDownRatioReverse[axis] - \n\t\t\t\t\t\t\t\t\t\t\t\ts.slowDownRatioReverse[axis] * s.timeDiff / 10);\n\n\t\t\t\t\ts.speedDecelerationRatioAbs[axis] = Math.abs(s.lastFlickSpeed[axis] * s.speedDecelerationRatio[axis]);\n\t\t\t\t\ts.distanceOffset[axis] = s.lastFlickSpeed[axis] * s.speedDecelerationRatio[axis] * s.timeDiff;\n\t\t\t\t\t_panOffset[axis] += s.distanceOffset[axis];\n\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tpanAnimLoop: function() {\n\t\t\t\tif ( _animations.zoomPan ) {\n\t\t\t\t\t_animations.zoomPan.raf = _requestAF(s.panAnimLoop);\n\n\t\t\t\t\ts.now = _getCurrentTime();\n\t\t\t\t\ts.timeDiff = s.now - s.lastNow;\n\t\t\t\t\ts.lastNow = s.now;\n\t\t\t\t\t\n\t\t\t\t\ts.calculateAnimOffset('x');\n\t\t\t\t\ts.calculateAnimOffset('y');\n\n\t\t\t\t\t_applyCurrentZoomPan();\n\t\t\t\t\t\n\t\t\t\t\ts.calculateOverBoundsAnimOffset('x');\n\t\t\t\t\ts.calculateOverBoundsAnimOffset('y');\n\n\n\t\t\t\t\tif (s.speedDecelerationRatioAbs.x < 0.05 && s.speedDecelerationRatioAbs.y < 0.05) {\n\n\t\t\t\t\t\t// round pan position\n\t\t\t\t\t\t_panOffset.x = Math.round(_panOffset.x);\n\t\t\t\t\t\t_panOffset.y = Math.round(_panOffset.y);\n\t\t\t\t\t\t_applyCurrentZoomPan();\n\t\t\t\t\t\t\n\t\t\t\t\t\t_stopAnimation('zoomPan');\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\t\t};\n\t\treturn s;\n\t},\n\n\t_completePanGesture = function(animData) {\n\t\t// calculate swipe speed for Y axis (paanning)\n\t\tanimData.calculateSwipeSpeed('y');\n\n\t\t_currPanBounds = self.currItem.bounds;\n\t\t\n\t\tanimData.backAnimDestination = {};\n\t\tanimData.backAnimStarted = {};\n\n\t\t// Avoid acceleration animation if speed is too low\n\t\tif(Math.abs(animData.lastFlickSpeed.x) <= 0.05 && Math.abs(animData.lastFlickSpeed.y) <= 0.05 ) {\n\t\t\tanimData.speedDecelerationRatioAbs.x = animData.speedDecelerationRatioAbs.y = 0;\n\n\t\t\t// Run pan drag release animation. E.g. if you drag image and release finger without momentum.\n\t\t\tanimData.calculateOverBoundsAnimOffset('x');\n\t\t\tanimData.calculateOverBoundsAnimOffset('y');\n\t\t\treturn true;\n\t\t}\n\n\t\t// Animation loop that controls the acceleration after pan gesture ends\n\t\t_registerStartAnimation('zoomPan');\n\t\tanimData.lastNow = _getCurrentTime();\n\t\tanimData.panAnimLoop();\n\t},\n\n\n\t_finishSwipeMainScrollGesture = function(gestureType, _releaseAnimData) {\n\t\tvar itemChanged;\n\t\tif(!_mainScrollAnimating) {\n\t\t\t_currZoomedItemIndex = _currentItemIndex;\n\t\t}\n\n\n\t\t\n\t\tvar itemsDiff;\n\n\t\tif(gestureType === 'swipe') {\n\t\t\tvar totalShiftDist = _currPoint.x - _startPoint.x,\n\t\t\t\tisFastLastFlick = _releaseAnimData.lastFlickDist.x < 10;\n\n\t\t\t// if container is shifted for more than MIN_SWIPE_DISTANCE, \n\t\t\t// and last flick gesture was in right direction\n\t\t\tif(totalShiftDist > MIN_SWIPE_DISTANCE && \n\t\t\t\t(isFastLastFlick || _releaseAnimData.lastFlickOffset.x > 20) ) {\n\t\t\t\t// go to prev item\n\t\t\t\titemsDiff = -1;\n\t\t\t} else if(totalShiftDist < -MIN_SWIPE_DISTANCE && \n\t\t\t\t(isFastLastFlick || _releaseAnimData.lastFlickOffset.x < -20) ) {\n\t\t\t\t// go to next item\n\t\t\t\titemsDiff = 1;\n\t\t\t}\n\t\t}\n\n\t\tvar nextCircle;\n\n\t\tif(itemsDiff) {\n\t\t\t\n\t\t\t_currentItemIndex += itemsDiff;\n\n\t\t\tif(_currentItemIndex < 0) {\n\t\t\t\t_currentItemIndex = _options.loop ? _getNumItems()-1 : 0;\n\t\t\t\tnextCircle = true;\n\t\t\t} else if(_currentItemIndex >= _getNumItems()) {\n\t\t\t\t_currentItemIndex = _options.loop ? 0 : _getNumItems()-1;\n\t\t\t\tnextCircle = true;\n\t\t\t}\n\n\t\t\tif(!nextCircle || _options.loop) {\n\t\t\t\t_indexDiff += itemsDiff;\n\t\t\t\t_currPositionIndex -= itemsDiff;\n\t\t\t\titemChanged = true;\n\t\t\t}\n\t\t\t\n\n\t\t\t\n\t\t}\n\n\t\tvar animateToX = _slideSize.x * _currPositionIndex;\n\t\tvar animateToDist = Math.abs( animateToX - _mainScrollPos.x );\n\t\tvar finishAnimDuration;\n\n\n\t\tif(!itemChanged && animateToX > _mainScrollPos.x !== _releaseAnimData.lastFlickSpeed.x > 0) {\n\t\t\t// \"return to current\" duration, e.g. when dragging from slide 0 to -1\n\t\t\tfinishAnimDuration = 333; \n\t\t} else {\n\t\t\tfinishAnimDuration = Math.abs(_releaseAnimData.lastFlickSpeed.x) > 0 ? \n\t\t\t\t\t\t\t\t\tanimateToDist / Math.abs(_releaseAnimData.lastFlickSpeed.x) : \n\t\t\t\t\t\t\t\t\t333;\n\n\t\t\tfinishAnimDuration = Math.min(finishAnimDuration, 400);\n\t\t\tfinishAnimDuration = Math.max(finishAnimDuration, 250);\n\t\t}\n\n\t\tif(_currZoomedItemIndex === _currentItemIndex) {\n\t\t\titemChanged = false;\n\t\t}\n\t\t\n\t\t_mainScrollAnimating = true;\n\t\t\n\t\t_shout('mainScrollAnimStart');\n\n\t\t_animateProp('mainScroll', _mainScrollPos.x, animateToX, finishAnimDuration, framework.easing.cubic.out, \n\t\t\t_moveMainScroll,\n\t\t\tfunction() {\n\t\t\t\t_stopAllAnimations();\n\t\t\t\t_mainScrollAnimating = false;\n\t\t\t\t_currZoomedItemIndex = -1;\n\t\t\t\t\n\t\t\t\tif(itemChanged || _currZoomedItemIndex !== _currentItemIndex) {\n\t\t\t\t\tself.updateCurrItem();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t_shout('mainScrollAnimComplete');\n\t\t\t}\n\t\t);\n\n\t\tif(itemChanged) {\n\t\t\tself.updateCurrItem(true);\n\t\t}\n\n\t\treturn itemChanged;\n\t},\n\n\t_calculateZoomLevel = function(touchesDistance) {\n\t\treturn  1 / _startPointsDistance * touchesDistance * _startZoomLevel;\n\t},\n\n\t// Resets zoom if it's out of bounds\n\t_completeZoomGesture = function() {\n\t\tvar destZoomLevel = _currZoomLevel,\n\t\t\tminZoomLevel = _getMinZoomLevel(),\n\t\t\tmaxZoomLevel = _getMaxZoomLevel();\n\n\t\tif ( _currZoomLevel < minZoomLevel ) {\n\t\t\tdestZoomLevel = minZoomLevel;\n\t\t} else if ( _currZoomLevel > maxZoomLevel ) {\n\t\t\tdestZoomLevel = maxZoomLevel;\n\t\t}\n\n\t\tvar destOpacity = 1,\n\t\t\tonUpdate,\n\t\t\tinitialOpacity = _bgOpacity;\n\n\t\tif(_opacityChanged && !_isZoomingIn && !_wasOverInitialZoom && _currZoomLevel < minZoomLevel) {\n\t\t\t//_closedByScroll = true;\n\t\t\tself.close();\n\t\t\treturn true;\n\t\t}\n\n\t\tif(_opacityChanged) {\n\t\t\tonUpdate = function(now) {\n\t\t\t\t_applyBgOpacity(  (destOpacity - initialOpacity) * now + initialOpacity );\n\t\t\t};\n\t\t}\n\n\t\tself.zoomTo(destZoomLevel, 0, 200,  framework.easing.cubic.out, onUpdate);\n\t\treturn true;\n\t};\n\n\n_registerModule('Gestures', {\n\tpublicMethods: {\n\n\t\tinitGestures: function() {\n\n\t\t\t// helper function that builds touch/pointer/mouse events\n\t\t\tvar addEventNames = function(pref, down, move, up, cancel) {\n\t\t\t\t_dragStartEvent = pref + down;\n\t\t\t\t_dragMoveEvent = pref + move;\n\t\t\t\t_dragEndEvent = pref + up;\n\t\t\t\tif(cancel) {\n\t\t\t\t\t_dragCancelEvent = pref + cancel;\n\t\t\t\t} else {\n\t\t\t\t\t_dragCancelEvent = '';\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t_pointerEventEnabled = _features.pointerEvent;\n\t\t\tif(_pointerEventEnabled && _features.touch) {\n\t\t\t\t// we don't need touch events, if browser supports pointer events\n\t\t\t\t_features.touch = false;\n\t\t\t}\n\n\t\t\tif(_pointerEventEnabled) {\n\t\t\t\tif(navigator.msPointerEnabled) {\n\t\t\t\t\t// IE10 pointer events are case-sensitive\n\t\t\t\t\taddEventNames('MSPointer', 'Down', 'Move', 'Up', 'Cancel');\n\t\t\t\t} else {\n\t\t\t\t\taddEventNames('pointer', 'down', 'move', 'up', 'cancel');\n\t\t\t\t}\n\t\t\t} else if(_features.touch) {\n\t\t\t\taddEventNames('touch', 'start', 'move', 'end', 'cancel');\n\t\t\t\t_likelyTouchDevice = true;\n\t\t\t} else {\n\t\t\t\taddEventNames('mouse', 'down', 'move', 'up');\t\n\t\t\t}\n\n\t\t\t_upMoveEvents = _dragMoveEvent + ' ' + _dragEndEvent  + ' ' +  _dragCancelEvent;\n\t\t\t_downEvents = _dragStartEvent;\n\n\t\t\tif(_pointerEventEnabled && !_likelyTouchDevice) {\n\t\t\t\t_likelyTouchDevice = (navigator.maxTouchPoints > 1) || (navigator.msMaxTouchPoints > 1);\n\t\t\t}\n\t\t\t// make variable public\n\t\t\tself.likelyTouchDevice = _likelyTouchDevice; \n\t\t\t\n\t\t\t_globalEventHandlers[_dragStartEvent] = _onDragStart;\n\t\t\t_globalEventHandlers[_dragMoveEvent] = _onDragMove;\n\t\t\t_globalEventHandlers[_dragEndEvent] = _onDragRelease; // the Kraken\n\n\t\t\tif(_dragCancelEvent) {\n\t\t\t\t_globalEventHandlers[_dragCancelEvent] = _globalEventHandlers[_dragEndEvent];\n\t\t\t}\n\n\t\t\t// Bind mouse events on device with detected hardware touch support, in case it supports multiple types of input.\n\t\t\tif(_features.touch) {\n\t\t\t\t_downEvents += ' mousedown';\n\t\t\t\t_upMoveEvents += ' mousemove mouseup';\n\t\t\t\t_globalEventHandlers.mousedown = _globalEventHandlers[_dragStartEvent];\n\t\t\t\t_globalEventHandlers.mousemove = _globalEventHandlers[_dragMoveEvent];\n\t\t\t\t_globalEventHandlers.mouseup = _globalEventHandlers[_dragEndEvent];\n\t\t\t}\n\n\t\t\tif(!_likelyTouchDevice) {\n\t\t\t\t// don't allow pan to next slide from zoomed state on Desktop\n\t\t\t\t_options.allowPanToNext = false;\n\t\t\t}\n\t\t}\n\n\t}\n});\n\n\n/*>>gestures*/\n\n/*>>show-hide-transition*/\n/**\n * show-hide-transition.js:\n *\n * Manages initial opening or closing transition.\n *\n * If you're not planning to use transition for gallery at all,\n * you may set options hideAnimationDuration and showAnimationDuration to 0,\n * and just delete startAnimation function.\n * \n */\n\n\nvar _showOrHideTimeout,\n\t_showOrHide = function(item, img, out, completeFn) {\n\n\t\tif(_showOrHideTimeout) {\n\t\t\tclearTimeout(_showOrHideTimeout);\n\t\t}\n\n\t\t_initialZoomRunning = true;\n\t\t_initialContentSet = true;\n\t\t\n\t\t// dimensions of small thumbnail {x:,y:,w:}.\n\t\t// Height is optional, as calculated based on large image.\n\t\tvar thumbBounds; \n\t\tif(item.initialLayout) {\n\t\t\tthumbBounds = item.initialLayout;\n\t\t\titem.initialLayout = null;\n\t\t} else {\n\t\t\tthumbBounds = _options.getThumbBoundsFn && _options.getThumbBoundsFn(_currentItemIndex);\n\t\t}\n\n\t\tvar duration = out ? _options.hideAnimationDuration : _options.showAnimationDuration;\n\n\t\tvar onComplete = function() {\n\t\t\t_stopAnimation('initialZoom');\n\t\t\tif(!out) {\n\t\t\t\t_applyBgOpacity(1);\n\t\t\t\tif(img) {\n\t\t\t\t\timg.style.display = 'block';\n\t\t\t\t}\n\t\t\t\tframework.addClass(template, 'pswp--animated-in');\n\t\t\t\t_shout('initialZoom' + (out ? 'OutEnd' : 'InEnd'));\n\t\t\t} else {\n\t\t\t\tself.template.removeAttribute('style');\n\t\t\t\tself.bg.removeAttribute('style');\n\t\t\t}\n\n\t\t\tif(completeFn) {\n\t\t\t\tcompleteFn();\n\t\t\t}\n\t\t\t_initialZoomRunning = false;\n\t\t};\n\n\t\t// if bounds aren't provided, just open gallery without animation\n\t\tif(!duration || !thumbBounds || thumbBounds.x === undefined) {\n\n\t\t\t_shout('initialZoom' + (out ? 'Out' : 'In') );\n\n\t\t\t_currZoomLevel = item.initialZoomLevel;\n\t\t\t_equalizePoints(_panOffset,  item.initialPosition );\n\t\t\t_applyCurrentZoomPan();\n\n\t\t\ttemplate.style.opacity = out ? 0 : 1;\n\t\t\t_applyBgOpacity(1);\n\n\t\t\tif(duration) {\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tonComplete();\n\t\t\t\t}, duration);\n\t\t\t} else {\n\t\t\t\tonComplete();\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tvar startAnimation = function() {\n\t\t\tvar closeWithRaf = _closedByScroll,\n\t\t\t\tfadeEverything = !self.currItem.src || self.currItem.loadError || _options.showHideOpacity;\n\t\t\t\n\t\t\t// apply hw-acceleration to image\n\t\t\tif(item.miniImg) {\n\t\t\t\titem.miniImg.style.webkitBackfaceVisibility = 'hidden';\n\t\t\t}\n\n\t\t\tif(!out) {\n\t\t\t\t_currZoomLevel = thumbBounds.w / item.w;\n\t\t\t\t_panOffset.x = thumbBounds.x;\n\t\t\t\t_panOffset.y = thumbBounds.y - _initalWindowScrollY;\n\n\t\t\t\tself[fadeEverything ? 'template' : 'bg'].style.opacity = 0.001;\n\t\t\t\t_applyCurrentZoomPan();\n\t\t\t}\n\n\t\t\t_registerStartAnimation('initialZoom');\n\t\t\t\n\t\t\tif(out && !closeWithRaf) {\n\t\t\t\tframework.removeClass(template, 'pswp--animated-in');\n\t\t\t}\n\n\t\t\tif(fadeEverything) {\n\t\t\t\tif(out) {\n\t\t\t\t\tframework[ (closeWithRaf ? 'remove' : 'add') + 'Class' ](template, 'pswp--animate_opacity');\n\t\t\t\t} else {\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\tframework.addClass(template, 'pswp--animate_opacity');\n\t\t\t\t\t}, 30);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t_showOrHideTimeout = setTimeout(function() {\n\n\t\t\t\t_shout('initialZoom' + (out ? 'Out' : 'In') );\n\t\t\t\t\n\n\t\t\t\tif(!out) {\n\n\t\t\t\t\t// \"in\" animation always uses CSS transitions (instead of rAF).\n\t\t\t\t\t// CSS transition work faster here, \n\t\t\t\t\t// as developer may also want to animate other things, \n\t\t\t\t\t// like ui on top of sliding area, which can be animated just via CSS\n\t\t\t\t\t\n\t\t\t\t\t_currZoomLevel = item.initialZoomLevel;\n\t\t\t\t\t_equalizePoints(_panOffset,  item.initialPosition );\n\t\t\t\t\t_applyCurrentZoomPan();\n\t\t\t\t\t_applyBgOpacity(1);\n\n\t\t\t\t\tif(fadeEverything) {\n\t\t\t\t\t\ttemplate.style.opacity = 1;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_applyBgOpacity(1);\n\t\t\t\t\t}\n\n\t\t\t\t\t_showOrHideTimeout = setTimeout(onComplete, duration + 20);\n\t\t\t\t} else {\n\n\t\t\t\t\t// \"out\" animation uses rAF only when PhotoSwipe is closed by browser scroll, to recalculate position\n\t\t\t\t\tvar destZoomLevel = thumbBounds.w / item.w,\n\t\t\t\t\t\tinitialPanOffset = {\n\t\t\t\t\t\t\tx: _panOffset.x,\n\t\t\t\t\t\t\ty: _panOffset.y\n\t\t\t\t\t\t},\n\t\t\t\t\t\tinitialZoomLevel = _currZoomLevel,\n\t\t\t\t\t\tinitalBgOpacity = _bgOpacity,\n\t\t\t\t\t\tonUpdate = function(now) {\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(now === 1) {\n\t\t\t\t\t\t\t\t_currZoomLevel = destZoomLevel;\n\t\t\t\t\t\t\t\t_panOffset.x = thumbBounds.x;\n\t\t\t\t\t\t\t\t_panOffset.y = thumbBounds.y  - _currentWindowScrollY;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t_currZoomLevel = (destZoomLevel - initialZoomLevel) * now + initialZoomLevel;\n\t\t\t\t\t\t\t\t_panOffset.x = (thumbBounds.x - initialPanOffset.x) * now + initialPanOffset.x;\n\t\t\t\t\t\t\t\t_panOffset.y = (thumbBounds.y - _currentWindowScrollY - initialPanOffset.y) * now + initialPanOffset.y;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t_applyCurrentZoomPan();\n\t\t\t\t\t\t\tif(fadeEverything) {\n\t\t\t\t\t\t\t\ttemplate.style.opacity = 1 - now;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t_applyBgOpacity( initalBgOpacity - now * initalBgOpacity );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\n\t\t\t\t\tif(closeWithRaf) {\n\t\t\t\t\t\t_animateProp('initialZoom', 0, 1, duration, framework.easing.cubic.out, onUpdate, onComplete);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tonUpdate(1);\n\t\t\t\t\t\t_showOrHideTimeout = setTimeout(onComplete, duration + 20);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\n\t\t\t}, out ? 25 : 90); // Main purpose of this delay is to give browser time to paint and\n\t\t\t\t\t// create composite layers of PhotoSwipe UI parts (background, controls, caption, arrows).\n\t\t\t\t\t// Which avoids lag at the beginning of scale transition.\n\t\t};\n\t\tstartAnimation();\n\n\t\t\n\t};\n\n/*>>show-hide-transition*/\n\n/*>>items-controller*/\n/**\n*\n* Controller manages gallery items, their dimensions, and their content.\n* \n*/\n\nvar _items,\n\t_tempPanAreaSize = {},\n\t_imagesToAppendPool = [],\n\t_initialContentSet,\n\t_initialZoomRunning,\n\t_controllerDefaultOptions = {\n\t\tindex: 0,\n\t\terrorMsg: '<div class=\"pswp__error-msg\"><a href=\"%url%\" target=\"_blank\">The image</a> could not be loaded.</div>',\n\t\tforceProgressiveLoading: false, // TODO\n\t\tpreload: [1,1],\n\t\tgetNumItemsFn: function() {\n\t\t\treturn _items.length;\n\t\t}\n\t};\n\n\nvar _getItemAt,\n\t_getNumItems,\n\t_initialIsLoop,\n\t_getZeroBounds = function() {\n\t\treturn {\n\t\t\tcenter:{x:0,y:0}, \n\t\t\tmax:{x:0,y:0}, \n\t\t\tmin:{x:0,y:0}\n\t\t};\n\t},\n\t_calculateSingleItemPanBounds = function(item, realPanElementW, realPanElementH ) {\n\t\tvar bounds = item.bounds;\n\n\t\t// position of element when it's centered\n\t\tbounds.center.x = Math.round((_tempPanAreaSize.x - realPanElementW) / 2);\n\t\tbounds.center.y = Math.round((_tempPanAreaSize.y - realPanElementH) / 2) + item.vGap.top;\n\n\t\t// maximum pan position\n\t\tbounds.max.x = (realPanElementW > _tempPanAreaSize.x) ? \n\t\t\t\t\t\t\tMath.round(_tempPanAreaSize.x - realPanElementW) : \n\t\t\t\t\t\t\tbounds.center.x;\n\t\t\n\t\tbounds.max.y = (realPanElementH > _tempPanAreaSize.y) ? \n\t\t\t\t\t\t\tMath.round(_tempPanAreaSize.y - realPanElementH) + item.vGap.top : \n\t\t\t\t\t\t\tbounds.center.y;\n\t\t\n\t\t// minimum pan position\n\t\tbounds.min.x = (realPanElementW > _tempPanAreaSize.x) ? 0 : bounds.center.x;\n\t\tbounds.min.y = (realPanElementH > _tempPanAreaSize.y) ? item.vGap.top : bounds.center.y;\n\t},\n\t_calculateItemSize = function(item, viewportSize, zoomLevel) {\n\n\t\tif (item.src && !item.loadError) {\n\t\t\tvar isInitial = !zoomLevel;\n\t\t\t\n\t\t\tif(isInitial) {\n\t\t\t\tif(!item.vGap) {\n\t\t\t\t\titem.vGap = {top:0,bottom:0};\n\t\t\t\t}\n\t\t\t\t// allows overriding vertical margin for individual items\n\t\t\t\t_shout('parseVerticalMargin', item);\n\t\t\t}\n\n\n\t\t\t_tempPanAreaSize.x = viewportSize.x;\n\t\t\t_tempPanAreaSize.y = viewportSize.y - item.vGap.top - item.vGap.bottom;\n\n\t\t\tif (isInitial) {\n\t\t\t\tvar hRatio = _tempPanAreaSize.x / item.w;\n\t\t\t\tvar vRatio = _tempPanAreaSize.y / item.h;\n\n\t\t\t\titem.fitRatio = hRatio < vRatio ? hRatio : vRatio;\n\t\t\t\t//item.fillRatio = hRatio > vRatio ? hRatio : vRatio;\n\n\t\t\t\tvar scaleMode = _options.scaleMode;\n\n\t\t\t\tif (scaleMode === 'orig') {\n\t\t\t\t\tzoomLevel = 1;\n\t\t\t\t} else if (scaleMode === 'fit') {\n\t\t\t\t\tzoomLevel = item.fitRatio;\n\t\t\t\t}\n\n\t\t\t\tif (zoomLevel > 1) {\n\t\t\t\t\tzoomLevel = 1;\n\t\t\t\t}\n\n\t\t\t\titem.initialZoomLevel = zoomLevel;\n\t\t\t\t\n\t\t\t\tif(!item.bounds) {\n\t\t\t\t\t// reuse bounds object\n\t\t\t\t\titem.bounds = _getZeroBounds(); \n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(!zoomLevel) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t_calculateSingleItemPanBounds(item, item.w * zoomLevel, item.h * zoomLevel);\n\n\t\t\tif (isInitial && zoomLevel === item.initialZoomLevel) {\n\t\t\t\titem.initialPosition = item.bounds.center;\n\t\t\t}\n\n\t\t\treturn item.bounds;\n\t\t} else {\n\t\t\titem.w = item.h = 0;\n\t\t\titem.initialZoomLevel = item.fitRatio = 1;\n\t\t\titem.bounds = _getZeroBounds();\n\t\t\titem.initialPosition = item.bounds.center;\n\n\t\t\t// if it's not image, we return zero bounds (content is not zoomable)\n\t\t\treturn item.bounds;\n\t\t}\n\t\t\n\t},\n\n\t\n\n\n\t_appendImage = function(index, item, baseDiv, img, preventAnimation, keepPlaceholder) {\n\t\t\n\n\t\tif(item.loadError) {\n\t\t\treturn;\n\t\t}\n\n\t\tif(img) {\n\n\t\t\titem.imageAppended = true;\n\t\t\t_setImageSize(item, img, (item === self.currItem && _renderMaxResolution) );\n\t\t\t\n\t\t\tbaseDiv.appendChild(img);\n\n\t\t\tif(keepPlaceholder) {\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tif(item && item.loaded && item.placeholder) {\n\t\t\t\t\t\titem.placeholder.style.display = 'none';\n\t\t\t\t\t\titem.placeholder = null;\n\t\t\t\t\t}\n\t\t\t\t}, 500);\n\t\t\t}\n\t\t}\n\t},\n\t\n\n\n\t_preloadImage = function(item) {\n\t\titem.loading = true;\n\t\titem.loaded = false;\n\t\tvar img = item.img = framework.createEl('pswp__img', 'img');\n\t\tvar onComplete = function() {\n\t\t\titem.loading = false;\n\t\t\titem.loaded = true;\n\n\t\t\tif(item.loadComplete) {\n\t\t\t\titem.loadComplete(item);\n\t\t\t} else {\n\t\t\t\titem.img = null; // no need to store image object\n\t\t\t}\n\t\t\timg.onload = img.onerror = null;\n\t\t\timg = null;\n\t\t};\n\t\timg.onload = onComplete;\n\t\timg.onerror = function() {\n\t\t\titem.loadError = true;\n\t\t\tonComplete();\n\t\t};\t\t\n\n\t\timg.src = item.src;// + '?a=' + Math.random();\n\n\t\treturn img;\n\t},\n\t_checkForError = function(item, cleanUp) {\n\t\tif(item.src && item.loadError && item.container) {\n\n\t\t\tif(cleanUp) {\n\t\t\t\titem.container.innerHTML = '';\n\t\t\t}\n\n\t\t\titem.container.innerHTML = _options.errorMsg.replace('%url%',  item.src );\n\t\t\treturn true;\n\t\t\t\n\t\t}\n\t},\n\t_setImageSize = function(item, img, maxRes) {\n\t\tif(!item.src) {\n\t\t\treturn;\n\t\t}\n\n\t\tif(!img) {\n\t\t\timg = item.container.lastChild;\n\t\t}\n\n\t\tvar w = maxRes ? item.w : Math.round(item.w * item.fitRatio),\n\t\t\th = maxRes ? item.h : Math.round(item.h * item.fitRatio);\n\t\t\n\t\tif(item.placeholder && !item.loaded) {\n\t\t\titem.placeholder.style.width = w + 'px';\n\t\t\titem.placeholder.style.height = h + 'px';\n\t\t}\n\n\t\timg.style.width = w + 'px';\n\t\timg.style.height = h + 'px';\n\t},\n\t_appendImagesPool = function() {\n\n\t\tif(_imagesToAppendPool.length) {\n\t\t\tvar poolItem;\n\n\t\t\tfor(var i = 0; i < _imagesToAppendPool.length; i++) {\n\t\t\t\tpoolItem = _imagesToAppendPool[i];\n\t\t\t\tif( poolItem.holder.index === poolItem.index ) {\n\t\t\t\t\t_appendImage(poolItem.index, poolItem.item, poolItem.baseDiv, poolItem.img, false, poolItem.clearPlaceholder);\n\t\t\t\t}\n\t\t\t}\n\t\t\t_imagesToAppendPool = [];\n\t\t}\n\t};\n\t\n\n\n_registerModule('Controller', {\n\n\tpublicMethods: {\n\n\t\tlazyLoadItem: function(index) {\n\t\t\tindex = _getLoopedId(index);\n\t\t\tvar item = _getItemAt(index);\n\n\t\t\tif(!item || ((item.loaded || item.loading) && !_itemsNeedUpdate)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t_shout('gettingData', index, item);\n\n\t\t\tif (!item.src) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t_preloadImage(item);\n\t\t},\n\t\tinitController: function() {\n\t\t\tframework.extend(_options, _controllerDefaultOptions, true);\n\t\t\tself.items = _items = items;\n\t\t\t_getItemAt = self.getItemAt;\n\t\t\t_getNumItems = _options.getNumItemsFn; //self.getNumItems;\n\n\n\n\t\t\t_initialIsLoop = _options.loop;\n\t\t\tif(_getNumItems() < 3) {\n\t\t\t\t_options.loop = false; // disable loop if less then 3 items\n\t\t\t}\n\n\t\t\t_listen('beforeChange', function(diff) {\n\n\t\t\t\tvar p = _options.preload,\n\t\t\t\t\tisNext = diff === null ? true : (diff >= 0),\n\t\t\t\t\tpreloadBefore = Math.min(p[0], _getNumItems() ),\n\t\t\t\t\tpreloadAfter = Math.min(p[1], _getNumItems() ),\n\t\t\t\t\ti;\n\n\n\t\t\t\tfor(i = 1; i <= (isNext ? preloadAfter : preloadBefore); i++) {\n\t\t\t\t\tself.lazyLoadItem(_currentItemIndex+i);\n\t\t\t\t}\n\t\t\t\tfor(i = 1; i <= (isNext ? preloadBefore : preloadAfter); i++) {\n\t\t\t\t\tself.lazyLoadItem(_currentItemIndex-i);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t_listen('initialLayout', function() {\n\t\t\t\tself.currItem.initialLayout = _options.getThumbBoundsFn && _options.getThumbBoundsFn(_currentItemIndex);\n\t\t\t});\n\n\t\t\t_listen('mainScrollAnimComplete', _appendImagesPool);\n\t\t\t_listen('initialZoomInEnd', _appendImagesPool);\n\n\n\n\t\t\t_listen('destroy', function() {\n\t\t\t\tvar item;\n\t\t\t\tfor(var i = 0; i < _items.length; i++) {\n\t\t\t\t\titem = _items[i];\n\t\t\t\t\t// remove reference to DOM elements, for GC\n\t\t\t\t\tif(item.container) {\n\t\t\t\t\t\titem.container = null; \n\t\t\t\t\t}\n\t\t\t\t\tif(item.placeholder) {\n\t\t\t\t\t\titem.placeholder = null;\n\t\t\t\t\t}\n\t\t\t\t\tif(item.img) {\n\t\t\t\t\t\titem.img = null;\n\t\t\t\t\t}\n\t\t\t\t\tif(item.preloader) {\n\t\t\t\t\t\titem.preloader = null;\n\t\t\t\t\t}\n\t\t\t\t\tif(item.loadError) {\n\t\t\t\t\t\titem.loaded = item.loadError = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t_imagesToAppendPool = null;\n\t\t\t});\n\t\t},\n\n\n\t\tgetItemAt: function(index) {\n\t\t\tif (index >= 0) {\n\t\t\t\treturn _items[index] !== undefined ? _items[index] : false;\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\n\t\tallowProgressiveImg: function() {\n\t\t\t// 1. Progressive image loading isn't working on webkit/blink \n\t\t\t//    when hw-acceleration (e.g. translateZ) is applied to IMG element.\n\t\t\t//    That's why in PhotoSwipe parent element gets zoom transform, not image itself.\n\t\t\t//    \n\t\t\t// 2. Progressive image loading sometimes blinks in webkit/blink when applying animation to parent element.\n\t\t\t//    That's why it's disabled on touch devices (mainly because of swipe transition)\n\t\t\t//    \n\t\t\t// 3. Progressive image loading sometimes doesn't work in IE (up to 11).\n\n\t\t\t// Don't allow progressive loading on non-large touch devices\n\t\t\treturn _options.forceProgressiveLoading || !_likelyTouchDevice || _options.mouseUsed || screen.width > 1200; \n\t\t\t// 1200 - to eliminate touch devices with large screen (like Chromebook Pixel)\n\t\t},\n\n\t\tsetContent: function(holder, index) {\n\n\t\t\tif(_options.loop) {\n\t\t\t\tindex = _getLoopedId(index);\n\t\t\t}\n\n\t\t\tvar prevItem = self.getItemAt(holder.index);\n\t\t\tif(prevItem) {\n\t\t\t\tprevItem.container = null;\n\t\t\t}\n\t\n\t\t\tvar item = self.getItemAt(index),\n\t\t\t\timg;\n\t\t\t\n\t\t\tif(!item) {\n\t\t\t\tholder.el.innerHTML = '';\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// allow to override data\n\t\t\t_shout('gettingData', index, item);\n\n\t\t\tholder.index = index;\n\t\t\tholder.item = item;\n\n\t\t\t// base container DIV is created only once for each of 3 holders\n\t\t\tvar baseDiv = item.container = framework.createEl('pswp__zoom-wrap'); \n\n\t\t\t\n\n\t\t\tif(!item.src && item.html) {\n\t\t\t\tif(item.html.tagName) {\n\t\t\t\t\tbaseDiv.appendChild(item.html);\n\t\t\t\t} else {\n\t\t\t\t\tbaseDiv.innerHTML = item.html;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t_checkForError(item);\n\n\t\t\t_calculateItemSize(item, _viewportSize);\n\t\t\t\n\t\t\tif(item.src && !item.loadError && !item.loaded) {\n\n\t\t\t\titem.loadComplete = function(item) {\n\n\t\t\t\t\t// gallery closed before image finished loading\n\t\t\t\t\tif(!_isOpen) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// check if holder hasn't changed while image was loading\n\t\t\t\t\tif(holder && holder.index === index ) {\n\t\t\t\t\t\tif( _checkForError(item, true) ) {\n\t\t\t\t\t\t\titem.loadComplete = item.img = null;\n\t\t\t\t\t\t\t_calculateItemSize(item, _viewportSize);\n\t\t\t\t\t\t\t_applyZoomPanToItem(item);\n\n\t\t\t\t\t\t\tif(holder.index === _currentItemIndex) {\n\t\t\t\t\t\t\t\t// recalculate dimensions\n\t\t\t\t\t\t\t\tself.updateCurrZoomItem();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif( !item.imageAppended ) {\n\t\t\t\t\t\t\tif(_features.transform && (_mainScrollAnimating || _initialZoomRunning) ) {\n\t\t\t\t\t\t\t\t_imagesToAppendPool.push({\n\t\t\t\t\t\t\t\t\titem:item,\n\t\t\t\t\t\t\t\t\tbaseDiv:baseDiv,\n\t\t\t\t\t\t\t\t\timg:item.img,\n\t\t\t\t\t\t\t\t\tindex:index,\n\t\t\t\t\t\t\t\t\tholder:holder,\n\t\t\t\t\t\t\t\t\tclearPlaceholder:true\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t_appendImage(index, item, baseDiv, item.img, _mainScrollAnimating || _initialZoomRunning, true);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// remove preloader & mini-img\n\t\t\t\t\t\t\tif(!_initialZoomRunning && item.placeholder) {\n\t\t\t\t\t\t\t\titem.placeholder.style.display = 'none';\n\t\t\t\t\t\t\t\titem.placeholder = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\titem.loadComplete = null;\n\t\t\t\t\titem.img = null; // no need to store image element after it's added\n\n\t\t\t\t\t_shout('imageLoadComplete', index, item);\n\t\t\t\t};\n\n\t\t\t\tif(framework.features.transform) {\n\t\t\t\t\t\n\t\t\t\t\tvar placeholderClassName = 'pswp__img pswp__img--placeholder'; \n\t\t\t\t\tplaceholderClassName += (item.msrc ? '' : ' pswp__img--placeholder--blank');\n\n\t\t\t\t\tvar placeholder = framework.createEl(placeholderClassName, item.msrc ? 'img' : '');\n\t\t\t\t\tif(item.msrc) {\n\t\t\t\t\t\tplaceholder.src = item.msrc;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t_setImageSize(item, placeholder);\n\n\t\t\t\t\tbaseDiv.appendChild(placeholder);\n\t\t\t\t\titem.placeholder = placeholder;\n\n\t\t\t\t}\n\t\t\t\t\n\n\t\t\t\t\n\n\t\t\t\tif(!item.loading) {\n\t\t\t\t\t_preloadImage(item);\n\t\t\t\t}\n\n\n\t\t\t\tif( self.allowProgressiveImg() ) {\n\t\t\t\t\t// just append image\n\t\t\t\t\tif(!_initialContentSet && _features.transform) {\n\t\t\t\t\t\t_imagesToAppendPool.push({\n\t\t\t\t\t\t\titem:item, \n\t\t\t\t\t\t\tbaseDiv:baseDiv, \n\t\t\t\t\t\t\timg:item.img, \n\t\t\t\t\t\t\tindex:index, \n\t\t\t\t\t\t\tholder:holder\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_appendImage(index, item, baseDiv, item.img, true, true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t} else if(item.src && !item.loadError) {\n\t\t\t\t// image object is created every time, due to bugs of image loading & delay when switching images\n\t\t\t\timg = framework.createEl('pswp__img', 'img');\n\t\t\t\timg.style.opacity = 1;\n\t\t\t\timg.src = item.src;\n\t\t\t\t_setImageSize(item, img);\n\t\t\t\t_appendImage(index, item, baseDiv, img, true);\n\t\t\t}\n\t\t\t\n\n\t\t\tif(!_initialContentSet && index === _currentItemIndex) {\n\t\t\t\t_currZoomElementStyle = baseDiv.style;\n\t\t\t\t_showOrHide(item, (img ||item.img) );\n\t\t\t} else {\n\t\t\t\t_applyZoomPanToItem(item);\n\t\t\t}\n\n\t\t\tholder.el.innerHTML = '';\n\t\t\tholder.el.appendChild(baseDiv);\n\t\t},\n\n\t\tcleanSlide: function( item ) {\n\t\t\tif(item.img ) {\n\t\t\t\titem.img.onload = item.img.onerror = null;\n\t\t\t}\n\t\t\titem.loaded = item.loading = item.img = item.imageAppended = false;\n\t\t}\n\n\t}\n});\n\n/*>>items-controller*/\n\n/*>>tap*/\n/**\n * tap.js:\n *\n * Displatches tap and double-tap events.\n * \n */\n\nvar tapTimer,\n\ttapReleasePoint = {},\n\t_dispatchTapEvent = function(origEvent, releasePoint, pointerType) {\t\t\n\t\tvar e = document.createEvent( 'CustomEvent' ),\n\t\t\teDetail = {\n\t\t\t\torigEvent:origEvent, \n\t\t\t\ttarget:origEvent.target, \n\t\t\t\treleasePoint: releasePoint, \n\t\t\t\tpointerType:pointerType || 'touch'\n\t\t\t};\n\n\t\te.initCustomEvent( 'pswpTap', true, true, eDetail );\n\t\torigEvent.target.dispatchEvent(e);\n\t};\n\n_registerModule('Tap', {\n\tpublicMethods: {\n\t\tinitTap: function() {\n\t\t\t_listen('firstTouchStart', self.onTapStart);\n\t\t\t_listen('touchRelease', self.onTapRelease);\n\t\t\t_listen('destroy', function() {\n\t\t\t\ttapReleasePoint = {};\n\t\t\t\ttapTimer = null;\n\t\t\t});\n\t\t},\n\t\tonTapStart: function(touchList) {\n\t\t\tif(touchList.length > 1) {\n\t\t\t\tclearTimeout(tapTimer);\n\t\t\t\ttapTimer = null;\n\t\t\t}\n\t\t},\n\t\tonTapRelease: function(e, releasePoint) {\n\t\t\tif(!releasePoint) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif(!_moved && !_isMultitouch && !_numAnimations) {\n\t\t\t\tvar p0 = releasePoint;\n\t\t\t\tif(tapTimer) {\n\t\t\t\t\tclearTimeout(tapTimer);\n\t\t\t\t\ttapTimer = null;\n\n\t\t\t\t\t// Check if taped on the same place\n\t\t\t\t\tif ( _isNearbyPoints(p0, tapReleasePoint) ) {\n\t\t\t\t\t\t_shout('doubleTap', p0);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif(releasePoint.type === 'mouse') {\n\t\t\t\t\t_dispatchTapEvent(e, releasePoint, 'mouse');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar clickedTagName = e.target.tagName.toUpperCase();\n\t\t\t\t// avoid double tap delay on buttons and elements that have class pswp__single-tap\n\t\t\t\tif(clickedTagName === 'BUTTON' || framework.hasClass(e.target, 'pswp__single-tap') ) {\n\t\t\t\t\t_dispatchTapEvent(e, releasePoint);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t_equalizePoints(tapReleasePoint, p0);\n\n\t\t\t\ttapTimer = setTimeout(function() {\n\t\t\t\t\t_dispatchTapEvent(e, releasePoint);\n\t\t\t\t\ttapTimer = null;\n\t\t\t\t}, 300);\n\t\t\t}\n\t\t}\n\t}\n});\n\n/*>>tap*/\n\n/*>>desktop-zoom*/\n/**\n *\n * desktop-zoom.js:\n *\n * - Binds mousewheel event for paning zoomed image.\n * - Manages \"dragging\", \"zoomed-in\", \"zoom-out\" classes.\n *   (which are used for cursors and zoom icon)\n * - Adds toggleDesktopZoom function.\n * \n */\n\nvar _wheelDelta;\n\t\n_registerModule('DesktopZoom', {\n\n\tpublicMethods: {\n\n\t\tinitDesktopZoom: function() {\n\n\t\t\tif(_oldIE) {\n\t\t\t\t// no zoom for old IE (<=8)\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif(_likelyTouchDevice) {\n\t\t\t\t// if detected hardware touch support, we wait until mouse is used,\n\t\t\t\t// and only then apply desktop-zoom features\n\t\t\t\t_listen('mouseUsed', function() {\n\t\t\t\t\tself.setupDesktopZoom();\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tself.setupDesktopZoom(true);\n\t\t\t}\n\n\t\t},\n\n\t\tsetupDesktopZoom: function(onInit) {\n\n\t\t\t_wheelDelta = {};\n\n\t\t\tvar events = 'wheel mousewheel DOMMouseScroll';\n\t\t\t\n\t\t\t_listen('bindEvents', function() {\n\t\t\t\tframework.bind(template, events,  self.handleMouseWheel);\n\t\t\t});\n\n\t\t\t_listen('unbindEvents', function() {\n\t\t\t\tif(_wheelDelta) {\n\t\t\t\t\tframework.unbind(template, events, self.handleMouseWheel);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tself.mouseZoomedIn = false;\n\n\t\t\tvar hasDraggingClass,\n\t\t\t\tupdateZoomable = function() {\n\t\t\t\t\tif(self.mouseZoomedIn) {\n\t\t\t\t\t\tframework.removeClass(template, 'pswp--zoomed-in');\n\t\t\t\t\t\tself.mouseZoomedIn = false;\n\t\t\t\t\t}\n\t\t\t\t\tif(_currZoomLevel < 1) {\n\t\t\t\t\t\tframework.addClass(template, 'pswp--zoom-allowed');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tframework.removeClass(template, 'pswp--zoom-allowed');\n\t\t\t\t\t}\n\t\t\t\t\tremoveDraggingClass();\n\t\t\t\t},\n\t\t\t\tremoveDraggingClass = function() {\n\t\t\t\t\tif(hasDraggingClass) {\n\t\t\t\t\t\tframework.removeClass(template, 'pswp--dragging');\n\t\t\t\t\t\thasDraggingClass = false;\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t_listen('resize' , updateZoomable);\n\t\t\t_listen('afterChange' , updateZoomable);\n\t\t\t_listen('pointerDown', function() {\n\t\t\t\tif(self.mouseZoomedIn) {\n\t\t\t\t\thasDraggingClass = true;\n\t\t\t\t\tframework.addClass(template, 'pswp--dragging');\n\t\t\t\t}\n\t\t\t});\n\t\t\t_listen('pointerUp', removeDraggingClass);\n\n\t\t\tif(!onInit) {\n\t\t\t\tupdateZoomable();\n\t\t\t}\n\t\t\t\n\t\t},\n\n\t\thandleMouseWheel: function(e) {\n\n\t\t\tif(_currZoomLevel <= self.currItem.fitRatio) {\n\t\t\t\tif( _options.modal ) {\n\n\t\t\t\t\tif (!_options.closeOnScroll || _numAnimations || _isDragging) {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t} else if(_transformKey && Math.abs(e.deltaY) > 2) {\n\t\t\t\t\t\t// close PhotoSwipe\n\t\t\t\t\t\t// if browser supports transforms & scroll changed enough\n\t\t\t\t\t\t_closedByScroll = true;\n\t\t\t\t\t\tself.close();\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t// allow just one event to fire\n\t\t\te.stopPropagation();\n\n\t\t\t// https://developer.mozilla.org/en-US/docs/Web/Events/wheel\n\t\t\t_wheelDelta.x = 0;\n\n\t\t\tif('deltaX' in e) {\n\t\t\t\tif(e.deltaMode === 1 /* DOM_DELTA_LINE */) {\n\t\t\t\t\t// 18 - average line height\n\t\t\t\t\t_wheelDelta.x = e.deltaX * 18;\n\t\t\t\t\t_wheelDelta.y = e.deltaY * 18;\n\t\t\t\t} else {\n\t\t\t\t\t_wheelDelta.x = e.deltaX;\n\t\t\t\t\t_wheelDelta.y = e.deltaY;\n\t\t\t\t}\n\t\t\t} else if('wheelDelta' in e) {\n\t\t\t\tif(e.wheelDeltaX) {\n\t\t\t\t\t_wheelDelta.x = -0.16 * e.wheelDeltaX;\n\t\t\t\t}\n\t\t\t\tif(e.wheelDeltaY) {\n\t\t\t\t\t_wheelDelta.y = -0.16 * e.wheelDeltaY;\n\t\t\t\t} else {\n\t\t\t\t\t_wheelDelta.y = -0.16 * e.wheelDelta;\n\t\t\t\t}\n\t\t\t} else if('detail' in e) {\n\t\t\t\t_wheelDelta.y = e.detail;\n\t\t\t} else {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t_calculatePanBounds(_currZoomLevel, true);\n\n\t\t\tvar newPanX = _panOffset.x - _wheelDelta.x,\n\t\t\t\tnewPanY = _panOffset.y - _wheelDelta.y;\n\n\t\t\t// only prevent scrolling in nonmodal mode when not at edges\n\t\t\tif (_options.modal ||\n\t\t\t\t(\n\t\t\t\tnewPanX <= _currPanBounds.min.x && newPanX >= _currPanBounds.max.x &&\n\t\t\t\tnewPanY <= _currPanBounds.min.y && newPanY >= _currPanBounds.max.y\n\t\t\t\t) ) {\n\t\t\t\te.preventDefault();\n\t\t\t}\n\n\t\t\t// TODO: use rAF instead of mousewheel?\n\t\t\tself.panTo(newPanX, newPanY);\n\t\t},\n\n\t\ttoggleDesktopZoom: function(centerPoint) {\n\t\t\tcenterPoint = centerPoint || {x:_viewportSize.x/2 + _offset.x, y:_viewportSize.y/2 + _offset.y };\n\n\t\t\tvar doubleTapZoomLevel = _options.getDoubleTapZoom(true, self.currItem);\n\t\t\tvar zoomOut = _currZoomLevel === doubleTapZoomLevel;\n\t\t\t\n\t\t\tself.mouseZoomedIn = !zoomOut;\n\n\t\t\tself.zoomTo(zoomOut ? self.currItem.initialZoomLevel : doubleTapZoomLevel, centerPoint, 333);\n\t\t\tframework[ (!zoomOut ? 'add' : 'remove') + 'Class'](template, 'pswp--zoomed-in');\n\t\t}\n\n\t}\n});\n\n\n/*>>desktop-zoom*/\n\n/*>>history*/\n/**\n *\n * history.js:\n *\n * - Back button to close gallery.\n * \n * - Unique URL for each slide: example.com/&pid=1&gid=3\n *   (where PID is picture index, and GID and gallery index)\n *   \n * - Switch URL when slides change.\n * \n */\n\n\nvar _historyDefaultOptions = {\n\thistory: true,\n\tgalleryUID: 1\n};\n\nvar _historyUpdateTimeout,\n\t_hashChangeTimeout,\n\t_hashAnimCheckTimeout,\n\t_hashChangedByScript,\n\t_hashChangedByHistory,\n\t_hashReseted,\n\t_initialHash,\n\t_historyChanged,\n\t_closedFromURL,\n\t_urlChangedOnce,\n\t_windowLoc,\n\n\t_supportsPushState,\n\n\t_getHash = function() {\n\t\treturn _windowLoc.hash.substring(1);\n\t},\n\t_cleanHistoryTimeouts = function() {\n\n\t\tif(_historyUpdateTimeout) {\n\t\t\tclearTimeout(_historyUpdateTimeout);\n\t\t}\n\n\t\tif(_hashAnimCheckTimeout) {\n\t\t\tclearTimeout(_hashAnimCheckTimeout);\n\t\t}\n\t},\n\n\t// pid - Picture index\n\t// gid - Gallery index\n\t_parseItemIndexFromURL = function() {\n\t\tvar hash = _getHash(),\n\t\t\tparams = {};\n\n\t\tif(hash.length < 5) { // pid=1\n\t\t\treturn params;\n\t\t}\n\n\t\tvar i, vars = hash.split('&');\n\t\tfor (i = 0; i < vars.length; i++) {\n\t\t\tif(!vars[i]) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tvar pair = vars[i].split('=');\t\n\t\t\tif(pair.length < 2) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tparams[pair[0]] = pair[1];\n\t\t}\n\t\tif(_options.galleryPIDs) {\n\t\t\t// detect custom pid in hash and search for it among the items collection\n\t\t\tvar searchfor = params.pid;\n\t\t\tparams.pid = 0; // if custom pid cannot be found, fallback to the first item\n\t\t\tfor(i = 0; i < _items.length; i++) {\n\t\t\t\tif(_items[i].pid === searchfor) {\n\t\t\t\t\tparams.pid = i;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tparams.pid = parseInt(params.pid,10)-1;\n\t\t}\n\t\tif( params.pid < 0 ) {\n\t\t\tparams.pid = 0;\n\t\t}\n\t\treturn params;\n\t},\n\t_updateHash = function() {\n\n\t\tif(_hashAnimCheckTimeout) {\n\t\t\tclearTimeout(_hashAnimCheckTimeout);\n\t\t}\n\n\n\t\tif(_numAnimations || _isDragging) {\n\t\t\t// changing browser URL forces layout/paint in some browsers, which causes noticable lag during animation\n\t\t\t// that's why we update hash only when no animations running\n\t\t\t_hashAnimCheckTimeout = setTimeout(_updateHash, 500);\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tif(_hashChangedByScript) {\n\t\t\tclearTimeout(_hashChangeTimeout);\n\t\t} else {\n\t\t\t_hashChangedByScript = true;\n\t\t}\n\n\n\t\tvar pid = (_currentItemIndex + 1);\n\t\tvar item = _getItemAt( _currentItemIndex );\n\t\tif(item.hasOwnProperty('pid')) {\n\t\t\t// carry forward any custom pid assigned to the item\n\t\t\tpid = item.pid;\n\t\t}\n\t\tvar newHash = _initialHash + '&'  +  'gid=' + _options.galleryUID + '&' + 'pid=' + pid;\n\n\t\tif(!_historyChanged) {\n\t\t\tif(_windowLoc.hash.indexOf(newHash) === -1) {\n\t\t\t\t_urlChangedOnce = true;\n\t\t\t}\n\t\t\t// first time - add new hisory record, then just replace\n\t\t}\n\n\t\tvar newURL = _windowLoc.href.split('#')[0] + '#' +  newHash;\n\n\t\tif( _supportsPushState ) {\n\n\t\t\tif('#' + newHash !== window.location.hash) {\n\t\t\t\thistory[_historyChanged ? 'replaceState' : 'pushState']('', document.title, newURL);\n\t\t\t}\n\n\t\t} else {\n\t\t\tif(_historyChanged) {\n\t\t\t\t_windowLoc.replace( newURL );\n\t\t\t} else {\n\t\t\t\t_windowLoc.hash = newHash;\n\t\t\t}\n\t\t}\n\t\t\n\t\t\n\n\t\t_historyChanged = true;\n\t\t_hashChangeTimeout = setTimeout(function() {\n\t\t\t_hashChangedByScript = false;\n\t\t}, 60);\n\t};\n\n\n\n\t\n\n_registerModule('History', {\n\n\t\n\n\tpublicMethods: {\n\t\tinitHistory: function() {\n\n\t\t\tframework.extend(_options, _historyDefaultOptions, true);\n\n\t\t\tif( !_options.history ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\n\t\t\t_windowLoc = window.location;\n\t\t\t_urlChangedOnce = false;\n\t\t\t_closedFromURL = false;\n\t\t\t_historyChanged = false;\n\t\t\t_initialHash = _getHash();\n\t\t\t_supportsPushState = ('pushState' in history);\n\n\n\t\t\tif(_initialHash.indexOf('gid=') > -1) {\n\t\t\t\t_initialHash = _initialHash.split('&gid=')[0];\n\t\t\t\t_initialHash = _initialHash.split('?gid=')[0];\n\t\t\t}\n\t\t\t\n\n\t\t\t_listen('afterChange', self.updateURL);\n\t\t\t_listen('unbindEvents', function() {\n\t\t\t\tframework.unbind(window, 'hashchange', self.onHashChange);\n\t\t\t});\n\n\n\t\t\tvar returnToOriginal = function() {\n\t\t\t\t_hashReseted = true;\n\t\t\t\tif(!_closedFromURL) {\n\n\t\t\t\t\tif(_urlChangedOnce) {\n\t\t\t\t\t\thistory.back();\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif(_initialHash) {\n\t\t\t\t\t\t\t_windowLoc.hash = _initialHash;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (_supportsPushState) {\n\n\t\t\t\t\t\t\t\t// remove hash from url without refreshing it or scrolling to top\n\t\t\t\t\t\t\t\thistory.pushState('', document.title,  _windowLoc.pathname + _windowLoc.search );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t_windowLoc.hash = '';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}\n\n\t\t\t\t_cleanHistoryTimeouts();\n\t\t\t};\n\n\n\t\t\t_listen('unbindEvents', function() {\n\t\t\t\tif(_closedByScroll) {\n\t\t\t\t\t// if PhotoSwipe is closed by scroll, we go \"back\" before the closing animation starts\n\t\t\t\t\t// this is done to keep the scroll position\n\t\t\t\t\treturnToOriginal();\n\t\t\t\t}\n\t\t\t});\n\t\t\t_listen('destroy', function() {\n\t\t\t\tif(!_hashReseted) {\n\t\t\t\t\treturnToOriginal();\n\t\t\t\t}\n\t\t\t});\n\t\t\t_listen('firstUpdate', function() {\n\t\t\t\t_currentItemIndex = _parseItemIndexFromURL().pid;\n\t\t\t});\n\n\t\t\t\n\n\t\t\t\n\t\t\tvar index = _initialHash.indexOf('pid=');\n\t\t\tif(index > -1) {\n\t\t\t\t_initialHash = _initialHash.substring(0, index);\n\t\t\t\tif(_initialHash.slice(-1) === '&') {\n\t\t\t\t\t_initialHash = _initialHash.slice(0, -1);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\n\t\t\tsetTimeout(function() {\n\t\t\t\tif(_isOpen) { // hasn't destroyed yet\n\t\t\t\t\tframework.bind(window, 'hashchange', self.onHashChange);\n\t\t\t\t}\n\t\t\t}, 40);\n\t\t\t\n\t\t},\n\t\tonHashChange: function() {\n\n\t\t\tif(_getHash() === _initialHash) {\n\n\t\t\t\t_closedFromURL = true;\n\t\t\t\tself.close();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif(!_hashChangedByScript) {\n\n\t\t\t\t_hashChangedByHistory = true;\n\t\t\t\tself.goTo( _parseItemIndexFromURL().pid );\n\t\t\t\t_hashChangedByHistory = false;\n\t\t\t}\n\t\t\t\n\t\t},\n\t\tupdateURL: function() {\n\n\t\t\t// Delay the update of URL, to avoid lag during transition, \n\t\t\t// and to not to trigger actions like \"refresh page sound\" or \"blinking favicon\" to often\n\t\t\t\n\t\t\t_cleanHistoryTimeouts();\n\t\t\t\n\n\t\t\tif(_hashChangedByHistory) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif(!_historyChanged) {\n\t\t\t\t_updateHash(); // first time\n\t\t\t} else {\n\t\t\t\t_historyUpdateTimeout = setTimeout(_updateHash, 800);\n\t\t\t}\n\t\t}\n\t\n\t}\n});\n\n\n/*>>history*/\n\tframework.extend(self, publicMethods); };\n\treturn PhotoSwipe;\n});","/*! PhotoSwipe Default UI - 4.1.3 - 2019-01-08\n* http://photoswipe.com\n* Copyright (c) 2019 Dmitry Semenov; */\n/**\n*\n* UI on top of main sliding area (caption, arrows, close button, etc.).\n* Built just using public methods/properties of PhotoSwipe.\n* \n*/\n(function (root, factory) { \n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine(factory);\n\t} else if (typeof exports === 'object') {\n\t\tmodule.exports = factory();\n\t} else {\n\t\troot.PhotoSwipeUI_Default = factory();\n\t}\n})(this, function () {\n\n\t'use strict';\n\n\n\nvar PhotoSwipeUI_Default =\n function(pswp, framework) {\n\n\tvar ui = this;\n\tvar _overlayUIUpdated = false,\n\t\t_controlsVisible = true,\n\t\t_fullscrenAPI,\n\t\t_controls,\n\t\t_captionContainer,\n\t\t_fakeCaptionContainer,\n\t\t_indexIndicator,\n\t\t_shareButton,\n\t\t_shareModal,\n\t\t_shareModalHidden = true,\n\t\t_initalCloseOnScrollValue,\n\t\t_isIdle,\n\t\t_listen,\n\n\t\t_loadingIndicator,\n\t\t_loadingIndicatorHidden,\n\t\t_loadingIndicatorTimeout,\n\n\t\t_galleryHasOneSlide,\n\n\t\t_options,\n\t\t_defaultUIOptions = {\n\t\t\tbarsSize: {top:44, bottom:'auto'},\n\t\t\tcloseElClasses: ['item', 'caption', 'zoom-wrap', 'ui', 'top-bar'], \n\t\t\ttimeToIdle: 4000, \n\t\t\ttimeToIdleOutside: 1000,\n\t\t\tloadingIndicatorDelay: 1000, // 2s\n\t\t\t\n\t\t\taddCaptionHTMLFn: function(item, captionEl /*, isFake */) {\n\t\t\t\tif(!item.title) {\n\t\t\t\t\tcaptionEl.children[0].innerHTML = '';\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tcaptionEl.children[0].innerHTML = item.title;\n\t\t\t\treturn true;\n\t\t\t},\n\n\t\t\tcloseEl:true,\n\t\t\tcaptionEl: true,\n\t\t\tfullscreenEl: true,\n\t\t\tzoomEl: true,\n\t\t\tshareEl: true,\n\t\t\tcounterEl: true,\n\t\t\tarrowEl: true,\n\t\t\tpreloaderEl: true,\n\n\t\t\ttapToClose: false,\n\t\t\ttapToToggleControls: true,\n\n\t\t\tclickToCloseNonZoomable: true,\n\n\t\t\tshareButtons: [\n\t\t\t\t{id:'facebook', label:'Share on Facebook', url:'https://www.facebook.com/sharer/sharer.php?u={{url}}'},\n\t\t\t\t{id:'twitter', label:'Tweet', url:'https://twitter.com/intent/tweet?text={{text}}&url={{url}}'},\n\t\t\t\t{id:'pinterest', label:'Pin it', url:'http://www.pinterest.com/pin/create/button/'+\n\t\t\t\t\t\t\t\t\t\t\t\t\t'?url={{url}}&media={{image_url}}&description={{text}}'},\n\t\t\t\t{id:'download', label:'Download image', url:'{{raw_image_url}}', download:true}\n\t\t\t],\n\t\t\tgetImageURLForShare: function( /* shareButtonData */ ) {\n\t\t\t\treturn pswp.currItem.src || '';\n\t\t\t},\n\t\t\tgetPageURLForShare: function( /* shareButtonData */ ) {\n\t\t\t\treturn window.location.href;\n\t\t\t},\n\t\t\tgetTextForShare: function( /* shareButtonData */ ) {\n\t\t\t\treturn pswp.currItem.title || '';\n\t\t\t},\n\t\t\t\t\n\t\t\tindexIndicatorSep: ' / ',\n\t\t\tfitControlsWidth: 1200\n\n\t\t},\n\t\t_blockControlsTap,\n\t\t_blockControlsTapTimeout;\n\n\n\n\tvar _onControlsTap = function(e) {\n\t\t\tif(_blockControlsTap) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\n\t\t\te = e || window.event;\n\n\t\t\tif(_options.timeToIdle && _options.mouseUsed && !_isIdle) {\n\t\t\t\t// reset idle timer\n\t\t\t\t_onIdleMouseMove();\n\t\t\t}\n\n\n\t\t\tvar target = e.target || e.srcElement,\n\t\t\t\tuiElement,\n\t\t\t\tclickedClass = target.getAttribute('class') || '',\n\t\t\t\tfound;\n\n\t\t\tfor(var i = 0; i < _uiElements.length; i++) {\n\t\t\t\tuiElement = _uiElements[i];\n\t\t\t\tif(uiElement.onTap && clickedClass.indexOf('pswp__' + uiElement.name ) > -1 ) {\n\t\t\t\t\tuiElement.onTap();\n\t\t\t\t\tfound = true;\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(found) {\n\t\t\t\tif(e.stopPropagation) {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t\t_blockControlsTap = true;\n\n\t\t\t\t// Some versions of Android don't prevent ghost click event \n\t\t\t\t// when preventDefault() was called on touchstart and/or touchend.\n\t\t\t\t// \n\t\t\t\t// This happens on v4.3, 4.2, 4.1, \n\t\t\t\t// older versions strangely work correctly, \n\t\t\t\t// but just in case we add delay on all of them)\t\n\t\t\t\tvar tapDelay = framework.features.isOldAndroid ? 600 : 30;\n\t\t\t\t_blockControlsTapTimeout = setTimeout(function() {\n\t\t\t\t\t_blockControlsTap = false;\n\t\t\t\t}, tapDelay);\n\t\t\t}\n\n\t\t},\n\t\t_fitControlsInViewport = function() {\n\t\t\treturn !pswp.likelyTouchDevice || _options.mouseUsed || screen.width > _options.fitControlsWidth;\n\t\t},\n\t\t_togglePswpClass = function(el, cName, add) {\n\t\t\tframework[ (add ? 'add' : 'remove') + 'Class' ](el, 'pswp__' + cName);\n\t\t},\n\n\t\t// add class when there is just one item in the gallery\n\t\t// (by default it hides left/right arrows and 1ofX counter)\n\t\t_countNumItems = function() {\n\t\t\tvar hasOneSlide = (_options.getNumItemsFn() === 1);\n\n\t\t\tif(hasOneSlide !== _galleryHasOneSlide) {\n\t\t\t\t_togglePswpClass(_controls, 'ui--one-slide', hasOneSlide);\n\t\t\t\t_galleryHasOneSlide = hasOneSlide;\n\t\t\t}\n\t\t},\n\t\t_toggleShareModalClass = function() {\n\t\t\t_togglePswpClass(_shareModal, 'share-modal--hidden', _shareModalHidden);\n\t\t},\n\t\t_toggleShareModal = function() {\n\n\t\t\t_shareModalHidden = !_shareModalHidden;\n\t\t\t\n\t\t\t\n\t\t\tif(!_shareModalHidden) {\n\t\t\t\t_toggleShareModalClass();\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tif(!_shareModalHidden) {\n\t\t\t\t\t\tframework.addClass(_shareModal, 'pswp__share-modal--fade-in');\n\t\t\t\t\t}\n\t\t\t\t}, 30);\n\t\t\t} else {\n\t\t\t\tframework.removeClass(_shareModal, 'pswp__share-modal--fade-in');\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tif(_shareModalHidden) {\n\t\t\t\t\t\t_toggleShareModalClass();\n\t\t\t\t\t}\n\t\t\t\t}, 300);\n\t\t\t}\n\t\t\t\n\t\t\tif(!_shareModalHidden) {\n\t\t\t\t_updateShareURLs();\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\n\t\t_openWindowPopup = function(e) {\n\t\t\te = e || window.event;\n\t\t\tvar target = e.target || e.srcElement;\n\n\t\t\tpswp.shout('shareLinkClick', e, target);\n\n\t\t\tif(!target.href) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif( target.hasAttribute('download') ) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\twindow.open(target.href, 'pswp_share', 'scrollbars=yes,resizable=yes,toolbar=no,'+\n\t\t\t\t\t\t\t\t\t\t'location=yes,width=550,height=420,top=100,left=' + \n\t\t\t\t\t\t\t\t\t\t(window.screen ? Math.round(screen.width / 2 - 275) : 100)  );\n\n\t\t\tif(!_shareModalHidden) {\n\t\t\t\t_toggleShareModal();\n\t\t\t}\n\t\t\t\n\t\t\treturn false;\n\t\t},\n\t\t_updateShareURLs = function() {\n\t\t\tvar shareButtonOut = '',\n\t\t\t\tshareButtonData,\n\t\t\t\tshareURL,\n\t\t\t\timage_url,\n\t\t\t\tpage_url,\n\t\t\t\tshare_text;\n\n\t\t\tfor(var i = 0; i < _options.shareButtons.length; i++) {\n\t\t\t\tshareButtonData = _options.shareButtons[i];\n\n\t\t\t\timage_url = _options.getImageURLForShare(shareButtonData);\n\t\t\t\tpage_url = _options.getPageURLForShare(shareButtonData);\n\t\t\t\tshare_text = _options.getTextForShare(shareButtonData);\n\n\t\t\t\tshareURL = shareButtonData.url.replace('{{url}}', encodeURIComponent(page_url) )\n\t\t\t\t\t\t\t\t\t.replace('{{image_url}}', encodeURIComponent(image_url) )\n\t\t\t\t\t\t\t\t\t.replace('{{raw_image_url}}', image_url )\n\t\t\t\t\t\t\t\t\t.replace('{{text}}', encodeURIComponent(share_text) );\n\n\t\t\t\tshareButtonOut += '<a href=\"' + shareURL + '\" target=\"_blank\" '+\n\t\t\t\t\t\t\t\t\t'class=\"pswp__share--' + shareButtonData.id + '\"' +\n\t\t\t\t\t\t\t\t\t(shareButtonData.download ? 'download' : '') + '>' + \n\t\t\t\t\t\t\t\t\tshareButtonData.label + '</a>';\n\n\t\t\t\tif(_options.parseShareButtonOut) {\n\t\t\t\t\tshareButtonOut = _options.parseShareButtonOut(shareButtonData, shareButtonOut);\n\t\t\t\t}\n\t\t\t}\n\t\t\t_shareModal.children[0].innerHTML = shareButtonOut;\n\t\t\t_shareModal.children[0].onclick = _openWindowPopup;\n\n\t\t},\n\t\t_hasCloseClass = function(target) {\n\t\t\tfor(var  i = 0; i < _options.closeElClasses.length; i++) {\n\t\t\t\tif( framework.hasClass(target, 'pswp__' + _options.closeElClasses[i]) ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_idleInterval,\n\t\t_idleTimer,\n\t\t_idleIncrement = 0,\n\t\t_onIdleMouseMove = function() {\n\t\t\tclearTimeout(_idleTimer);\n\t\t\t_idleIncrement = 0;\n\t\t\tif(_isIdle) {\n\t\t\t\tui.setIdle(false);\n\t\t\t}\n\t\t},\n\t\t_onMouseLeaveWindow = function(e) {\n\t\t\te = e ? e : window.event;\n\t\t\tvar from = e.relatedTarget || e.toElement;\n\t\t\tif (!from || from.nodeName === 'HTML') {\n\t\t\t\tclearTimeout(_idleTimer);\n\t\t\t\t_idleTimer = setTimeout(function() {\n\t\t\t\t\tui.setIdle(true);\n\t\t\t\t}, _options.timeToIdleOutside);\n\t\t\t}\n\t\t},\n\t\t_setupFullscreenAPI = function() {\n\t\t\tif(_options.fullscreenEl && !framework.features.isOldAndroid) {\n\t\t\t\tif(!_fullscrenAPI) {\n\t\t\t\t\t_fullscrenAPI = ui.getFullscreenAPI();\n\t\t\t\t}\n\t\t\t\tif(_fullscrenAPI) {\n\t\t\t\t\tframework.bind(document, _fullscrenAPI.eventK, ui.updateFullscreen);\n\t\t\t\t\tui.updateFullscreen();\n\t\t\t\t\tframework.addClass(pswp.template, 'pswp--supports-fs');\n\t\t\t\t} else {\n\t\t\t\t\tframework.removeClass(pswp.template, 'pswp--supports-fs');\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_setupLoadingIndicator = function() {\n\t\t\t// Setup loading indicator\n\t\t\tif(_options.preloaderEl) {\n\t\t\t\n\t\t\t\t_toggleLoadingIndicator(true);\n\n\t\t\t\t_listen('beforeChange', function() {\n\n\t\t\t\t\tclearTimeout(_loadingIndicatorTimeout);\n\n\t\t\t\t\t// display loading indicator with delay\n\t\t\t\t\t_loadingIndicatorTimeout = setTimeout(function() {\n\n\t\t\t\t\t\tif(pswp.currItem && pswp.currItem.loading) {\n\n\t\t\t\t\t\t\tif( !pswp.allowProgressiveImg() || (pswp.currItem.img && !pswp.currItem.img.naturalWidth)  ) {\n\t\t\t\t\t\t\t\t// show preloader if progressive loading is not enabled, \n\t\t\t\t\t\t\t\t// or image width is not defined yet (because of slow connection)\n\t\t\t\t\t\t\t\t_toggleLoadingIndicator(false); \n\t\t\t\t\t\t\t\t// items-controller.js function allowProgressiveImg\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t_toggleLoadingIndicator(true); // hide preloader\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}, _options.loadingIndicatorDelay);\n\t\t\t\t\t\n\t\t\t\t});\n\t\t\t\t_listen('imageLoadComplete', function(index, item) {\n\t\t\t\t\tif(pswp.currItem === item) {\n\t\t\t\t\t\t_toggleLoadingIndicator(true);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t}\n\t\t},\n\t\t_toggleLoadingIndicator = function(hide) {\n\t\t\tif( _loadingIndicatorHidden !== hide ) {\n\t\t\t\t_togglePswpClass(_loadingIndicator, 'preloader--active', !hide);\n\t\t\t\t_loadingIndicatorHidden = hide;\n\t\t\t}\n\t\t},\n\t\t_applyNavBarGaps = function(item) {\n\t\t\tvar gap = item.vGap;\n\n\t\t\tif( _fitControlsInViewport() ) {\n\t\t\t\t\n\t\t\t\tvar bars = _options.barsSize; \n\t\t\t\tif(_options.captionEl && bars.bottom === 'auto') {\n\t\t\t\t\tif(!_fakeCaptionContainer) {\n\t\t\t\t\t\t_fakeCaptionContainer = framework.createEl('pswp__caption pswp__caption--fake');\n\t\t\t\t\t\t_fakeCaptionContainer.appendChild( framework.createEl('pswp__caption__center') );\n\t\t\t\t\t\t_controls.insertBefore(_fakeCaptionContainer, _captionContainer);\n\t\t\t\t\t\tframework.addClass(_controls, 'pswp__ui--fit');\n\t\t\t\t\t}\n\t\t\t\t\tif( _options.addCaptionHTMLFn(item, _fakeCaptionContainer, true) ) {\n\n\t\t\t\t\t\tvar captionSize = _fakeCaptionContainer.clientHeight;\n\t\t\t\t\t\tgap.bottom = parseInt(captionSize,10) || 44;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tgap.bottom = bars.top; // if no caption, set size of bottom gap to size of top\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tgap.bottom = bars.bottom === 'auto' ? 0 : bars.bottom;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// height of top bar is static, no need to calculate it\n\t\t\t\tgap.top = bars.top;\n\t\t\t} else {\n\t\t\t\tgap.top = gap.bottom = 0;\n\t\t\t}\n\t\t},\n\t\t_setupIdle = function() {\n\t\t\t// Hide controls when mouse is used\n\t\t\tif(_options.timeToIdle) {\n\t\t\t\t_listen('mouseUsed', function() {\n\t\t\t\t\t\n\t\t\t\t\tframework.bind(document, 'mousemove', _onIdleMouseMove);\n\t\t\t\t\tframework.bind(document, 'mouseout', _onMouseLeaveWindow);\n\n\t\t\t\t\t_idleInterval = setInterval(function() {\n\t\t\t\t\t\t_idleIncrement++;\n\t\t\t\t\t\tif(_idleIncrement === 2) {\n\t\t\t\t\t\t\tui.setIdle(true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}, _options.timeToIdle / 2);\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t_setupHidingControlsDuringGestures = function() {\n\n\t\t\t// Hide controls on vertical drag\n\t\t\t_listen('onVerticalDrag', function(now) {\n\t\t\t\tif(_controlsVisible && now < 0.95) {\n\t\t\t\t\tui.hideControls();\n\t\t\t\t} else if(!_controlsVisible && now >= 0.95) {\n\t\t\t\t\tui.showControls();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Hide controls when pinching to close\n\t\t\tvar pinchControlsHidden;\n\t\t\t_listen('onPinchClose' , function(now) {\n\t\t\t\tif(_controlsVisible && now < 0.9) {\n\t\t\t\t\tui.hideControls();\n\t\t\t\t\tpinchControlsHidden = true;\n\t\t\t\t} else if(pinchControlsHidden && !_controlsVisible && now > 0.9) {\n\t\t\t\t\tui.showControls();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t_listen('zoomGestureEnded', function() {\n\t\t\t\tpinchControlsHidden = false;\n\t\t\t\tif(pinchControlsHidden && !_controlsVisible) {\n\t\t\t\t\tui.showControls();\n\t\t\t\t}\n\t\t\t});\n\n\t\t};\n\n\n\n\tvar _uiElements = [\n\t\t{ \n\t\t\tname: 'caption', \n\t\t\toption: 'captionEl',\n\t\t\tonInit: function(el) {  \n\t\t\t\t_captionContainer = el; \n\t\t\t} \n\t\t},\n\t\t{ \n\t\t\tname: 'share-modal', \n\t\t\toption: 'shareEl',\n\t\t\tonInit: function(el) {  \n\t\t\t\t_shareModal = el;\n\t\t\t},\n\t\t\tonTap: function() {\n\t\t\t\t_toggleShareModal();\n\t\t\t} \n\t\t},\n\t\t{ \n\t\t\tname: 'button--share', \n\t\t\toption: 'shareEl',\n\t\t\tonInit: function(el) { \n\t\t\t\t_shareButton = el;\n\t\t\t},\n\t\t\tonTap: function() {\n\t\t\t\t_toggleShareModal();\n\t\t\t} \n\t\t},\n\t\t{ \n\t\t\tname: 'button--zoom', \n\t\t\toption: 'zoomEl',\n\t\t\tonTap: pswp.toggleDesktopZoom\n\t\t},\n\t\t{ \n\t\t\tname: 'counter', \n\t\t\toption: 'counterEl',\n\t\t\tonInit: function(el) {  \n\t\t\t\t_indexIndicator = el;\n\t\t\t} \n\t\t},\n\t\t{ \n\t\t\tname: 'button--close', \n\t\t\toption: 'closeEl',\n\t\t\tonTap: pswp.close\n\t\t},\n\t\t{ \n\t\t\tname: 'button--arrow--left', \n\t\t\toption: 'arrowEl',\n\t\t\tonTap: pswp.prev\n\t\t},\n\t\t{ \n\t\t\tname: 'button--arrow--right', \n\t\t\toption: 'arrowEl',\n\t\t\tonTap: pswp.next\n\t\t},\n\t\t{ \n\t\t\tname: 'button--fs', \n\t\t\toption: 'fullscreenEl',\n\t\t\tonTap: function() {  \n\t\t\t\tif(_fullscrenAPI.isFullscreen()) {\n\t\t\t\t\t_fullscrenAPI.exit();\n\t\t\t\t} else {\n\t\t\t\t\t_fullscrenAPI.enter();\n\t\t\t\t}\n\t\t\t} \n\t\t},\n\t\t{ \n\t\t\tname: 'preloader', \n\t\t\toption: 'preloaderEl',\n\t\t\tonInit: function(el) {  \n\t\t\t\t_loadingIndicator = el;\n\t\t\t} \n\t\t}\n\n\t];\n\n\tvar _setupUIElements = function() {\n\t\tvar item,\n\t\t\tclassAttr,\n\t\t\tuiElement;\n\n\t\tvar loopThroughChildElements = function(sChildren) {\n\t\t\tif(!sChildren) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar l = sChildren.length;\n\t\t\tfor(var i = 0; i < l; i++) {\n\t\t\t\titem = sChildren[i];\n\t\t\t\tclassAttr = item.className;\n\n\t\t\t\tfor(var a = 0; a < _uiElements.length; a++) {\n\t\t\t\t\tuiElement = _uiElements[a];\n\n\t\t\t\t\tif(classAttr.indexOf('pswp__' + uiElement.name) > -1  ) {\n\n\t\t\t\t\t\tif( _options[uiElement.option] ) { // if element is not disabled from options\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tframework.removeClass(item, 'pswp__element--disabled');\n\t\t\t\t\t\t\tif(uiElement.onInit) {\n\t\t\t\t\t\t\t\tuiElement.onInit(item);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t//item.style.display = 'block';\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tframework.addClass(item, 'pswp__element--disabled');\n\t\t\t\t\t\t\t//item.style.display = 'none';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tloopThroughChildElements(_controls.children);\n\n\t\tvar topBar =  framework.getChildByClass(_controls, 'pswp__top-bar');\n\t\tif(topBar) {\n\t\t\tloopThroughChildElements( topBar.children );\n\t\t}\n\t};\n\n\n\t\n\n\tui.init = function() {\n\n\t\t// extend options\n\t\tframework.extend(pswp.options, _defaultUIOptions, true);\n\n\t\t// create local link for fast access\n\t\t_options = pswp.options;\n\n\t\t// find pswp__ui element\n\t\t_controls = framework.getChildByClass(pswp.scrollWrap, 'pswp__ui');\n\n\t\t// create local link\n\t\t_listen = pswp.listen;\n\n\n\t\t_setupHidingControlsDuringGestures();\n\n\t\t// update controls when slides change\n\t\t_listen('beforeChange', ui.update);\n\n\t\t// toggle zoom on double-tap\n\t\t_listen('doubleTap', function(point) {\n\t\t\tvar initialZoomLevel = pswp.currItem.initialZoomLevel;\n\t\t\tif(pswp.getZoomLevel() !== initialZoomLevel) {\n\t\t\t\tpswp.zoomTo(initialZoomLevel, point, 333);\n\t\t\t} else {\n\t\t\t\tpswp.zoomTo(_options.getDoubleTapZoom(false, pswp.currItem), point, 333);\n\t\t\t}\n\t\t});\n\n\t\t// Allow text selection in caption\n\t\t_listen('preventDragEvent', function(e, isDown, preventObj) {\n\t\t\tvar t = e.target || e.srcElement;\n\t\t\tif(\n\t\t\t\tt && \n\t\t\t\tt.getAttribute('class') && e.type.indexOf('mouse') > -1 && \n\t\t\t\t( t.getAttribute('class').indexOf('__caption') > 0 || (/(SMALL|STRONG|EM)/i).test(t.tagName) ) \n\t\t\t) {\n\t\t\t\tpreventObj.prevent = false;\n\t\t\t}\n\t\t});\n\n\t\t// bind events for UI\n\t\t_listen('bindEvents', function() {\n\t\t\tframework.bind(_controls, 'pswpTap click', _onControlsTap);\n\t\t\tframework.bind(pswp.scrollWrap, 'pswpTap', ui.onGlobalTap);\n\n\t\t\tif(!pswp.likelyTouchDevice) {\n\t\t\t\tframework.bind(pswp.scrollWrap, 'mouseover', ui.onMouseOver);\n\t\t\t}\n\t\t});\n\n\t\t// unbind events for UI\n\t\t_listen('unbindEvents', function() {\n\t\t\tif(!_shareModalHidden) {\n\t\t\t\t_toggleShareModal();\n\t\t\t}\n\n\t\t\tif(_idleInterval) {\n\t\t\t\tclearInterval(_idleInterval);\n\t\t\t}\n\t\t\tframework.unbind(document, 'mouseout', _onMouseLeaveWindow);\n\t\t\tframework.unbind(document, 'mousemove', _onIdleMouseMove);\n\t\t\tframework.unbind(_controls, 'pswpTap click', _onControlsTap);\n\t\t\tframework.unbind(pswp.scrollWrap, 'pswpTap', ui.onGlobalTap);\n\t\t\tframework.unbind(pswp.scrollWrap, 'mouseover', ui.onMouseOver);\n\n\t\t\tif(_fullscrenAPI) {\n\t\t\t\tframework.unbind(document, _fullscrenAPI.eventK, ui.updateFullscreen);\n\t\t\t\tif(_fullscrenAPI.isFullscreen()) {\n\t\t\t\t\t_options.hideAnimationDuration = 0;\n\t\t\t\t\t_fullscrenAPI.exit();\n\t\t\t\t}\n\t\t\t\t_fullscrenAPI = null;\n\t\t\t}\n\t\t});\n\n\n\t\t// clean up things when gallery is destroyed\n\t\t_listen('destroy', function() {\n\t\t\tif(_options.captionEl) {\n\t\t\t\tif(_fakeCaptionContainer) {\n\t\t\t\t\t_controls.removeChild(_fakeCaptionContainer);\n\t\t\t\t}\n\t\t\t\tframework.removeClass(_captionContainer, 'pswp__caption--empty');\n\t\t\t}\n\n\t\t\tif(_shareModal) {\n\t\t\t\t_shareModal.children[0].onclick = null;\n\t\t\t}\n\t\t\tframework.removeClass(_controls, 'pswp__ui--over-close');\n\t\t\tframework.addClass( _controls, 'pswp__ui--hidden');\n\t\t\tui.setIdle(false);\n\t\t});\n\t\t\n\n\t\tif(!_options.showAnimationDuration) {\n\t\t\tframework.removeClass( _controls, 'pswp__ui--hidden');\n\t\t}\n\t\t_listen('initialZoomIn', function() {\n\t\t\tif(_options.showAnimationDuration) {\n\t\t\t\tframework.removeClass( _controls, 'pswp__ui--hidden');\n\t\t\t}\n\t\t});\n\t\t_listen('initialZoomOut', function() {\n\t\t\tframework.addClass( _controls, 'pswp__ui--hidden');\n\t\t});\n\n\t\t_listen('parseVerticalMargin', _applyNavBarGaps);\n\t\t\n\t\t_setupUIElements();\n\n\t\tif(_options.shareEl && _shareButton && _shareModal) {\n\t\t\t_shareModalHidden = true;\n\t\t}\n\n\t\t_countNumItems();\n\n\t\t_setupIdle();\n\n\t\t_setupFullscreenAPI();\n\n\t\t_setupLoadingIndicator();\n\t};\n\n\tui.setIdle = function(isIdle) {\n\t\t_isIdle = isIdle;\n\t\t_togglePswpClass(_controls, 'ui--idle', isIdle);\n\t};\n\n\tui.update = function() {\n\t\t// Don't update UI if it's hidden\n\t\tif(_controlsVisible && pswp.currItem) {\n\t\t\t\n\t\t\tui.updateIndexIndicator();\n\n\t\t\tif(_options.captionEl) {\n\t\t\t\t_options.addCaptionHTMLFn(pswp.currItem, _captionContainer);\n\n\t\t\t\t_togglePswpClass(_captionContainer, 'caption--empty', !pswp.currItem.title);\n\t\t\t}\n\n\t\t\t_overlayUIUpdated = true;\n\n\t\t} else {\n\t\t\t_overlayUIUpdated = false;\n\t\t}\n\n\t\tif(!_shareModalHidden) {\n\t\t\t_toggleShareModal();\n\t\t}\n\n\t\t_countNumItems();\n\t};\n\n\tui.updateFullscreen = function(e) {\n\n\t\tif(e) {\n\t\t\t// some browsers change window scroll position during the fullscreen\n\t\t\t// so PhotoSwipe updates it just in case\n\t\t\tsetTimeout(function() {\n\t\t\t\tpswp.setScrollOffset( 0, framework.getScrollY() );\n\t\t\t}, 50);\n\t\t}\n\t\t\n\t\t// toogle pswp--fs class on root element\n\t\tframework[ (_fullscrenAPI.isFullscreen() ? 'add' : 'remove') + 'Class' ](pswp.template, 'pswp--fs');\n\t};\n\n\tui.updateIndexIndicator = function() {\n\t\tif(_options.counterEl) {\n\t\t\t_indexIndicator.innerHTML = (pswp.getCurrentIndex()+1) + \n\t\t\t\t\t\t\t\t\t\t_options.indexIndicatorSep + \n\t\t\t\t\t\t\t\t\t\t_options.getNumItemsFn();\n\t\t}\n\t};\n\t\n\tui.onGlobalTap = function(e) {\n\t\te = e || window.event;\n\t\tvar target = e.target || e.srcElement;\n\n\t\tif(_blockControlsTap) {\n\t\t\treturn;\n\t\t}\n\n\t\tif(e.detail && e.detail.pointerType === 'mouse') {\n\n\t\t\t// close gallery if clicked outside of the image\n\t\t\tif(_hasCloseClass(target)) {\n\t\t\t\tpswp.close();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif(framework.hasClass(target, 'pswp__img')) {\n\t\t\t\tif(pswp.getZoomLevel() === 1 && pswp.getZoomLevel() <= pswp.currItem.fitRatio) {\n\t\t\t\t\tif(_options.clickToCloseNonZoomable) {\n\t\t\t\t\t\tpswp.close();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tpswp.toggleDesktopZoom(e.detail.releasePoint);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t} else {\n\n\t\t\t// tap anywhere (except buttons) to toggle visibility of controls\n\t\t\tif(_options.tapToToggleControls) {\n\t\t\t\tif(_controlsVisible) {\n\t\t\t\t\tui.hideControls();\n\t\t\t\t} else {\n\t\t\t\t\tui.showControls();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// tap to close gallery\n\t\t\tif(_options.tapToClose && (framework.hasClass(target, 'pswp__img') || _hasCloseClass(target)) ) {\n\t\t\t\tpswp.close();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t}\n\t};\n\tui.onMouseOver = function(e) {\n\t\te = e || window.event;\n\t\tvar target = e.target || e.srcElement;\n\n\t\t// add class when mouse is over an element that should close the gallery\n\t\t_togglePswpClass(_controls, 'ui--over-close', _hasCloseClass(target));\n\t};\n\n\tui.hideControls = function() {\n\t\tframework.addClass(_controls,'pswp__ui--hidden');\n\t\t_controlsVisible = false;\n\t};\n\n\tui.showControls = function() {\n\t\t_controlsVisible = true;\n\t\tif(!_overlayUIUpdated) {\n\t\t\tui.update();\n\t\t}\n\t\tframework.removeClass(_controls,'pswp__ui--hidden');\n\t};\n\n\tui.supportsFullscreen = function() {\n\t\tvar d = document;\n\t\treturn !!(d.exitFullscreen || d.mozCancelFullScreen || d.webkitExitFullscreen || d.msExitFullscreen);\n\t};\n\n\tui.getFullscreenAPI = function() {\n\t\tvar dE = document.documentElement,\n\t\t\tapi,\n\t\t\ttF = 'fullscreenchange';\n\n\t\tif (dE.requestFullscreen) {\n\t\t\tapi = {\n\t\t\t\tenterK: 'requestFullscreen',\n\t\t\t\texitK: 'exitFullscreen',\n\t\t\t\telementK: 'fullscreenElement',\n\t\t\t\teventK: tF\n\t\t\t};\n\n\t\t} else if(dE.mozRequestFullScreen ) {\n\t\t\tapi = {\n\t\t\t\tenterK: 'mozRequestFullScreen',\n\t\t\t\texitK: 'mozCancelFullScreen',\n\t\t\t\telementK: 'mozFullScreenElement',\n\t\t\t\teventK: 'moz' + tF\n\t\t\t};\n\n\t\t\t\n\n\t\t} else if(dE.webkitRequestFullscreen) {\n\t\t\tapi = {\n\t\t\t\tenterK: 'webkitRequestFullscreen',\n\t\t\t\texitK: 'webkitExitFullscreen',\n\t\t\t\telementK: 'webkitFullscreenElement',\n\t\t\t\teventK: 'webkit' + tF\n\t\t\t};\n\n\t\t} else if(dE.msRequestFullscreen) {\n\t\t\tapi = {\n\t\t\t\tenterK: 'msRequestFullscreen',\n\t\t\t\texitK: 'msExitFullscreen',\n\t\t\t\telementK: 'msFullscreenElement',\n\t\t\t\teventK: 'MSFullscreenChange'\n\t\t\t};\n\t\t}\n\n\t\tif(api) {\n\t\t\tapi.enter = function() { \n\t\t\t\t// disable close-on-scroll in fullscreen\n\t\t\t\t_initalCloseOnScrollValue = _options.closeOnScroll; \n\t\t\t\t_options.closeOnScroll = false; \n\n\t\t\t\tif(this.enterK === 'webkitRequestFullscreen') {\n\t\t\t\t\tpswp.template[this.enterK]( Element.ALLOW_KEYBOARD_INPUT );\n\t\t\t\t} else {\n\t\t\t\t\treturn pswp.template[this.enterK](); \n\t\t\t\t}\n\t\t\t};\n\t\t\tapi.exit = function() { \n\t\t\t\t_options.closeOnScroll = _initalCloseOnScrollValue;\n\n\t\t\t\treturn document[this.exitK](); \n\n\t\t\t};\n\t\t\tapi.isFullscreen = function() { return document[this.elementK]; };\n\t\t}\n\n\t\treturn api;\n\t};\n\n\n\n};\nreturn PhotoSwipeUI_Default;\n\n\n});\n","import PhotoSwipe from 'photoswipe';\nimport PhotoSwipeUI_Default from 'photoswipe/dist/photoswipe-ui-default.js';\n\nexport default function lightbox(trigger) {\n    var onThumbnailsClick = function (e) {\n        e.preventDefault();\n\n        var items = [];\n        var index = 0;\n\n        var prevSibling = e.target.closest('.kg-card').previousElementSibling;\n\n        while (prevSibling && (prevSibling.classList.contains('kg-image-card') || prevSibling.classList.contains('kg-gallery-card'))) {\n            var prevItems = [];\n\n            prevSibling.querySelectorAll('img').forEach(function (item) {\n                prevItems.push({\n                    src: item.getAttribute('src'),\n                    msrc: item.getAttribute('src'),\n                    w: item.getAttribute('width'),\n                    h: item.getAttribute('height'),\n                    el: item,\n                })\n\n                index += 1;\n            });\n            prevSibling = prevSibling.previousElementSibling;\n\n            items = prevItems.concat(items);\n        }\n\n        if (e.target.classList.contains('kg-image')) {\n            items.push({\n                src: e.target.getAttribute('src'),\n                msrc: e.target.getAttribute('src'),\n                w: e.target.getAttribute('width'),\n                h: e.target.getAttribute('height'),\n                el: e.target,\n            });\n        } else {\n            var reachedCurrentItem = false;\n\n            e.target.closest('.kg-gallery-card').querySelectorAll('img').forEach(function (item) {\n                items.push({\n                    src: item.getAttribute('src'),\n                    msrc: item.getAttribute('src'),\n                    w: item.getAttribute('width'),\n                    h: item.getAttribute('height'),\n                    el: item,\n                });\n\n                if (!reachedCurrentItem && item !== e.target) {\n                    index += 1;\n                } else {\n                    reachedCurrentItem = true;\n                }\n            });\n        }\n\n        var nextSibling = e.target.closest('.kg-card').nextElementSibling;\n\n        while (nextSibling && (nextSibling.classList.contains('kg-image-card') || nextSibling.classList.contains('kg-gallery-card'))) {\n            nextSibling.querySelectorAll('img').forEach(function (item) {\n                items.push({\n                    src: item.getAttribute('src'),\n                    msrc: item.getAttribute('src'),\n                    w: item.getAttribute('width'),\n                    h: item.getAttribute('height'),\n                    el: item,\n                })\n            });\n            nextSibling = nextSibling.nextElementSibling;\n        }\n\n        var pswpElement = document.querySelectorAll('.pswp')[0];\n\n        var options = {\n            bgOpacity: 0.9,\n            closeOnScroll: true,\n            fullscreenEl: false,\n            history: false,\n            index: index,\n            shareEl: false,\n            zoomEl: false,\n            getThumbBoundsFn: function(index) {\n                var thumbnail = items[index].el,\n                    pageYScroll = window.pageYOffset || document.documentElement.scrollTop,\n                    rect = thumbnail.getBoundingClientRect();\n\n                return {x:rect.left, y:rect.top + pageYScroll, w:rect.width};\n            }\n        }\n\n\n        var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, options);\n        gallery.init();\n\n        return false;\n    };\n\n    var triggers = document.querySelectorAll(trigger);\n    triggers.forEach(function (trig) {\n        trig.addEventListener('click', function (e) {\n            onThumbnailsClick(e);\n        });\n    });\n}\n","import dropdown from './dropdown';\nimport pagination from './pagination';\nimport lightbox from './lightbox';\nimport reframe from 'reframe.js';  // Default export\n\nimport '../css/screen.css';\n\n/* Mobile menu burger toggle */\n(function () {\n    const navigation = document.querySelector('.gh-navigation');\n    const burger = navigation.querySelector('.gh-burger');\n    if (!burger) return;\n\n    burger.addEventListener('click', function () {\n        if (!navigation.classList.contains('is-open')) {\n            navigation.classList.add('is-open');\n            document.documentElement.style.overflowY = 'hidden';\n        } else {\n            navigation.classList.remove('is-open');\n            document.documentElement.style.overflowY = null;\n        }\n    });\n})();\n\n/* Add lightbox to gallery images */\n(function () {\n    lightbox(\n        '.kg-image-card > .kg-image[width][height], .kg-gallery-image > img'\n    );\n})();\n\n/* Responsive video in post content */\n(function () {\n    const sources = [\n        '.gh-content iframe[src*=\"youtube.com\"]',\n        '.gh-content iframe[src*=\"youtube-nocookie.com\"]',\n        '.gh-content iframe[src*=\"player.vimeo.com\"]',\n        '.gh-content iframe[src*=\"kickstarter.com\"][src*=\"video.html\"]',\n        '.gh-content object',\n        '.gh-content embed',\n    ];\n    reframe(document.querySelectorAll(sources.join(',')));\n})();\n\n/* Turn the main nav into dropdown menu when there are more than 5 menu items */\n(function () {\n    dropdown();\n})();\n\n/* Infinite scroll pagination */\n(function () {\n    if (!document.body.classList.contains('home-template') && !document.body.classList.contains('post-template')) {\n        pagination();\n    }\n})();\n\n/* Responsive HTML table */\n(function () {\n    const tables = document.querySelectorAll('.gh-content > table:not(.gist table)');\n\n    tables.forEach(function (table) {\n        const wrapper = document.createElement('div');\n        wrapper.className = 'gh-table';\n        table.parentNode.insertBefore(wrapper, table);\n        wrapper.appendChild(table);\n    });\n})();\n","/**\n  reframe.js - Reframe.js: responsive iframes for embedded content\n  @version v4.0.2\n  @link https://github.com/yowainwright/reframe.ts#readme\n  @author Jeff Wainwright <yowainwright@gmail.com> (http://jeffry.in)\n  @license MIT\n**/\n/**\n * REFRAME.TS \n * ---\n * @param target\n * @param cName\n * @summary defines the height/width ratio of the targeted <element>\n */\nfunction reframe(target, cName) {\n    var _a, _b;\n    var frames = typeof target === 'string' ? document.querySelectorAll(target) : target;\n    var c = cName || 'js-reframe';\n    if (!('length' in frames))\n        frames = [frames];\n    for (var i = 0; i < frames.length; i += 1) {\n        var frame = frames[i];\n        var hasClass = frame.className.split(' ').indexOf(c) !== -1;\n        if (hasClass || frame.style.width.indexOf('%') > -1) {\n            return;\n        }\n        // get height width attributes\n        var height = frame.getAttribute('height') || frame.offsetHeight;\n        var width = frame.getAttribute('width') || frame.offsetWidth;\n        var heightNumber = typeof height === 'string' ? parseInt(height) : height;\n        var widthNumber = typeof width === 'string' ? parseInt(width) : width;\n        // general targeted <element> sizes\n        var padding = (heightNumber / widthNumber) * 100;\n        // created element <wrapper> of general reframed item\n        // => set necessary styles of created element <wrapper>\n        var div = document.createElement('div');\n        div.className = c;\n        var divStyles = div.style;\n        divStyles.position = 'relative';\n        divStyles.width = '100%';\n        divStyles.paddingTop = \"\".concat(padding, \"%\");\n        // set necessary styles of targeted <element>\n        var frameStyle = frame.style;\n        frameStyle.position = 'absolute';\n        frameStyle.width = '100%';\n        frameStyle.height = '100%';\n        frameStyle.left = '0';\n        frameStyle.top = '0';\n        // reframe targeted <element>\n        (_a = frame.parentNode) === null || _a === void 0 ? void 0 : _a.insertBefore(div, frame);\n        (_b = frame.parentNode) === null || _b === void 0 ? void 0 : _b.removeChild(frame);\n        div.appendChild(frame);\n    }\n}\n\nexport { reframe as default };\n","import imagesLoaded from  \"imagesloaded\";\n\nexport default function dropdown() {\n    const mediaQuery = window.matchMedia('(max-width: 767px)');\n\n    const head = document.querySelector('.gh-navigation');\n    const menu = head.querySelector('.gh-navigation-menu');\n    const nav = menu?.querySelector('.nav');\n    if (!nav) return;\n\n    const logo = document.querySelector('.gh-navigation-logo');\n    const navHTML = nav.innerHTML;\n\n    if (mediaQuery.matches) {\n        const items = nav.querySelectorAll('li');\n        items.forEach(function (item, index) {\n            item.style.transitionDelay = `${0.03 * (index + 1)}s`;\n        });\n    }\n\n    const makeDropdown = function () {\n        if (mediaQuery.matches) return;\n        const submenuItems = [];\n\n        while ((nav.offsetWidth + 64) > menu.offsetWidth) {\n            if (nav.lastElementChild) {\n                submenuItems.unshift(nav.lastElementChild);\n                nav.lastElementChild.remove();\n            } else {\n                break;\n            }\n        }\n\n        if (!submenuItems.length) {\n            head.classList.add('is-dropdown-loaded');\n            return;\n        }\n\n        const toggle = document.createElement('button');\n        toggle.setAttribute('class', 'gh-more-toggle gh-icon-button');\n        toggle.setAttribute('aria-label', 'More');\n        toggle.innerHTML = '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 32 32\" fill=\"currentColor\"><path d=\"M21.333 16c0-1.473 1.194-2.667 2.667-2.667v0c1.473 0 2.667 1.194 2.667 2.667v0c0 1.473-1.194 2.667-2.667 2.667v0c-1.473 0-2.667-1.194-2.667-2.667v0zM13.333 16c0-1.473 1.194-2.667 2.667-2.667v0c1.473 0 2.667 1.194 2.667 2.667v0c0 1.473-1.194 2.667-2.667 2.667v0c-1.473 0-2.667-1.194-2.667-2.667v0zM5.333 16c0-1.473 1.194-2.667 2.667-2.667v0c1.473 0 2.667 1.194 2.667 2.667v0c0 1.473-1.194 2.667-2.667 2.667v0c-1.473 0-2.667-1.194-2.667-2.667v0z\"></path></svg>';\n\n        const wrapper = document.createElement('div');\n        wrapper.setAttribute('class', 'gh-dropdown');\n\n        if (submenuItems.length >= 10) {\n            head.classList.add('is-dropdown-mega');\n            wrapper.style.gridTemplateRows = `repeat(${Math.ceil(submenuItems.length / 2)}, 1fr)`;\n        } else {\n            head.classList.remove('is-dropdown-mega');\n        }\n\n        submenuItems.forEach(function (child) {\n            wrapper.appendChild(child);\n        });\n\n        toggle.appendChild(wrapper);\n        nav.appendChild(toggle);\n\n        const toggleRect = toggle.getBoundingClientRect();\n        const documentCenter = window.innerWidth / 2;\n\n        if (toggleRect.left < documentCenter) {\n            wrapper.classList.add('is-left');\n        }\n\n        head.classList.add('is-dropdown-loaded');\n\n        window.addEventListener('click', function (e) {\n            if (head.classList.contains('is-dropdown-open')) {\n                head.classList.remove('is-dropdown-open');\n            } else if (toggle.contains(e.target)) {\n                head.classList.add('is-dropdown-open');\n            }\n        });\n    }\n\n    imagesLoaded(logo, function () {\n        makeDropdown();\n    });\n\n    window.addEventListener('load', function () {\n        if (!logo) {\n            makeDropdown();\n        }\n    });\n\n    window.addEventListener('resize', function () {\n        setTimeout(() => {\n            nav.innerHTML = navHTML;\n            makeDropdown();\n        }, 1);\n    });\n}\n","export default function pagination(isInfinite = true, done, isMasonry = false) {\n    const feedElement = document.querySelector('.gh-feed');\n    if (!feedElement) return;\n\n    let loading = false;\n    const target = document.querySelector('.gh-footer');\n    const buttonElement = document.querySelector('.gh-loadmore');\n\n    if (!document.querySelector('link[rel=next]') && buttonElement) {\n        buttonElement.remove();\n    }\n\n    const loadNextPage = async function () {\n        const nextElement = document.querySelector('link[rel=next]');\n        if (!nextElement) return;\n\n        try {\n            const res = await fetch(nextElement.href);\n            const html = await res.text();\n            const parser = new DOMParser();\n            const doc = parser.parseFromString(html, 'text/html');\n\n            const postElements = doc.querySelectorAll('.gh-feed:not(.gh-featured):not(.gh-related) > *');\n            const fragment = document.createDocumentFragment();\n            const elems = [];\n\n            postElements.forEach(function (post) {\n                var clonedItem = document.importNode(post, true);\n\n                if (isMasonry) {\n                    clonedItem.style.visibility = 'hidden';\n                }\n\n                fragment.appendChild(clonedItem);\n                elems.push(clonedItem);\n            });\n\n            feedElement.appendChild(fragment);\n\n            if (done) {\n                done(elems, loadNextWithCheck);\n            }\n\n            const resNextElement = doc.querySelector('link[rel=next]');\n            if (resNextElement && resNextElement.href) {\n                nextElement.href = resNextElement.href;\n            } else {\n                nextElement.remove();\n                if (buttonElement) {\n                    buttonElement.remove();\n                }\n            }\n        } catch (e) {\n            nextElement.remove();\n            throw e;\n        }\n    };\n\n    const loadNextWithCheck = async function () {\n        if (target.getBoundingClientRect().top <= window.innerHeight && document.querySelector('link[rel=next]')) {\n            await loadNextPage();\n        }\n    }\n\n    const callback = async function (entries) {\n        if (loading) return;\n\n        loading = true;\n\n        if (entries[0].isIntersecting) {\n            // keep loading next page until target is out of the viewport or we've loaded the last page\n            if (!isMasonry) {\n                while (target.getBoundingClientRect().top <= window.innerHeight && document.querySelector('link[rel=next]')) {\n                    await loadNextPage();\n                }\n            } else {\n                await loadNextPage();\n            }\n        }\n\n        loading = false;\n\n        if (!document.querySelector('link[rel=next]')) {\n            observer.disconnect();\n        }\n    };\n\n    const observer = new IntersectionObserver(callback);\n\n    if (isInfinite) {\n        observer.observe(target);\n    } else {\n        buttonElement.addEventListener('click', loadNextPage);\n    }\n}\n"],"names":["global","factory","module","exports","EvEmitter","window","this","proto","prototype","on","eventName","listener","events","_events","listeners","includes","push","once","onceEvents","_onceEvents","off","length","index","indexOf","splice","emitEvent","args","slice","onceListeners","apply","allOff","require$$0","imagesLoaded","$","jQuery","console","ImagesLoaded","elem","options","onAlways","queryElem","obj","document","querySelectorAll","elements","Array","isArray","Object","assign","getImages","jqDeferred","Deferred","setTimeout","check","bind","error","create","images","forEach","addElementImages","elementNodeTypes","nodeName","addImage","background","addElementBackgroundImages","nodeType","childImgs","img","children","child","reURL","LoadingImage","Background","url","element","Image","style","getComputedStyle","matches","exec","backgroundImage","addBackground","loadingImage","progressedCount","hasAnyBroken","complete","onProgress","image","message","progress","isLoaded","notify","debug","log","isComplete","jqMethod","getIsImageComplete","confirm","naturalWidth","proxyImage","crossOrigin","addEventListener","src","currentSrc","parentNode","handleEvent","event","method","type","onload","unbindEvents","onerror","removeEventListener","makeJQueryPlugin","fn","promise","PhotoSwipe","template","UiClass","items","framework","features","target","unbind","methodName","split","i","createEl","classes","tag","el","createElement","className","getScrollY","yOffset","pageYOffset","undefined","documentElement","scrollTop","removeClass","reg","RegExp","replace","addClass","hasClass","test","getChildByClass","parentEl","childClassName","node","firstChild","nextSibling","arraySearch","array","value","key","extend","o1","o2","preventOverwrite","prop","hasOwnProperty","easing","sine","out","k","Math","sin","PI","inOut","cos","cubic","detectFeatures","helperStyle","vendor","oldIE","all","touch","requestAnimationFrame","raf","caf","cancelAnimationFrame","pointerEvent","PointerEvent","navigator","msPointerEnabled","ua","userAgent","platform","v","appVersion","match","parseInt","isOldIOSPhone","androidversion","parseFloat","isOldAndroid","androidVersion","isMobileOpera","styleCheckItem","styleName","styleChecks","vendors","a","charAt","toUpperCase","toLowerCase","lastTime","currTime","Date","getTime","timeToCall","max","id","clearTimeout","svg","createElementNS","createSVGRect","evName","_handleEv","call","self","DOUBLE_TAP_RADIUS","NUM_HOLDERS","_options","allowPanToNext","spacing","bgOpacity","mouseUsed","loop","pinchToClose","closeOnScroll","closeOnVerticalDrag","verticalDragRange","hideAnimationDuration","showAnimationDuration","showHideOpacity","focus","escKey","arrowKeys","mainScrollEndFriction","panEndFriction","isClickableElement","tagName","getDoubleTapZoom","isMouseClick","item","initialZoomLevel","maxSpreadZoom","modal","scaleMode","_isOpen","_isDestroying","_closedByScroll","_currentItemIndex","_containerStyle","_containerShiftIndex","_upMoveEvents","_downEvents","_globalEventHandlers","_currZoomLevel","_startZoomLevel","_translatePrefix","_translateSufix","_updateSizeInterval","_itemsNeedUpdate","_itemHolders","_prevItemIndex","_dragStartEvent","_dragMoveEvent","_dragEndEvent","_dragCancelEvent","_transformKey","_pointerEventEnabled","_likelyTouchDevice","_requestAF","_cancelAF","_initalClassName","_initalWindowScrollY","_oldIE","_currentWindowScrollY","_features","_orientationChangeTimeout","_gestureStartTime","_gestureCheckSpeedTime","_releaseAnimData","_isZoomingIn","_verticalDragInitiated","_oldAndroidTouchEndTimeout","_isDragging","_isMultitouch","_zoomStarted","_moved","_dragAnimFrame","_mainScrollShifted","_currentPoints","_isZooming","_startPointsDistance","_currPanBounds","_currZoomElementStyle","_mainScrollAnimating","_direction","_isFirstMove","_opacityChanged","_bgOpacity","_wasOverInitialZoom","_tempCounter","_getEmptyPoint","x","y","_currPanDist","_startPanOffset","_panOffset","_viewportSize","_currPositionIndex","_offset","_slideSize","_indexDiff","_isFixedPosition","_modules","_windowVisibleSize","_renderMaxResolution","_registerModule","name","publicMethods","_getLoopedId","numSlides","_getNumItems","_listeners","_listen","_shout","arguments","shift","_getCurrentTime","_applyBgOpacity","opacity","bg","_applyZoomTransform","styleObj","zoom","currItem","fitRatio","_applyCurrentZoomPan","allowRenderResolution","_setImageSize","_applyZoomPanToItem","container","initialPosition","_setTranslateX","elStyle","_moveMainScroll","dragging","newSlideIndexOffset","delta","round","_mainScrollPos","_calculatePanOffset","axis","zoomLevel","m","_midZoomPoint","_equalizePoints","p1","p2","_roundPoint","p","_mouseMoveTimeout","_onFirstMouseMove","_bindEvents","transform","scrollWrap","_unbindEvents","scroll","_calculatePanBounds","update","bounds","_calculateItemSize","_getMinZoomLevel","_getMaxZoomLevel","w","_modifyDestPanOffset","destPanBounds","destPanOffset","destZoomLevel","min","_setupTransforms","allow3dTransform","perspective","left","zoomRatio","s","h","width","height","top","_onKeyDown","e","keydownAction","keyCode","ctrlKey","altKey","shiftKey","metaKey","preventDefault","returnValue","_onGlobalClick","stopPropagation","_updatePageScrollOffset","setScrollOffset","_animations","_numAnimations","_stopAnimation","_registerStartAnimation","_stopAllAnimations","_animateProp","b","endProp","d","easingFn","onUpdate","onComplete","t","startAnimTime","animloop","shout","listen","viewportSize","isMainScrollAnimating","getZoomLevel","getCurrentIndex","isDragging","isZooming","applyZoomPan","panX","panY","init","itemHolders","wrap","display","resize","updateSize","orientationchange","clientWidth","keydown","click","oldPhone","animationName","ui","isNaN","_getItemAt","setAttribute","position","rootClasses","mainClass","setContent","updateCurrItem","setInterval","close","_showOrHide","destroy","_showOrHideTimeout","clearInterval","_stopDragUpdateLoop","panTo","force","goTo","diff","next","prev","updateCurrZoomItem","emulateSetContent","zoomElement","center","invalidateCurrItems","needsUpdate","beforeAnimation","tempHolder","diffAbs","abs","pop","unshift","prevItem","windowScrollY","innerWidth","innerHeight","clientHeight","holder","hIndex","cleanSlide","zoomTo","centerPoint","speed","updateFn","initialPanOffset","now","MIN_SWIPE_DISTANCE","DIRECTION_CHECK_OFFSET","_currPoint","_startPoint","_currPointers","_startMainScrollPos","_posPoints","_tempPoint","_currZoomedItemIndex","_centerPoint","_lastReleaseTime","_currCenterPoint","_isEqualPoints","_isNearbyPoints","touch0","touch1","_calculatePointsDistance","sqrt","_dragUpdateLoop","_renderMovement","_canPan","_closestElement","getAttribute","_preventObj","_preventDefaultEventBehaviour","isDown","prevent","_convertTouchToPoint","pageX","pageY","identifier","_findCenterOfPoints","pCenter","_pushPosPoint","time","o","_calculateVerticalDragOpacityRatio","_ePoint1","_ePoint2","_tempPointsArr","_getTouchPoints","touches","_panOrMoveMainScroll","panFriction","startOverDiff","newPanPos","newMainScrollPos","newOffset","dir","newMainScrollPosition","mainScrollDiff","_onDragStart","button","_initialZoomRunning","pointerIndex","pointerId","startPointsList","numPoints","_onDragMove","touchesList","pointsDistance","_calculateZoomLevel","zoomFriction","minZoomLevel","maxZoomLevel","percent","opacityRatio","_onDragRelease","releasePoint","MSPOINTER_TYPES","pointerType","gestureType","touchList","changedTouches","releaseTimeDiff","_initDragReleaseAnimationData","calculateSwipeSpeed","initalPanY","initialBgOpacity","_finishSwipeMainScrollGesture","_completePanGesture","_completeZoomGesture","lastFlickDuration","tempReleasePos","lastFlickOffset","lastFlickDist","lastFlickSpeed","slowDownRatio","slowDownRatioReverse","speedDecelerationRatio","speedDecelerationRatioAbs","distanceOffset","backAnimDestination","backAnimStarted","calculateOverBoundsAnimOffset","pos","calculateAnimOffset","timeDiff","panAnimLoop","zoomPan","lastNow","animData","itemChanged","itemsDiff","nextCircle","totalShiftDist","isFastLastFlick","finishAnimDuration","animateToX","animateToDist","touchesDistance","destOpacity","initialOpacity","initGestures","addEventNames","pref","down","move","up","cancel","maxTouchPoints","msMaxTouchPoints","likelyTouchDevice","mousedown","mousemove","mouseup","_items","_initialContentSet","completeFn","thumbBounds","initialLayout","getThumbBoundsFn","closeWithRaf","fadeEverything","duration","removeAttribute","loadError","miniImg","webkitBackfaceVisibility","initalBgOpacity","_tempPanAreaSize","_imagesToAppendPool","_controllerDefaultOptions","errorMsg","forceProgressiveLoading","preload","getNumItemsFn","_getZeroBounds","_calculateSingleItemPanBounds","realPanElementW","realPanElementH","vGap","isInitial","bottom","hRatio","vRatio","_appendImage","baseDiv","preventAnimation","keepPlaceholder","imageAppended","appendChild","loaded","placeholder","_preloadImage","loading","loadComplete","_checkForError","cleanUp","innerHTML","maxRes","lastChild","_appendImagesPool","poolItem","clearPlaceholder","lazyLoadItem","initController","getItemAt","isNext","preloadBefore","preloadAfter","preloader","allowProgressiveImg","screen","html","placeholderClassName","msrc","tapTimer","_wheelDelta","tapReleasePoint","_dispatchTapEvent","origEvent","createEvent","eDetail","initCustomEvent","dispatchEvent","initTap","onTapStart","onTapRelease","p0","initDesktopZoom","setupDesktopZoom","onInit","handleMouseWheel","mouseZoomedIn","hasDraggingClass","updateZoomable","removeDraggingClass","deltaY","deltaMode","deltaX","wheelDeltaX","wheelDeltaY","wheelDelta","detail","newPanX","newPanY","toggleDesktopZoom","doubleTapZoomLevel","zoomOut","_historyUpdateTimeout","_hashChangeTimeout","_hashAnimCheckTimeout","_hashChangedByScript","_hashChangedByHistory","_hashReseted","_initialHash","_historyChanged","_closedFromURL","_urlChangedOnce","_windowLoc","_supportsPushState","_historyDefaultOptions","history","galleryUID","_getHash","hash","substring","_cleanHistoryTimeouts","_parseItemIndexFromURL","params","vars","pair","galleryPIDs","searchfor","pid","_updateHash","newHash","newURL","href","location","title","initHistory","updateURL","onHashChange","returnToOriginal","back","pushState","pathname","search","PhotoSwipeUI_Default","pswp","_fullscrenAPI","_controls","_captionContainer","_fakeCaptionContainer","_indexIndicator","_shareButton","_shareModal","_initalCloseOnScrollValue","_isIdle","_loadingIndicator","_loadingIndicatorHidden","_loadingIndicatorTimeout","_galleryHasOneSlide","_blockControlsTap","_idleInterval","_idleTimer","_overlayUIUpdated","_controlsVisible","_shareModalHidden","_defaultUIOptions","barsSize","closeElClasses","timeToIdle","timeToIdleOutside","loadingIndicatorDelay","addCaptionHTMLFn","captionEl","closeEl","fullscreenEl","zoomEl","shareEl","counterEl","arrowEl","preloaderEl","tapToClose","tapToToggleControls","clickToCloseNonZoomable","shareButtons","label","download","getImageURLForShare","getPageURLForShare","getTextForShare","indexIndicatorSep","fitControlsWidth","_onControlsTap","_onIdleMouseMove","uiElement","found","clickedClass","srcElement","_uiElements","onTap","tapDelay","_fitControlsInViewport","_togglePswpClass","cName","add","_countNumItems","hasOneSlide","_toggleShareModalClass","_toggleShareModal","_updateShareURLs","_openWindowPopup","hasAttribute","open","shareButtonData","image_url","page_url","share_text","shareButtonOut","encodeURIComponent","parseShareButtonOut","onclick","_hasCloseClass","_idleIncrement","setIdle","_onMouseLeaveWindow","from","relatedTarget","toElement","_setupFullscreenAPI","getFullscreenAPI","eventK","updateFullscreen","_setupLoadingIndicator","_toggleLoadingIndicator","hide","_applyNavBarGaps","gap","bars","insertBefore","captionSize","_setupIdle","_setupHidingControlsDuringGestures","pinchControlsHidden","hideControls","showControls","option","isFullscreen","exit","enter","_setupUIElements","classAttr","loopThroughChildElements","sChildren","l","topBar","point","preventObj","onGlobalTap","onMouseOver","removeChild","isIdle","updateIndexIndicator","supportsFullscreen","exitFullscreen","mozCancelFullScreen","webkitExitFullscreen","msExitFullscreen","api","dE","tF","requestFullscreen","enterK","exitK","elementK","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","Element","ALLOW_KEYBOARD_INPUT","lightbox","trigger","trig","prevSibling","closest","previousElementSibling","classList","contains","prevItems","concat","reachedCurrentItem","nextElementSibling","pswpElement","thumbnail","pageYScroll","rect","getBoundingClientRect","onThumbnailsClick","navigation","querySelector","burger","remove","overflowY","_a","_b","frames","c","frame","offsetHeight","offsetWidth","padding","div","divStyles","paddingTop","frameStyle","reframe","join","mediaQuery","matchMedia","head","menu","nav","logo","navHTML","transitionDelay","makeDropdown","submenuItems","lastElementChild","toggle","wrapper","gridTemplateRows","ceil","toggleRect","documentCenter","dropdown","body","isInfinite","done","isMasonry","feedElement","buttonElement","loadNextPage","async","nextElement","res","fetch","text","doc","DOMParser","parseFromString","postElements","fragment","createDocumentFragment","elems","post","clonedItem","importNode","visibility","loadNextWithCheck","resNextElement","observer","IntersectionObserver","entries","isIntersecting","disconnect","observe","pagination","table"],"mappings":"6mBAME,SAAUA,EAAQC,GAEgBC,EAAOC,QAEvCD,EAAAC,QAAiBF,IAGjBD,EAAOI,UAAYH,GAGtB,CAVC,CAUkB,oBAAVI,OAAwBA,OAASC,GAAM,WAEjD,SAASF,IAAc,CAEvB,IAAIG,EAAQH,EAAUI,UA6EtB,OA3EAD,EAAME,GAAK,SAAUC,EAAWC,GAC9B,IAAMD,IAAcC,EAAW,OAAOL,KAGtC,IAAIM,EAASN,KAAKO,QAAUP,KAAKO,SAAW,CAAA,EAExCC,EAAYF,EAAQF,GAAcE,EAAQF,IAAe,GAM7D,OAJMI,EAAUC,SAAUJ,IACxBG,EAAUE,KAAML,GAGXL,MAGTC,EAAMU,KAAO,SAAUP,EAAWC,GAChC,IAAMD,IAAcC,EAAW,OAAOL,KAGtCA,KAAKG,GAAIC,EAAWC,GAGpB,IAAIO,EAAaZ,KAAKa,YAAcb,KAAKa,aAAe,CAAA,EAMxD,OAJoBD,EAAYR,GAAcQ,EAAYR,IAAe,IAE1DC,IAAa,EAErBL,MAGTC,EAAMa,IAAM,SAAUV,EAAWC,GAC/B,IAAIG,EAAYR,KAAKO,SAAWP,KAAKO,QAASH,GAC9C,IAAMI,IAAcA,EAAUO,OAAS,OAAOf,KAE9C,IAAIgB,EAAQR,EAAUS,QAASZ,GAK/B,OAJe,GAAVW,GACHR,EAAUU,OAAQF,EAAO,GAGpBhB,MAGTC,EAAMkB,UAAY,SAAUf,EAAWgB,GACrC,IAAIZ,EAAYR,KAAKO,SAAWP,KAAKO,QAASH,GAC9C,IAAMI,IAAcA,EAAUO,OAAS,OAAOf,KAG9CQ,EAAYA,EAAUa,MAAO,GAC7BD,EAAOA,GAAQ,GAEf,IAAIE,EAAgBtB,KAAKa,aAAeb,KAAKa,YAAaT,GAE1D,IAAM,IAAIC,KAAYG,EACPc,GAAiBA,EAAejB,KAI3CL,KAAKc,IAAKV,EAAWC,UAEdiB,EAAejB,IAGxBA,EAASkB,MAAOvB,KAAMoB,GAGxB,OAAOpB,MAGTC,EAAMuB,OAAS,WAGb,cAFOxB,KAAKO,eACLP,KAAKa,YACLb,MAGFF,CAEP;;;;;QC7FA,SAAYC,EAAQJ,GAEgBC,EAAOC,QAEvCD,UAAiBD,EAASI,EAAQ0B,KAGlC1B,EAAO2B,aAAe/B,EAASI,EAAQA,EAAOD,UAGjD,CAVD,CAUuB,oBAAXC,OAAyBA,OAASC,GAC1C,SAAkBD,EAAQD,GAE9B,IAAI6B,EAAI5B,EAAO6B,OACXC,EAAU9B,EAAO8B,QAyBrB,SAASC,EAAcC,EAAMC,EAASC,GAEpC,KAAQjC,gBAAgB8B,GACtB,OAAO,IAAIA,EAAcC,EAAMC,EAASC,GAG1C,IAAIC,EAAYH,EA1BlB,IAAoBI,EA2BE,iBAARJ,IACVG,EAAYE,SAASC,iBAAkBN,IAGnCG,GAKNlC,KAAKsC,UApCaH,EAoCSD,EAlCtBK,MAAMC,QAASL,GAAeA,EAEH,iBAAPA,GAAwC,iBAAdA,EAAIpB,OAE7B,IAAKoB,GAGxB,CAAEA,IA4BTnC,KAAKgC,QAAU,GAEQ,mBAAXA,EACVC,EAAWD,EAEXS,OAAOC,OAAQ1C,KAAKgC,QAASA,GAG1BC,GAAWjC,KAAKG,GAAI,SAAU8B,GAEnCjC,KAAK2C,YAEAhB,IAAI3B,KAAK4C,WAAa,IAAIjB,EAAEkB,UAGjCC,WAAY9C,KAAK+C,MAAMC,KAAMhD,QApB3B6B,EAAQoB,MAAM,gCAAgCf,GAAaH,IAqB/D,CAEAD,EAAa5B,UAAYuC,OAAOS,OAAQpD,EAAUI,WAElD4B,EAAa5B,UAAUyC,UAAY,WACjC3C,KAAKmD,OAAS,GAGdnD,KAAKsC,SAASc,QAASpD,KAAKqD,iBAAkBrD,OAGhD,MAAMsD,EAAmB,CAAE,EAAG,EAAG,IAKjCxB,EAAa5B,UAAUmD,iBAAmB,SAAUtB,GAE3B,QAAlBA,EAAKwB,UACRvD,KAAKwD,SAAUzB,IAGgB,IAA5B/B,KAAKgC,QAAQyB,YAChBzD,KAAK0D,2BAA4B3B,GAKnC,IAAI4B,SAAEA,GAAa5B,EACnB,IAAM4B,IAAaL,EAAiB7C,SAAUkD,GAAa,OAE3D,IAAIC,EAAY7B,EAAKM,iBAAiB,OAEtC,IAAM,IAAIwB,KAAOD,EACf5D,KAAKwD,SAAUK,GAIjB,GAAuC,iBAA3B7D,KAAKgC,QAAQyB,WAAyB,CAChD,IAAIK,EAAW/B,EAAKM,iBAAkBrC,KAAKgC,QAAQyB,YACnD,IAAM,IAAIM,KAASD,EACjB9D,KAAK0D,2BAA4BK,EAEpC,GAGH,MAAMC,EAAQ,0BAqFd,SAASC,EAAcJ,GACrB7D,KAAK6D,IAAMA,CACb,CAuEA,SAASK,EAAYC,EAAKC,GACxBpE,KAAKmE,IAAMA,EACXnE,KAAKoE,QAAUA,EACfpE,KAAK6D,IAAM,IAAIQ,KACjB,CA8CA,OA9MAvC,EAAa5B,UAAUwD,2BAA6B,SAAU3B,GAC5D,IAAIuC,EAAQC,iBAAkBxC,GAE9B,IAAMuC,EAAQ,OAGd,IAAIE,EAAUR,EAAMS,KAAMH,EAAMI,iBAChC,KAAoB,OAAZF,GAAmB,CACzB,IAAIL,EAAMK,GAAWA,EAAQ,GACxBL,GACHnE,KAAK2E,cAAeR,EAAKpC,GAE3ByC,EAAUR,EAAMS,KAAMH,EAAMI,gBAC7B,GAMH5C,EAAa5B,UAAUsD,SAAW,SAAUK,GAC1C,IAAIe,EAAe,IAAIX,EAAcJ,GACrC7D,KAAKmD,OAAOzC,KAAMkE,IAGpB9C,EAAa5B,UAAUyE,cAAgB,SAAUR,EAAKpC,GACpD,IAAI0B,EAAa,IAAIS,EAAYC,EAAKpC,GACtC/B,KAAKmD,OAAOzC,KAAM+C,IAGpB3B,EAAa5B,UAAU6C,MAAQ,WAI7B,GAHA/C,KAAK6E,gBAAkB,EACvB7E,KAAK8E,cAAe,GAEd9E,KAAKmD,OAAOpC,OAEhB,YADAf,KAAK+E,WAKP,IAAIC,EAAaA,CAAEC,EAAOlD,EAAMmD,KAE9BpC,YAAY,KACV9C,KAAKmF,SAAUF,EAAOlD,EAAMmD,EAAS,GACpC,EAGLlF,KAAKmD,OAAOC,SAAS,SAAUwB,GAC7BA,EAAajE,KAAM,WAAYqE,GAC/BJ,EAAa7B,OACjB,KAGAjB,EAAa5B,UAAUiF,SAAW,SAAUF,EAAOlD,EAAMmD,GACvDlF,KAAK6E,kBACL7E,KAAK8E,aAAe9E,KAAK8E,eAAiBG,EAAMG,SAEhDpF,KAAKmB,UAAW,WAAY,CAAEnB,KAAMiF,EAAOlD,IACtC/B,KAAK4C,YAAc5C,KAAK4C,WAAWyC,QACtCrF,KAAK4C,WAAWyC,OAAQrF,KAAMiF,GAG3BjF,KAAK6E,kBAAoB7E,KAAKmD,OAAOpC,QACxCf,KAAK+E,WAGF/E,KAAKgC,QAAQsD,OAASzD,GACzBA,EAAQ0D,IAAK,aAAaL,IAAWD,EAAOlD,IAIhDD,EAAa5B,UAAU6E,SAAW,WAChC,IAAI3E,EAAYJ,KAAK8E,aAAe,OAAS,OAI7C,GAHA9E,KAAKwF,YAAa,EAClBxF,KAAKmB,UAAWf,EAAW,CAAEJ,OAC7BA,KAAKmB,UAAW,SAAU,CAAEnB,OACvBA,KAAK4C,WAAa,CACrB,IAAI6C,EAAWzF,KAAK8E,aAAe,SAAW,UAC9C9E,KAAK4C,WAAY6C,GAAYzF,KAC9B,GASHiE,EAAa/D,UAAYuC,OAAOS,OAAQpD,EAAUI,WAElD+D,EAAa/D,UAAU6C,MAAQ,WAGZ/C,KAAK0F,qBAGpB1F,KAAK2F,QAAmC,IAA1B3F,KAAK6D,IAAI+B,aAAoB,iBAK7C5F,KAAK6F,WAAa,IAAIxB,MAEjBrE,KAAK6D,IAAIiC,cACZ9F,KAAK6F,WAAWC,YAAc9F,KAAK6D,IAAIiC,aAEzC9F,KAAK6F,WAAWE,iBAAkB,OAAQ/F,MAC1CA,KAAK6F,WAAWE,iBAAkB,QAAS/F,MAE3CA,KAAK6D,IAAIkC,iBAAkB,OAAQ/F,MACnCA,KAAK6D,IAAIkC,iBAAkB,QAAS/F,MACpCA,KAAK6F,WAAWG,IAAMhG,KAAK6D,IAAIoC,YAAcjG,KAAK6D,IAAImC,MAGxD/B,EAAa/D,UAAUwF,mBAAqB,WAG1C,OAAO1F,KAAK6D,IAAIkB,UAAY/E,KAAK6D,IAAI+B,cAGvC3B,EAAa/D,UAAUyF,QAAU,SAAUP,EAAUF,GACnDlF,KAAKoF,SAAWA,EAChB,IAAIc,WAAEA,GAAelG,KAAK6D,IAEtB9B,EAA+B,YAAxBmE,EAAW3C,SAAyB2C,EAAalG,KAAK6D,IACjE7D,KAAKmB,UAAW,WAAY,CAAEnB,KAAM+B,EAAMmD,KAM5CjB,EAAa/D,UAAUiG,YAAc,SAAUC,GAC7C,IAAIC,EAAS,KAAOD,EAAME,KACrBtG,KAAMqG,IACTrG,KAAMqG,GAAUD,IAIpBnC,EAAa/D,UAAUqG,OAAS,WAC9BvG,KAAK2F,SAAS,EAAM,UACpB3F,KAAKwG,gBAGPvC,EAAa/D,UAAUuG,QAAU,WAC/BzG,KAAK2F,SAAS,EAAO,WACrB3F,KAAKwG,gBAGPvC,EAAa/D,UAAUsG,aAAe,WACpCxG,KAAK6F,WAAWa,oBAAqB,OAAQ1G,MAC7CA,KAAK6F,WAAWa,oBAAqB,QAAS1G,MAC9CA,KAAK6D,IAAI6C,oBAAqB,OAAQ1G,MACtCA,KAAK6D,IAAI6C,oBAAqB,QAAS1G,OAYzCkE,EAAWhE,UAAYuC,OAAOS,OAAQe,EAAa/D,WAEnDgE,EAAWhE,UAAU6C,MAAQ,WAC3B/C,KAAK6D,IAAIkC,iBAAkB,OAAQ/F,MACnCA,KAAK6D,IAAIkC,iBAAkB,QAAS/F,MACpCA,KAAK6D,IAAImC,IAAMhG,KAAKmE,IAEHnE,KAAK0F,uBAEpB1F,KAAK2F,QAAmC,IAA1B3F,KAAK6D,IAAI+B,aAAoB,gBAC3C5F,KAAKwG,iBAITtC,EAAWhE,UAAUsG,aAAe,WAClCxG,KAAK6D,IAAI6C,oBAAqB,OAAQ1G,MACtCA,KAAK6D,IAAI6C,oBAAqB,QAAS1G,OAGzCkE,EAAWhE,UAAUyF,QAAU,SAAUP,EAAUF,GACjDlF,KAAKoF,SAAWA,EAChBpF,KAAKmB,UAAW,WAAY,CAAEnB,KAAMA,KAAKoE,QAASc,KAKpDpD,EAAa6E,iBAAmB,SAAU/E,IACxCA,EAASA,GAAU7B,EAAO6B,UAI1BD,EAAIC,EAEJD,EAAEiF,GAAGlF,aAAe,SAAUM,EAASC,GAErC,OADe,IAAIH,EAAc9B,KAAMgC,EAASC,GAChCW,WAAWiE,QAASlF,EAAG3B,UAI3C8B,EAAa6E,mBAIN7E,CAEP;;;qDCvUElC,EAAAC,QAIO,WAGR,IAAIiH,EAAa,SAASC,EAAUC,EAASC,EAAOjF,GAUrD,IAAIkF,EAAY,CACfC,SAAU,KACVnE,KAAM,SAASoE,EAAQd,EAAMjG,EAAUgH,GACtC,IAAIC,GAAcD,EAAS,SAAW,OAAS,gBAC/Cf,EAAOA,EAAKiB,MAAM,KAClB,IAAI,IAAIC,EAAI,EAAGA,EAAIlB,EAAKvF,OAAQyG,IAC5BlB,EAAKkB,IACPJ,EAAOE,GAAahB,EAAKkB,GAAInH,GAAU,EAGzC,EACDmC,QAAS,SAASL,GACjB,OAAQA,aAAeI,KACvB,EACDkF,SAAU,SAASC,EAASC,GAC3B,IAAIC,EAAKxF,SAASyF,cAAcF,GAAO,OAIvC,OAHGD,IACFE,EAAGE,UAAYJ,GAETE,CACP,EACDG,WAAY,WACX,IAAIC,EAAUjI,OAAOkI,YACrB,YAAmBC,IAAZF,EAAwBA,EAAU5F,SAAS+F,gBAAgBC,SAClE,EACDf,OAAQ,SAASD,EAAQd,EAAMjG,GAC9B6G,EAAUlE,KAAKoE,EAAOd,EAAKjG,GAAS,EACpC,EACDgI,YAAa,SAAST,EAAIE,GACzB,IAAIQ,EAAM,IAAIC,OAAO,UAAYT,EAAY,WAC7CF,EAAGE,UAAYF,EAAGE,UAAUU,QAAQF,EAAK,KAAKE,QAAQ,SAAU,IAAIA,QAAQ,SAAU,GACtF,EACDC,SAAU,SAASb,EAAIE,GACjBZ,EAAUwB,SAASd,EAAGE,KAC1BF,EAAGE,YAAcF,EAAGE,UAAY,IAAM,IAAMA,EAE7C,EACDY,SAAU,SAASd,EAAIE,GACtB,OAAOF,EAAGE,WAAa,IAAIS,OAAO,UAAYT,EAAY,WAAWa,KAAKf,EAAGE,UAC7E,EACDc,gBAAiB,SAASC,EAAUC,GAEnC,IADA,IAAIC,EAAOF,EAASG,WACdD,GAAM,CACX,GAAI7B,EAAUwB,SAASK,EAAMD,GAC5B,OAAOC,EAERA,EAAOA,EAAKE,WACZ,CACD,EACDC,YAAa,SAASC,EAAOC,EAAOC,GAEnC,IADA,IAAI7B,EAAI2B,EAAMpI,OACRyG,KACL,GAAG2B,EAAM3B,GAAG6B,KAASD,EACpB,OAAO5B,EAGT,OAAQ,CACR,EACD8B,OAAQ,SAASC,EAAIC,EAAIC,GACxB,IAAK,IAAIC,KAAQF,EAChB,GAAIA,EAAGG,eAAeD,GAAO,CAC5B,GAAGD,GAAoBF,EAAGI,eAAeD,GACxC,SAEDH,EAAGG,GAAQF,EAAGE,EACd,CAEF,EACDE,OAAQ,CACPC,KAAM,CACLC,IAAK,SAASC,GACb,OAAOC,KAAKC,IAAIF,GAAKC,KAAKE,GAAK,GAC/B,EACDC,MAAO,SAASJ,GACf,QAAUC,KAAKI,IAAIJ,KAAKE,GAAKH,GAAK,GAAK,CACvC,GAEFM,MAAO,CACNP,IAAK,SAASC,GACb,QAASA,EAAIA,EAAIA,EAAI,CACrB,IAoCHO,eAAgB,WACf,GAAGpD,EAAUC,SACZ,OAAOD,EAAUC,SAElB,IACCoD,EADcrD,EAAUO,WACDnD,MACvBkG,EAAS,GACTrD,EAAW,CAAA,EAiBZ,GAdAA,EAASsD,MAAQrI,SAASsI,MAAQtI,SAAS2D,iBAE3CoB,EAASwD,MAAQ,iBAAkB5K,OAEhCA,OAAO6K,wBACTzD,EAAS0D,IAAM9K,OAAO6K,sBACtBzD,EAAS2D,IAAM/K,OAAOgL,sBAGvB5D,EAAS6D,eAAkBjL,OAAOkL,cAAiBC,UAAUC,kBAKzDhE,EAAS6D,aAAc,CAE1B,IAAII,EAAKF,UAAUG,UASnB,GAAI,cAAc1C,KAAKuC,UAAUI,UAAW,CAC3C,IAAIC,EAAKL,UAAUM,WAAYC,MAAM,0BAClCF,GAAKA,EAAExK,OAAS,IAClBwK,EAAIG,SAASH,EAAE,GAAI,MACX,GAAKA,EAAI,IAChBpE,EAASwE,eAAgB,EAG3B,CAMD,IAAIF,EAAQL,EAAGK,MAAM,uBACjBG,EAAkBH,EAAQA,EAAM,GAAK,GACzCG,EAAiBC,WAAWD,KACP,IACjBA,EAAiB,MACnBzE,EAAS2E,cAAe,GAEzB3E,EAAS4E,eAAiBH,GAE3BzE,EAAS6E,cAAgB,yBAAyBrD,KAAKyC,EAGvD,CAOD,IALA,IAECa,EACAC,EAHGC,EAAc,CAAC,YAAa,cAAe,iBAC9CC,EAAU,CAAC,GAAI,SAAS,MAAM,KAAK,KAI5B5E,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAC1BgD,EAAS4B,EAAQ5E,GAEjB,IAAI,IAAI6E,EAAI,EAAGA,EAAI,EAAGA,IACrBJ,EAAiBE,EAAYE,GAG7BH,EAAY1B,GAAUA,EAChByB,EAAeK,OAAO,GAAGC,cAAgBN,EAAe5K,MAAM,GAC9D4K,IAEF9E,EAAS8E,IAAmBC,KAAa3B,IAC5CpD,EAAS8E,GAAkBC,GAI1B1B,IAAWrD,EAAS0D,MACtBL,EAASA,EAAOgC,cAChBrF,EAAS0D,IAAM9K,OAAOyK,EAAO,yBAC1BrD,EAAS0D,MACX1D,EAAS2D,IAAM/K,OAAOyK,EAAO,yBACzBzK,OAAOyK,EAAO,gCAGpB,CAED,IAAIrD,EAAS0D,IAAK,CACjB,IAAI4B,EAAW,EACftF,EAAS0D,IAAM,SAASjE,GACvB,IAAI8F,GAAW,IAAIC,MAAOC,UACtBC,EAAa7C,KAAK8C,IAAI,EAAG,IAAMJ,EAAWD,IAC1CM,EAAKhN,OAAO+C,YAAW,WAAa8D,EAAG8F,EAAWG,EAAc,GAAEA,GAEtE,OADAJ,EAAWC,EAAWG,EACfE,GAER5F,EAAS2D,IAAM,SAASiC,GAAMC,aAAaD,GAC3C,CAQD,OALA5F,EAAS8F,MAAQ7K,SAAS8K,mBACpB9K,SAAS8K,gBAAgB,6BAA8B,OAAOC,cAEpEjG,EAAUC,SAAWA,EAEdA,CACP,GAGFD,EAAUoD,iBAGPpD,EAAUC,SAASsD,QAErBvD,EAAUlE,KAAO,SAASoE,EAAQd,EAAMjG,EAAUgH,GAEjDf,EAAOA,EAAKiB,MAAM,KAQlB,IANA,IACC6F,EADG9F,GAAcD,EAAS,SAAW,UAAY,QAEjDgG,EAAY,WACXhN,EAAS8F,YAAYmH,KAAKjN,IAGpBmH,EAAI,EAAGA,EAAIlB,EAAKvF,OAAQyG,IAE/B,GADA4F,EAAS9G,EAAKkB,GAGb,GAAuB,iBAAbnH,GAAyBA,EAAS8F,YAAa,CACxD,GAAIkB,GAGH,IAAIhH,EAAS,QAAU+M,GACtB,OAAO,OAHR/M,EAAS,QAAU+M,GAAUC,EAO9BjG,EAAOE,GAAa,KAAO8F,EAAQ/M,EAAS,QAAU+M,GAC3D,MACKhG,EAAOE,GAAa,KAAO8F,EAAQ/M,KAcxC,IAAIkN,EAAOvN,KAKPwN,EAAoB,GACvBC,EAAc,EAKXC,EAAW,CACdC,gBAAe,EACfC,QAAS,IACTC,UAAW,EACXC,WAAW,EACXC,MAAM,EACNC,cAAc,EACdC,eAAe,EACfC,qBAAqB,EACrBC,kBAAmB,IACnBC,sBAAuB,IACvBC,sBAAuB,IACvBC,iBAAiB,EACjBC,OAAO,EACPC,QAAQ,EACRC,WAAW,EACXC,sBAAuB,IACvBC,eAAgB,IAChBC,mBAAoB,SAAShH,GACtB,MAAsB,MAAfA,EAAGiH,OACb,EACDC,iBAAkB,SAASC,EAAcC,GACxC,OAAGD,GAGKC,EAAKC,iBAAmB,GAFxB,EAEkC,IAE1C,EACDC,cAAe,KAClBC,OAAO,EAGPC,UAAW,OAEZlI,EAAUoC,OAAOoE,EAAU1L,GAO3B,IAIIqN,EACHC,EACAC,EACAC,EACAC,EACAC,EAIAC,EACAC,EACAC,EAEAC,EACAC,EACAC,EACAC,EACAC,EACAC,EAIAC,EACAC,EAEAC,EACAC,EACAC,EACAC,EACAC,EACAC,EAEAC,EAEAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EAGAC,EA47BGC,EACHC,EAUAC,EAIAC,EACAC,EACAC,EAIAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,GAEAC,GACAC,GAEAC,GACAC,GAGAC,GACAC,GACAC,GACAC,GACAC,GAqFAC,GAzmCGC,GAAiB,WACnB,MAAO,CAACC,EAAE,EAAEC,EAAE,IASfC,GAAeH,KACfI,GAAkBJ,KAClBK,GAAaL,KAIbM,GAAgB,CAAE,EAOlBC,GAAqB,EACrBC,GAAU,CAAE,EACZC,GAAaT,KAGbU,GAAa,EAObC,IAAmB,EAEnBC,GAAW,GAQXC,GAAqB,CAAE,EACvBC,IAAuB,EAKvBC,GAAkB,SAASC,EAAMjU,GAChCsH,EAAUoC,OAAOiE,EAAM3N,EAAOkU,eAC9BL,GAAS/S,KAAKmT,EACd,EAEDE,GAAe,SAAS/S,GACvB,IAAIgT,EAAYC,KAChB,OAAGjT,EAAQgT,EAAY,EACfhT,EAAQgT,EACLhT,EAAQ,EACXgT,EAAYhT,EAEbA,CACP,EAGDkT,GAAa,CAAE,EACfC,GAAU,SAASN,EAAMjN,GAIxB,OAHIsN,GAAWL,KACdK,GAAWL,GAAQ,IAEbK,GAAWL,GAAMnT,KAAKkG,EAC7B,EACDwN,GAAS,SAASP,GACjB,IAAIrT,EAAY0T,GAAWL,GAE3B,GAAGrT,EAAW,CACb,IAAIY,EAAOmB,MAAMrC,UAAUmB,MAAMiM,KAAK+G,WACtCjT,EAAKkT,QAEL,IAAI,IAAI9M,EAAI,EAAGA,EAAIhH,EAAUO,OAAQyG,IACpChH,EAAUgH,GAAGjG,MAAMgM,EAAMnM,EAE1B,CACD,EAEDmT,GAAkB,WACjB,OAAO,IAAI5H,MAAOC,SAClB,EACD4H,GAAkB,SAASC,GAC1B/B,GAAa+B,EACblH,EAAKmH,GAAGpQ,MAAMmQ,QAAUA,EAAU/G,EAASG,SAC3C,EAED8G,GAAsB,SAASC,EAAS9B,EAAEC,EAAE8B,EAAK7F,KAC5C2E,IAAyB3E,GAAQA,IAASzB,EAAKuH,YAClDD,GAAe7F,EAAOA,EAAK+F,SAAWxH,EAAKuH,SAASC,UAGrDH,EAASlE,GAAiBV,EAAmB8C,EAAI,OAASC,EAAI,KAAO9C,EAAkB,UAAY4E,EAAO,GAC1G,EACDG,GAAuB,SAAUC,GAC7B5C,KAEC4C,IACCnF,EAAiBvC,EAAKuH,SAASC,SAC7BpB,KACHuB,GAAc3H,EAAKuH,UAAU,GAAO,GACpCnB,IAAuB,GAGrBA,KACFuB,GAAc3H,EAAKuH,UACnBnB,IAAuB,IAM1BgB,GAAoBtC,GAAuBa,GAAWJ,EAAGI,GAAWH,EAAGjD,GAExE,EACDqF,GAAsB,SAASnG,GAC3BA,EAAKoG,WAEPT,GAAoB3F,EAAKoG,UAAU9Q,MAC9B0K,EAAKqG,gBAAgBvC,EACrB9D,EAAKqG,gBAAgBtC,EACrB/D,EAAKC,iBACLD,EAEN,EACDsG,GAAiB,SAASxC,EAAGyC,GAC5BA,EAAQ7E,GAAiBV,EAAmB8C,EAAI,UAAY7C,CAC5D,EACDuF,GAAkB,SAAS1C,EAAG2C,GAE7B,IAAI/H,EAASK,MAAQ0H,EAAU,CAC9B,IAAIC,EAAsBlG,GAAqB8D,GAAWR,EAAIM,GAAqBN,GAAKQ,GAAWR,EAClG6C,EAAQ3L,KAAK4L,MAAM9C,EAAI+C,GAAe/C,IAElC4C,EAAsB,GAAKC,EAAQ,GACtCD,GAAuBzB,KAAiB,GAAK0B,EAAQ,KACtD7C,EAAI+C,GAAe/C,EAAI6C,EAAQjI,EAASgB,sBAEzC,CAEDmH,GAAe/C,EAAIA,EACnBwC,GAAexC,EAAGrD,EAClB,EACDqG,GAAsB,SAASC,EAAMC,GACpC,IAAIC,EAAIC,GAAcH,GAAQ1C,GAAQ0C,GACtC,OAAO9C,GAAgB8C,GAAQ/C,GAAa+C,GAAQE,EAAIA,GAAMD,EAAYjG,EAC1E,EAEDoG,GAAkB,SAASC,EAAIC,GAC9BD,EAAGtD,EAAIuD,EAAGvD,EACVsD,EAAGrD,EAAIsD,EAAGtD,EACPsD,EAAGtJ,KACLqJ,EAAGrJ,GAAKsJ,EAAGtJ,GAEZ,EACDuJ,GAAc,SAASC,GACtBA,EAAEzD,EAAI9I,KAAK4L,MAAMW,EAAEzD,GACnByD,EAAExD,EAAI/I,KAAK4L,MAAMW,EAAExD,EACnB,EAEDyD,GAAoB,KACpBC,GAAoB,WAGhBD,KACFtP,EAAUG,OAAOjF,SAAU,YAAaqU,IACxCvP,EAAUuB,SAAS1B,EAAU,mBAC7B2G,EAASI,WAAY,EACrBsG,GAAO,cAERoC,GAAoB1T,YAAW,WAC9B0T,GAAoB,IACpB,GAAE,IACH,EAEDE,GAAc,WACbxP,EAAUlE,KAAKZ,SAAU,UAAWmL,GAEjC4D,EAAUwF,WAEZzP,EAAUlE,KAAKuK,EAAKqJ,WAAY,QAASrJ,GAItCG,EAASI,WACZ5G,EAAUlE,KAAKZ,SAAU,YAAaqU,IAGvCvP,EAAUlE,KAAKjD,OAAQ,kCAAmCwN,GAE1D6G,GAAO,aACP,EAEDyC,GAAgB,WACf3P,EAAUG,OAAOtH,OAAQ,kCAAmCwN,GAC5DrG,EAAUG,OAAOtH,OAAQ,SAAU8P,EAAqBiH,QACxD5P,EAAUG,OAAOjF,SAAU,UAAWmL,GACtCrG,EAAUG,OAAOjF,SAAU,YAAaqU,IAErCtF,EAAUwF,WACZzP,EAAUG,OAAOkG,EAAKqJ,WAAY,QAASrJ,GAGzCoE,GACFzK,EAAUG,OAAOtH,OAAQ4P,EAAepC,GAGzCP,aAAaoE,GAEbgD,GAAO,eACP,EAED2C,GAAsB,SAASf,EAAWgB,GACzC,IAAIC,EAASC,GAAoB3J,EAAKuH,SAAU3B,GAAe6C,GAI/D,OAHGgB,IACF5E,GAAiB6E,GAEXA,CACP,EAEDE,GAAmB,SAASnI,GAI3B,OAHIA,IACHA,EAAOzB,EAAKuH,UAEN9F,EAAKC,gBACZ,EACDmI,GAAmB,SAASpI,GAI3B,OAHIA,IACHA,EAAOzB,EAAKuH,UAEN9F,EAAKqI,EAAI,EAAI3J,EAASwB,cAAgB,CAC7C,EAGDoI,GAAuB,SAASvB,EAAMwB,EAAeC,EAAeC,GACnE,OAAGA,IAAkBlK,EAAKuH,SAAS7F,kBAClCuI,EAAczB,GAAQxI,EAAKuH,SAASO,gBAAgBU,IAC7C,IAEPyB,EAAczB,GAAQD,GAAoBC,EAAM0B,GAE7CD,EAAczB,GAAQwB,EAAcG,IAAI3B,IAC1CyB,EAAczB,GAAQwB,EAAcG,IAAI3B,IACjC,GACEyB,EAAczB,GAAQwB,EAAczK,IAAIiJ,KACjDyB,EAAczB,GAAQwB,EAAczK,IAAIiJ,IACjC,GAIT,EAED4B,GAAmB,WAElB,GAAGjH,EAAe,CAEjB,IAAIkH,EAAmBzG,EAAU0G,cAAgBjH,EAGjD,OAFAZ,EAAmB,aAAe4H,EAAmB,MAAQ,UAC7D3H,EAAkBkB,EAAU0G,YAAc,SAAW,IAErD,CAKDnH,EAAgB,OAChBxJ,EAAUuB,SAAS1B,EAAU,YAE7BuO,GAAiB,SAASxC,EAAGyC,GAC5BA,EAAQuC,KAAOhF,EAAI,MAEpBqC,GAAsB,SAASnG,GAE9B,IAAI+I,EAAY/I,EAAK+F,SAAW,EAAI,EAAI/F,EAAK+F,SAC5CiD,EAAIhJ,EAAKoG,UAAU9Q,MACnB+S,EAAIU,EAAY/I,EAAKqI,EACrBY,EAAIF,EAAY/I,EAAKiJ,EAEtBD,EAAEE,MAAQb,EAAI,KACdW,EAAEG,OAASF,EAAI,KACfD,EAAEF,KAAO9I,EAAKqG,gBAAgBvC,EAAI,KAClCkF,EAAEI,IAAMpJ,EAAKqG,gBAAgBtC,EAAI,MAGlCiC,GAAuB,WACtB,GAAG3C,GAAuB,CAEzB,IAAI2F,EAAI3F,GACPrD,EAAOzB,EAAKuH,SACZiD,EAAY/I,EAAK+F,SAAW,EAAI,EAAI/F,EAAK+F,SACzCsC,EAAIU,EAAY/I,EAAKqI,EACrBY,EAAIF,EAAY/I,EAAKiJ,EAEtBD,EAAEE,MAAQb,EAAI,KACdW,EAAEG,OAASF,EAAI,KAGfD,EAAEF,KAAO5E,GAAWJ,EAAI,KACxBkF,EAAEI,IAAMlF,GAAWH,EAAI,IACvB,EAGF,EAEDsF,GAAa,SAASC,GACrB,IAAIC,EAAgB,GACjB7K,EAASc,QAAwB,KAAd8J,EAAEE,QACvBD,EAAgB,QACP7K,EAASe,YACD,KAAd6J,EAAEE,QACJD,EAAgB,OACO,KAAdD,EAAEE,UACXD,EAAgB,SAIfA,IAGGD,EAAEG,SAAYH,EAAEI,QAAWJ,EAAEK,UAAaL,EAAEM,UAC7CN,EAAEO,eACJP,EAAEO,iBAEFP,EAAEQ,aAAc,EAEjBvL,EAAKgL,MAGP,EAEDQ,GAAiB,SAAST,GACrBA,IAKDxG,GAAUD,GAAgBS,IAAwBb,KACpD6G,EAAEO,iBACFP,EAAEU,kBAEH,EAEDC,GAA0B,WACzB1L,EAAK2L,gBAAgB,EAAGhS,EAAUa,eAUhCoR,GAAc,CAAE,EACnBC,GAAiB,EACjBC,GAAiB,SAASxF,GACtBsF,GAAYtF,KACXsF,GAAYtF,GAAMhJ,KACpBiG,EAAWqI,GAAYtF,GAAMhJ,KAE9BuO,YACOD,GAAYtF,GAEpB,EACDyF,GAA0B,SAASzF,GAC/BsF,GAAYtF,IACdwF,GAAexF,GAEZsF,GAAYtF,KACfuF,KACAD,GAAYtF,GAAQ,GAErB,EACD0F,GAAqB,WACpB,IAAK,IAAI7P,KAAQyP,GAEZA,GAAYxP,eAAgBD,IAC/B2P,GAAe3P,EAIjB,EACD8P,GAAe,SAAS3F,EAAM4F,EAAGC,EAASC,EAAGC,EAAUC,EAAUC,GAChE,IAAuCC,EAAnCC,EAAgBzF,KACpB+E,GAAwBzF,GAExB,IAAIoG,EAAW,WACd,GAAKd,GAAYtF,GAAQ,CAMxB,IAJAkG,EAAIxF,KAAoByF,IAIdL,EAMT,OALAN,GAAexF,GACfgG,EAASH,QACNI,GACFA,KAIFD,GAAWH,EAAUD,GAAKG,EAASG,EAAEJ,GAAKF,GAE1CN,GAAYtF,GAAMhJ,IAAMgG,EAAWoJ,EACnC,GAEFA,KAKEnG,GAAgB,CAGnBoG,MAAO9F,GACP+F,OAAQhG,GACRiG,aAAcjH,GACdnR,QAAS0L,EAET2M,sBAAuB,WACtB,OAAO/H,EACP,EACDgI,aAAc,WACb,OAAOxK,CACP,EACDyK,gBAAiB,WAChB,OAAO/K,CACP,EACDgL,WAAY,WACX,OAAO7I,CACP,EACD8I,UAAW,WACV,OAAOvI,EACP,EACDgH,gBAAiB,SAASpG,EAAEC,GAC3BM,GAAQP,EAAIA,EACZ5B,EAAwBmC,GAAQN,EAAIA,EACpCqB,GAAO,qBAAsBf,GAC7B,EACDqH,aAAc,SAAS1E,EAAU2E,EAAKC,EAAK3F,GAC1C/B,GAAWJ,EAAI6H,EACfzH,GAAWH,EAAI6H,EACf9K,EAAiBkG,EACjBhB,GAAsBC,EACtB,EAED4F,KAAM,WAEL,IAAGxL,IAAWC,EAAd,CAIA,IAAI9H,EAEJ+F,EAAKrG,UAAYA,EACjBqG,EAAKxG,SAAWA,EAChBwG,EAAKmH,GAAKxN,EAAU0B,gBAAgB7B,EAAU,YAE9CgK,EAAmBhK,EAASe,UAC5BuH,GAAU,EAEV8B,EAAYjK,EAAUoD,iBACtBuG,EAAaM,EAAUtG,IACvBiG,EAAYK,EAAUrG,IACtB4F,EAAgBS,EAAUwF,UAC1B1F,EAASE,EAAU1G,MAEnB8C,EAAKqJ,WAAa1P,EAAU0B,gBAAgB7B,EAAU,qBACtDwG,EAAK6H,UAAYlO,EAAU0B,gBAAgB2E,EAAKqJ,WAAY,mBAE5DnH,EAAkBlC,EAAK6H,UAAU9Q,MAGjCiJ,EAAKuN,YAAc1K,EAAe,CACjC,CAACxI,GAAG2F,EAAK6H,UAAUtR,SAAS,GAAKiX,KAAK,EAAG/Z,OAAQ,GACjD,CAAC4G,GAAG2F,EAAK6H,UAAUtR,SAAS,GAAKiX,KAAK,EAAG/Z,OAAQ,GACjD,CAAC4G,GAAG2F,EAAK6H,UAAUtR,SAAS,GAAKiX,KAAK,EAAG/Z,OAAQ,IAIlDoP,EAAa,GAAGxI,GAAGtD,MAAM0W,QAAU5K,EAAa,GAAGxI,GAAGtD,MAAM0W,QAAU,OAEtErD,KAGA9H,EAAuB,CACtBoL,OAAQ1N,EAAK2N,WAKbC,kBAAmB,WAClBnO,aAAaoE,GACbA,EAA4BtO,YAAW,WACnCqQ,GAAcL,IAAMvF,EAAKqJ,WAAWwE,aACtC7N,EAAK2N,YAEN,GAAE,IACH,EACDpE,OAAQmC,GACRoC,QAAShD,GACTiD,MAAOvC,IAKR,IAAIwC,EAAWpK,EAAUxF,eAAiBwF,EAAUrF,cAAgBqF,EAAUnF,cAM9E,IALImF,EAAUqK,eAAkBrK,EAAUwF,YAAa4E,IACtD7N,EAASW,sBAAwBX,EAASU,sBAAwB,GAI/D5G,EAAI,EAAGA,EAAIiM,GAAS1S,OAAQyG,IAC/B+F,EAAK,OAASkG,GAASjM,MAIrBR,IACOuG,EAAKkO,GAAK,IAAIzU,EAAQuG,EAAMrG,IAClC2T,OAGJzG,GAAO,eACP5E,EAAoBA,GAAqB9B,EAAS1M,OAAS,GAEvD0a,MAAMlM,IAAsBA,EAAoB,GAAKA,GAAqByE,QAC7EzE,EAAoB,GAErBjC,EAAKuH,SAAW6G,GAAYnM,IAGzB2B,EAAUxF,eAAiBwF,EAAUrF,gBACvC0H,IAAmB,GAGpBzM,EAAS6U,aAAa,cAAe,SAClClO,EAASyB,QACPqE,GAIHzM,EAASzC,MAAMuX,SAAW,SAH1B9U,EAASzC,MAAMuX,SAAW,WAC1B9U,EAASzC,MAAM8T,IAAMlR,EAAUa,aAAe,YAMnBG,IAA1BgJ,IACFkD,GAAO,iBACPlD,EAAwBF,EAAuB9J,EAAUa,cAI1D,IAAI+T,EAAc,cAiBlB,IAhBGpO,EAASqO,YACXD,GAAepO,EAASqO,UAAY,KAElCrO,EAASY,kBACXwN,GAAe,0BAEhBA,GAAelL,EAAqB,cAAgB,gBACpDkL,GAAe3K,EAAUqK,cAAgB,uBAAyB,GAClEM,GAAe3K,EAAUlE,IAAM,aAAe,GAC9C/F,EAAUuB,SAAS1B,EAAU+U,GAE7BvO,EAAK2N,aAGLxL,GAAwB,EACxB6D,GAAa,KACT/L,EAAI,EAAGA,EAAIiG,EAAajG,IAC3B8N,IAAiB9N,EAAEkI,GAAwB4D,GAAWR,EAAG1C,EAAa5I,GAAGI,GAAGtD,OAGzE2M,GACH/J,EAAUlE,KAAKuK,EAAKqJ,WAAYhH,EAAarC,GAG9C4G,GAAQ,oBAAoB,WAC3B5G,EAAKyO,WAAW5L,EAAa,GAAIZ,EAAkB,GACnDjC,EAAKyO,WAAW5L,EAAa,GAAIZ,EAAkB,GAEnDY,EAAa,GAAGxI,GAAGtD,MAAM0W,QAAU5K,EAAa,GAAGxI,GAAGtD,MAAM0W,QAAU,QAEnEtN,EAASa,OAIXxH,EAASwH,QAIVmI,IACH,IAGEnJ,EAAKyO,WAAW5L,EAAa,GAAIZ,GAEjCjC,EAAK0O,iBAEL7H,GAAO,aAEHZ,KAWHtD,EAAsBgM,aAAY,WAC7B9C,IAAmBzH,GAAgBO,IAAepC,IAAmBvC,EAAKuH,SAAS7F,kBACtF1B,EAAK2N,YAEN,GAAE,MAGJhU,EAAUuB,SAAS1B,EAAU,gBAxK5B,CAyKD,EAGDoV,MAAO,WACF9M,IAIJA,GAAU,EACVC,GAAgB,EAChB8E,GAAO,SACPyC,KAEAuF,GAAY7O,EAAKuH,SAAU,MAAM,EAAMvH,EAAK8O,SAC5C,EAGDA,QAAS,WACRjI,GAAO,WAEJkI,IACFtP,aAAasP,IAGdvV,EAAS6U,aAAa,cAAe,QACrC7U,EAASe,UAAYiJ,EAElBb,GACFqM,cAAcrM,GAGfhJ,EAAUG,OAAOkG,EAAKqJ,WAAYhH,EAAarC,GAG/CrG,EAAUG,OAAOtH,OAAQ,SAAUwN,GAEnCiP,KAEAjD,KAEArF,GAAa,IACb,EAQDuI,MAAO,SAAS3J,EAAEC,EAAE2J,GACfA,IACA5J,EAAIV,GAAesF,IAAI5E,EACzBA,EAAIV,GAAesF,IAAI5E,EACdA,EAAIV,GAAetF,IAAIgG,IAChCA,EAAIV,GAAetF,IAAIgG,GAGrBC,EAAIX,GAAesF,IAAI3E,EACzBA,EAAIX,GAAesF,IAAI3E,EACdA,EAAIX,GAAetF,IAAIiG,IAChCA,EAAIX,GAAetF,IAAIiG,IAIzBG,GAAWJ,EAAIA,EACfI,GAAWH,EAAIA,EACfiC,IACA,EAED7O,YAAa,SAAUmS,GACtBA,EAAIA,GAAKvY,OAAOqG,MACbyJ,EAAqByI,EAAEhS,OACzBuJ,EAAqByI,EAAEhS,MAAMgS,EAE9B,EAGDqE,KAAM,SAAS3b,GAId,IAAI4b,GAFJ5b,EAAQ+S,GAAa/S,IAEFwO,EACnB+D,GAAaqJ,EAEbpN,EAAoBxO,EACpBuM,EAAKuH,SAAW6G,GAAYnM,GAC5B4D,IAAsBwJ,EAEtBpH,GAAgBlC,GAAWR,EAAIM,IAG/BmG,KACAjH,IAAuB,EAEvB/E,EAAK0O,gBACL,EACDY,KAAM,WACLtP,EAAKoP,KAAMnN,EAAoB,EAC/B,EACDsN,KAAM,WACLvP,EAAKoP,KAAMnN,EAAoB,EAC/B,EAGDuN,mBAAoB,SAASC,GAM5B,GALGA,GACF5I,GAAO,eAAgB,GAIrBhE,EAAa,GAAGxI,GAAG9D,SAAS/C,OAAQ,CACtC,IAAIkc,EAAc7M,EAAa,GAAGxI,GAAG9D,SAAS,GAE7CuO,GADGnL,EAAUwB,SAASuU,EAAa,mBACXA,EAAY3Y,MAEZ,IAE5B,MACG+N,GAAwB,KAGzBD,GAAiB7E,EAAKuH,SAASmC,OAC/BlH,EAAkBD,EAAiBvC,EAAKuH,SAAS7F,iBAEjDiE,GAAWJ,EAAIV,GAAe8K,OAAOpK,EACrCI,GAAWH,EAAIX,GAAe8K,OAAOnK,EAElCiK,GACF5I,GAAO,cAER,EAGD+I,oBAAqB,WACpBhN,GAAmB,EACnB,IAAI,IAAI3I,EAAI,EAAGA,EAAIiG,EAAajG,IAC3B4I,EAAa5I,GAAGwH,OACnBoB,EAAa5I,GAAGwH,KAAKoO,aAAc,EAGrC,EAEDnB,eAAgB,SAASoB,GAExB,GAAkB,IAAf9J,GAAH,CAIA,IACC+J,EADGC,EAAUvT,KAAKwT,IAAIjK,IAGvB,KAAG8J,GAAmBE,EAAU,GAAhC,CAKAhQ,EAAKuH,SAAW6G,GAAYnM,GAC5BmE,IAAuB,EAEvBS,GAAO,eAAgBb,IAEpBgK,GAAW9P,IACbiC,GAAwB6D,IAAcA,GAAa,GAAK9F,EAAcA,GACtE8P,EAAU9P,GAEX,IAAI,IAAIjG,EAAI,EAAGA,EAAI+V,EAAS/V,IACxB+L,GAAa,GACf+J,EAAalN,EAAakE,QAC1BlE,EAAa3C,EAAY,GAAK6P,EAE9B5N,IACA4F,IAAiB5F,EAAqB,GAAK4D,GAAWR,EAAGwK,EAAW1V,GAAGtD,OACvEiJ,EAAKyO,WAAWsB,EAAY9N,EAAoB+N,EAAU/V,EAAI,EAAI,KAElE8V,EAAalN,EAAaqN,MAC1BrN,EAAasN,QAASJ,GAEtB5N,IACA4F,GAAgB5F,EAAuB4D,GAAWR,EAAGwK,EAAW1V,GAAGtD,OACnEiJ,EAAKyO,WAAWsB,EAAY9N,EAAoB+N,EAAU/V,EAAI,EAAI,IAMpE,GAAG6K,IAAkD,IAAzBrI,KAAKwT,IAAIjK,IAAmB,CAEvD,IAAIoK,EAAWhC,GAAWtL,GACvBsN,EAAS1O,mBAAqBa,IAChCoH,GAAmByG,EAAWxK,IAC9B+B,GAAcyI,GACdxI,GAAqBwI,GAGtB,CAGDpK,GAAa,EAEbhG,EAAKwP,qBAEL1M,EAAiBb,EAEjB4E,GAAO,cAlDN,CAPA,CA2DD,EAID8G,WAAY,SAASwB,GAEpB,IAAIlJ,IAAoB9F,EAASyB,MAAO,CACvC,IAAIyO,EAAgB1W,EAAUa,aAK9B,GAJGmJ,IAA0B0M,IAC5B7W,EAASzC,MAAM8T,IAAMwF,EAAgB,KACrC1M,EAAwB0M,IAErBlB,GAAShJ,GAAmBZ,IAAM/S,OAAO8d,YAAcnK,GAAmBX,IAAMhT,OAAO+d,YAC1F,OAEDpK,GAAmBZ,EAAI/S,OAAO8d,WAC9BnK,GAAmBX,EAAIhT,OAAO+d,YAG9B/W,EAASzC,MAAM6T,OAASzE,GAAmBX,EAAI,IAC/C,CAkBD,GAdAI,GAAcL,EAAIvF,EAAKqJ,WAAWwE,YAClCjI,GAAcJ,EAAIxF,EAAKqJ,WAAWmH,aAElC9E,KAEA3F,GAAWR,EAAIK,GAAcL,EAAI9I,KAAK4L,MAAMzC,GAAcL,EAAIpF,EAASE,SACvE0F,GAAWP,EAAII,GAAcJ,EAE7ByC,GAAgBlC,GAAWR,EAAIM,IAE/BgB,GAAO,qBAIqBlM,IAAzBwH,EAAoC,CAMtC,IAJA,IAAIsO,EACHhP,EACAiP,EAEOzW,EAAI,EAAGA,EAAIiG,EAAajG,IAC/BwW,EAAS5N,EAAa5I,GACtB8N,IAAiB9N,EAAEkI,GAAwB4D,GAAWR,EAAGkL,EAAOpW,GAAGtD,OAEnE2Z,EAASzO,EAAkBhI,EAAE,EAE1BkG,EAASK,MAAQkG,KAAiB,IACpCgK,EAASlK,GAAakK,KAIvBjP,EAAO2M,GAAYsC,MAIN9N,GAAoBnB,EAAKoO,cAAgBpO,EAAKiI,SAE1D1J,EAAK2Q,WAAYlP,GAEjBzB,EAAKyO,WAAYgC,EAAQC,GAGhB,IAANzW,IACF+F,EAAKuH,SAAW9F,EAChBzB,EAAKwP,oBAAmB,IAGzB/N,EAAKoO,aAAc,IAEQ,IAAlBY,EAAOhd,OAAgBid,GAAU,GAE1C1Q,EAAKyO,WAAYgC,EAAQC,GAEvBjP,GAAQA,EAAKoG,YACf8B,GAAmBlI,EAAMmE,IACzB+B,GAAclG,GACdmG,GAAqBnG,IAIvBmB,GAAmB,CACnB,CAEDJ,EAAkBD,EAAiBvC,EAAKuH,SAAS7F,kBACjDmD,GAAiB7E,EAAKuH,SAASmC,UAG9B/D,GAAWJ,EAAIV,GAAe8K,OAAOpK,EACrCI,GAAWH,EAAIX,GAAe8K,OAAOnK,EACrCiC,IAAsB,IAGvBZ,GAAO,SACP,EAGD+J,OAAQ,SAAS1G,EAAe2G,EAAaC,EAAOzE,EAAU0E,GAS1DF,IACFrO,EAAkBD,EAClBoG,GAAcpD,EAAI9I,KAAKwT,IAAIY,EAAYtL,GAAKI,GAAWJ,EACvDoD,GAAcnD,EAAI/I,KAAKwT,IAAIY,EAAYrL,GAAKG,GAAWH,EACvDoD,GAAgBlD,GAAiBC,KAGlC,IAAIqE,EAAgBR,GAAoBU,GAAe,GACtDD,EAAgB,CAAA,EAEjBF,GAAqB,IAAKC,EAAeC,EAAeC,GACxDH,GAAqB,IAAKC,EAAeC,EAAeC,GAExD,IAAIxI,EAAmBa,EACnByO,EAAmB,CACtBzL,EAAGI,GAAWJ,EACdC,EAAGG,GAAWH,GAGfuD,GAAYkB,GAEZ,IAAIqC,EAAW,SAAS2E,GACZ,IAARA,GACF1O,EAAiB2H,EACjBvE,GAAWJ,EAAI0E,EAAc1E,EAC7BI,GAAWH,EAAIyE,EAAczE,IAE7BjD,GAAkB2H,EAAgBxI,GAAoBuP,EAAMvP,EAC5DiE,GAAWJ,GAAK0E,EAAc1E,EAAIyL,EAAiBzL,GAAK0L,EAAMD,EAAiBzL,EAC/EI,GAAWH,GAAKyE,EAAczE,EAAIwL,EAAiBxL,GAAKyL,EAAMD,EAAiBxL,GAG7EuL,GACFA,EAASE,GAGVxJ,GAA8B,IAARwJ,IAGpBH,EACF7E,GAAa,eAAgB,EAAG,EAAG6E,EAAOzE,GAAY1S,EAAU0C,OAAOC,KAAKM,MAAO0P,GAEnFA,EAAS,EAEV,GAeE4E,GAAqB,GACxBC,GAAyB,GAMzBnI,GAAI,CAAA,EACJF,GAAK,CAAA,EACLV,GAAQ,CAAA,EACRgJ,GAAa,CAAA,EACbC,GAAc,CAAA,EACdC,GAAgB,GAChBC,GAAsB,CAAA,EAEtBC,GAAa,GACbC,GAAa,CAAA,EAKbC,GAAuB,EACvBC,GAAerM,KACfsM,GAAmB,EAYnBtJ,GAAiBhD,KAGjBqD,GAAgBrD,KAChBuM,GAAmBvM,KAOnBwM,GAAiB,SAASjJ,EAAIC,GAC7B,OAAOD,EAAGtD,IAAMuD,EAAGvD,GAAKsD,EAAGrD,IAAMsD,EAAGtD,GAErCuM,GAAkB,SAASC,EAAQC,GAClC,OAAOxV,KAAKwT,IAAI+B,EAAOzM,EAAI0M,EAAO1M,GAAKtF,GAAqBxD,KAAKwT,IAAI+B,EAAOxM,EAAIyM,EAAOzM,GAAKvF,GAE7FiS,GAA2B,SAASrJ,EAAIC,GAGvC,OAFA2I,GAAWlM,EAAI9I,KAAKwT,IAAKpH,EAAGtD,EAAIuD,EAAGvD,GACnCkM,GAAWjM,EAAI/I,KAAKwT,IAAKpH,EAAGrD,EAAIsD,EAAGtD,GAC5B/I,KAAK0V,KAAKV,GAAWlM,EAAIkM,GAAWlM,EAAIkM,GAAWjM,EAAIiM,GAAWjM,IAE1EyJ,GAAsB,WAClBzK,IACFjB,EAAUiB,GACVA,EAAiB,OAGnB4N,GAAkB,WACdhO,IACFI,EAAiBlB,EAAW8O,IAC5BC,OAGFC,GAAU,WACT,QAAgC,QAAvBnS,EAAS0B,WAAuBU,IAAoBvC,EAAKuH,SAAS7F,mBAI5E6Q,GAAkB,SAASlY,EAAIhB,GAC5B,SAAIgB,GAAMA,IAAOxF,aAKdwF,EAAGmY,aAAa,UAAYnY,EAAGmY,aAAa,SAAS9e,QAAQ,sBAAwB,KAIpF2F,EAAGgB,GACCA,EAGDkY,GAAgBlY,EAAG1B,WAAYU,KAGzCoZ,GAAc,CAAA,EACdC,GAAgC,SAAS3H,EAAG4H,GAI3C,OAHGF,GAAYG,SAAWL,GAAgBxH,EAAElR,OAAQsG,EAASkB,oBAE7DwF,GAAO,mBAAoBkE,EAAG4H,EAAQF,IAC/BA,GAAYG,SAGpBC,GAAuB,SAASzV,EAAO4L,GAItC,OAHAA,EAAEzD,EAAInI,EAAM0V,MACZ9J,EAAExD,EAAIpI,EAAM2V,MACZ/J,EAAExJ,GAAKpC,EAAM4V,WACNhK,GAERiK,GAAsB,SAASpK,EAAIC,EAAIoK,GACtCA,EAAQ3N,EAAoB,IAAfsD,EAAGtD,EAAIuD,EAAGvD,GACvB2N,EAAQ1N,EAAoB,IAAfqD,EAAGrD,EAAIsD,EAAGtD,IAExB2N,GAAgB,SAASC,EAAM7N,EAAGC,GACjC,GAAG4N,EAAOrP,EAAyB,GAAI,CACtC,IAAIsP,EAAI7B,GAAWhe,OAAS,EAAIge,GAAWzK,QAAU,GACrDsM,EAAE9N,EAAIA,EACN8N,EAAE7N,EAAIA,EACNgM,GAAWre,KAAKkgB,GAChBtP,EAAyBqP,CACzB,GAGFE,GAAqC,WACpC,IAAI7Y,EAAUkL,GAAWH,EAAIxF,EAAKuH,SAASO,gBAAgBtC,EAC3D,OAAO,EAAK/I,KAAKwT,IAAKxV,GAAWmL,GAAcJ,EAAI,KAKpD+N,GAAW,CAAA,EACXC,GAAW,CAAA,EACXC,GAAiB,GAEjBC,GAAkB,SAAS3I,GAE1B,KAAM0I,GAAejgB,OAAS,GAC7BigB,GAAevD,MAgChB,OA7BI9M,GAiBHiC,GAAe,EAEfiM,GAAczb,SAAQ,SAASmT,GACV,IAAjB3D,GACFoO,GAAe,GAAKzK,EACM,IAAjB3D,KACToO,GAAe,GAAKzK,GAErB3D,IAEJ,KA1BM0F,EAAEhS,KAAKrF,QAAQ,UAAY,EAE1BqX,EAAE4I,SAAW5I,EAAE4I,QAAQngB,OAAS,IAClCigB,GAAe,GAAKZ,GAAqB9H,EAAE4I,QAAQ,GAAIJ,IACpDxI,EAAE4I,QAAQngB,OAAS,IACrBigB,GAAe,GAAKZ,GAAqB9H,EAAE4I,QAAQ,GAAIH,OAKzDD,GAAShO,EAAIwF,EAAE+H,MACfS,GAAS/N,EAAIuF,EAAEgI,MACfQ,GAAS/T,GAAK,GACdiU,GAAe,GAAKF,IAefE,IAGRG,GAAuB,SAASpL,EAAMJ,GAErC,IAAIyL,EAGHC,EAIAC,EACAC,EANAC,EAAYtO,GAAW6C,GAAQJ,EAAMI,GAErC0L,EAAM9L,EAAMI,GAAQ,EACpB2L,EAAwB7L,GAAe/C,EAAI6C,EAAM7C,EACjD6O,EAAiB9L,GAAe/C,EAAIgM,GAAoBhM,EAiBzD,GAXCsO,EADEI,EAAYpP,GAAesF,IAAI3B,IAASyL,EAAYpP,GAAetF,IAAIiJ,GAC3DrI,EAASiB,eAKT,EAGf6S,EAAYtO,GAAW6C,GAAQJ,EAAMI,GAAQqL,GAG1C1T,EAASC,gBAAkBmC,IAAmBvC,EAAKuH,SAAS7F,oBAG1DoD,GAIqB,MAAfE,IAA+B,MAATwD,GAAiBlE,IAE7C4P,GACCD,EAAYpP,GAAesF,IAAI3B,KACjCqL,EAAc1T,EAASiB,eACZyD,GAAesF,IAAI3B,GAC9BsL,EAAgBjP,GAAesF,IAAI3B,GAAQ9C,GAAgB8C,KAIvDsL,GAAiB,GAAKM,EAAiB,IAAM1N,KAAiB,GAClEsN,EAAmBG,EAChBC,EAAiB,GAAKD,EAAwB5C,GAAoBhM,IACpEyO,EAAmBzC,GAAoBhM,IAGrCV,GAAesF,IAAI5E,IAAMV,GAAetF,IAAIgG,IAC9CwO,EAAYE,KAOXA,EAAYpP,GAAetF,IAAIiJ,KACjCqL,EAAa1T,EAASiB,eACCyD,GAAetF,IAAIiJ,GAC1CsL,EAAgBpO,GAAgB8C,GAAQ3D,GAAetF,IAAIiJ,KAGvDsL,GAAiB,GAAKM,EAAiB,IAAM1N,KAAiB,GAClEsN,EAAmBG,EAEhBC,EAAiB,GAAKD,EAAwB5C,GAAoBhM,IACpEyO,EAAmBzC,GAAoBhM,IAIrCV,GAAesF,IAAI5E,IAAMV,GAAetF,IAAIgG,IAC9CwO,EAAYE,KAzCfD,EAAmBG,EAmDR,MAAT3L,GAmBF,YAjBwB7N,IAArBqZ,IACF/L,GAAgB+L,GAAkB,GAEjCvP,EADEuP,IAAqBzC,GAAoBhM,GAO1CV,GAAesF,IAAI5E,IAAMV,GAAetF,IAAIgG,SAC7B5K,IAAdoZ,EACFpO,GAAWJ,EAAIwO,EACLtP,IACVkB,GAAWJ,GAAK6C,EAAM7C,EAAIsO,SAIAlZ,IAArBqZ,EAKLjP,IAECN,GACAlC,EAAiBvC,EAAKuH,SAASC,WACjC7B,GAAW6C,IAASJ,EAAMI,GAAQqL,IAWtCQ,GAAe,SAAStJ,GAOvB,KAAc,cAAXA,EAAEhS,MAAwBgS,EAAEuJ,OAAS,GAIxC,GAAGC,GACFxJ,EAAEO,sBAIH,IAAGnH,GAAyC,cAAX4G,EAAEhS,KAAnC,CAYA,GARG2Z,GAA8B3H,GAAG,IACnCA,EAAEO,iBAKHzE,GAAO,eAEJzD,EAAsB,CACxB,IAAIoR,EAAe7a,EAAUgC,YAAY2V,GAAevG,EAAE0J,UAAW,MAClED,EAAe,IACjBA,EAAelD,GAAc9d,QAE9B8d,GAAckD,GAAgB,CAACjP,EAAEwF,EAAE+H,MAAOtN,EAAEuF,EAAEgI,MAAOvT,GAAIuL,EAAE0J,UAC3D,CAID,IAAIC,EAAkBhB,GAAgB3I,GACrC4J,EAAYD,EAAgBlhB,OAE7BkR,EAAiB,KAEjBsH,KAGI5H,GAA6B,IAAduQ,IAIlBvQ,EAAca,IAAe,EAC7BtL,EAAUlE,KAAKjD,OAAQ4P,EAAepC,GAEtCiE,EACCmB,GACAF,GACAhB,EACAO,EACAF,EACAF,EACAC,GAAe,EAEhBU,GAAa,KAEb6B,GAAO,kBAAmB6N,GAE1B9L,GAAgBlD,GAAiBC,IAEjCF,GAAaF,EAAIE,GAAaD,EAAI,EAClCoD,GAAgBwI,GAAYsD,EAAgB,IAC5C9L,GAAgByI,GAAaD,IAG7BG,GAAoBhM,EAAIQ,GAAWR,EAAIM,GAEvC2L,GAAa,CAAC,CACbjM,EAAG6L,GAAW7L,EACdC,EAAG4L,GAAW5L,IAGfzB,EAAyBD,EAAoBkD,KAG7CwC,GAAqBjH,GAAgB,GAGrC0M,KACAmD,OAKGzN,IAAcgQ,EAAY,IAAM5P,KAAyBN,IAC5DjC,EAAkBD,EAClB+B,GAAe,EAEfK,GAAaN,GAAgB,EAC7BoB,GAAaD,EAAIC,GAAaF,EAAI,EAElCqD,GAAgBlD,GAAiBC,IAEjCiD,GAAgBI,GAAG0L,EAAgB,IACnC9L,GAAgBE,GAAI4L,EAAgB,IAEpCzB,GAAoBjK,GAAGF,GAAI+I,IAE3BlJ,GAAcpD,EAAI9I,KAAKwT,IAAI4B,GAAiBtM,GAAKI,GAAWJ,EAC5DoD,GAAcnD,EAAI/I,KAAKwT,IAAI4B,GAAiBrM,GAAKG,GAAWH,EACtCZ,GAAuBsN,GAAyBlJ,GAAGF,IA1FzE,GAiGF8L,GAAc,SAAS7J,GAItB,GAFAA,EAAEO,iBAEClI,EAAsB,CACxB,IAAIoR,EAAe7a,EAAUgC,YAAY2V,GAAevG,EAAE0J,UAAW,MACrE,GAAGD,GAAgB,EAAG,CACrB,IAAIxL,EAAIsI,GAAckD,GACtBxL,EAAEzD,EAAIwF,EAAE+H,MACR9J,EAAExD,EAAIuF,EAAEgI,KACR,CACD,CAED,GAAG3O,EAAa,CACf,IAAIyQ,EAAcnB,GAAgB3I,GAClC,GAAI/F,IAAeT,GAAWI,GAe7BD,EAAiBmQ,OAbjB,GAAGvM,GAAe/C,IAAMQ,GAAWR,EAAIM,GAEtCb,GAAa,QACP,CACN,IAAIqK,EAAO5S,KAAKwT,IAAI4E,EAAY,GAAGtP,EAAI6L,GAAW7L,GAAK9I,KAAKwT,IAAI4E,EAAY,GAAGrP,EAAI4L,GAAW5L,GAE3F/I,KAAKwT,IAAIZ,IAAS8B,KACpBnM,GAAaqK,EAAO,EAAI,IAAM,IAC9B3K,EAAiBmQ,EAElB,CAKF,GAGFxC,GAAmB,WAElB,GAAI3N,EAAJ,CAIA,IAAIiQ,EAAYjQ,EAAelR,OAE/B,GAAiB,IAAdmhB,EASH,GALA/L,GAAgBI,GAAGtE,EAAe,IAElC0D,GAAM7C,EAAIyD,GAAEzD,EAAI6L,GAAW7L,EAC3B6C,GAAM5C,EAAIwD,GAAExD,EAAI4L,GAAW5L,EAExBb,IAAcgQ,EAAY,EAAG,CAO/B,GAJAvD,GAAW7L,EAAIyD,GAAEzD,EACjB6L,GAAW5L,EAAIwD,GAAExD,GAGZ4C,GAAM7C,IAAM6C,GAAM5C,GAAKsM,GAAepN,EAAe,GAAIoE,IAC7D,OAGDF,GAAgBE,GAAIpE,EAAe,IAG/BJ,IACHA,GAAe,EACfuC,GAAO,uBAIR,IAAIiO,EAAiB5C,GAAyBlJ,GAAEF,IAE5CL,EAAYsM,GAAoBD,GAGjCrM,EAAYzI,EAAKuH,SAAS7F,iBAAmB1B,EAAKuH,SAAS7F,iBAAmB,KAChF0D,IAAsB,GAIvB,IAAI4P,EAAe,EAClBC,EAAerL,KACfsL,EAAerL,KAEhB,GAAKpB,EAAYwM,EAEhB,GAAG9U,EAASM,eAAiB2E,IAAuB5C,GAAmBxC,EAAKuH,SAAS7F,iBAAkB,CAEtG,IACIyT,EAAU,GADEF,EAAexM,IACAwM,EAAe,KAE9ChO,GAAgBkO,GAChBtO,GAAO,eAAgBsO,GACvBjQ,IAAkB,CACvB,MACK8P,GAAgBC,EAAexM,GAAawM,GAC1B,IACjBD,EAAe,GAEhBvM,EAAYwM,EAAeD,GAAgBC,EAAe,QAGhDxM,EAAYyM,KAEvBF,GAAgBvM,EAAYyM,IAAiC,EAAfD,IAC5B,IACjBD,EAAe,GAEhBvM,EAAYyM,EAAeF,EAAeC,GAGxCD,EAAe,IACjBA,EAAe,GAOhB/B,GAAoBjK,GAAGF,GAAI6I,IAG3BlM,GAAaF,GAAKoM,GAAapM,EAAIsM,GAAiBtM,EACpDE,GAAaD,GAAKmM,GAAanM,EAAIqM,GAAiBrM,EACpDoD,GAAgBiJ,GAAkBF,IAElChM,GAAWJ,EAAIgD,GAAoB,IAAKE,GACxC9C,GAAWH,EAAI+C,GAAoB,IAAKE,GAExCxE,EAAewE,EAAYlG,EAC3BA,EAAiBkG,EACjBhB,IAEH,KAAS,CAIN,IAAIzC,GACH,OAqBD,GAlBGC,KACFA,IAAe,EAIXxI,KAAKwT,IAAI7H,GAAM7C,IAAM4L,KACxB/I,GAAM7C,GAAKb,EAAe,GAAGa,EAAI8L,GAAY9L,GAG1C9I,KAAKwT,IAAI7H,GAAM5C,IAAM2L,KACxB/I,GAAM5C,GAAKd,EAAe,GAAGc,EAAI6L,GAAY7L,IAI/C4L,GAAW7L,EAAIyD,GAAEzD,EACjB6L,GAAW5L,EAAIwD,GAAExD,EAGF,IAAZ4C,GAAM7C,GAAuB,IAAZ6C,GAAM5C,EACzB,OAGD,GAAkB,MAAfR,IAAsB7E,EAASQ,sBAC7B2R,KAAW,CACd7M,GAAaD,GAAK4C,GAAM5C,EACxBG,GAAWH,GAAK4C,GAAM5C,EAEtB,IAAI4P,EAAe9B,KAOnB,OALApP,GAAyB,EACzB2C,GAAO,iBAAkBuO,GAEzBnO,GAAgBmO,QAChB3N,IAEA,CAGF0L,GAAcnM,KAAmBgC,GAAEzD,EAAGyD,GAAExD,GAExCjB,GAAS,EACTM,GAAiB7E,EAAKuH,SAASmC,OAEPkK,GAAqB,IAAKxL,MAEjDwL,GAAqB,IAAKxL,IAE1BW,GAAYpD,IACZ8B,KAGD,CA3JA,GAgKF4N,GAAiB,SAAStK,GAEzB,GAAGnH,EAAUrF,aAAe,CAE3B,GAAG4F,GAAyC,YAAX4G,EAAEhS,KAClC,OAOGgS,EAAEhS,KAAKrF,QAAQ,UAAY,IAC9B+L,aAAa0E,GACbA,EAA6B5O,YAAW,WACvC4O,EAA6B,CAC7B,GAAE,KAGJ,CAQD,IAAImR,EAEJ,GARAzO,GAAO,aAEJ6L,GAA8B3H,GAAG,IACnCA,EAAEO,iBAKAlI,EAAsB,CACxB,IAAIoR,EAAe7a,EAAUgC,YAAY2V,GAAevG,EAAE0J,UAAW,MAErE,GAAGD,GAAgB,EAGlB,GAFAc,EAAehE,GAAc3d,OAAO6gB,EAAc,GAAG,GAElD7W,UAAUC,iBAAkB,CAC9B,IAAI2X,EAAkB,CACrB,EAAG,QACH,EAAG,QACH,EAAG,OAEJD,EAAavc,KAAOwc,EAAgBxK,EAAEyK,aAElCF,EAAavc,OAChBuc,EAAavc,KAAOgS,EAAEyK,aAAe,QAE3C,MACKF,EAAavc,KAAOgS,EAAEyK,aAAe,OAIvC,CAED,IACCC,EADGC,EAAYhC,GAAgB3I,GAE/B4J,EAAYe,EAAUliB,OAOvB,GALc,YAAXuX,EAAEhS,OACJ4b,EAAY,GAII,IAAdA,EAEF,OADAjQ,EAAiB,MACV,EAIS,IAAdiQ,GACF/L,GAAgByI,GAAaqE,EAAU,IAKvB,IAAdf,GAAoB3P,IAAeD,KACjCuQ,IACW,YAAXvK,EAAEhS,KACJuc,EAAe,CAAC/P,EAAGwF,EAAE+H,MAAOtN,EAAGuF,EAAEgI,MAAOha,KAAK,SACpCgS,EAAE4K,gBAAkB5K,EAAE4K,eAAe,KAC9CL,EAAe,CAAC/P,EAAGwF,EAAE4K,eAAe,GAAG7C,MAAOtN,EAAGuF,EAAE4K,eAAe,GAAG5C,MAAOha,KAAK,WAInF8N,GAAO,eAAgBkE,EAAGuK,IAI3B,IAAIM,GAAmB,EAmCvB,GAhCiB,IAAdjB,IACFvQ,GAAc,EACdzK,EAAUG,OAAOtH,OAAQ4P,EAAepC,GAExCiP,KAEGtK,GAEFiR,EAAkB,GACa,IAAtBhE,KACTgE,EAAkB5O,KAAoB4K,KAGxCA,GAAiC,IAAd+C,EAAkB3N,MAAqB,EAGzDyO,GADuB,IAArBG,GAA0BA,EAAkB,IAChC,OAEA,QAGZjR,IAAcgQ,EAAY,IAC5BhQ,IAAa,EAGI,IAAdgQ,IACFc,EAAc,iBAEf5O,GAAO,qBAGRnC,EAAiB,KACbH,GAAWD,GAAiBS,IAAyBb,EAezD,GAVA8H,KAGIhI,IACHA,EAAmB6R,MAGpB7R,EAAiB8R,oBAAoB,KAGlC5R,EAIF,GAFmBoP,KAEDnT,EAASS,kBAC1BZ,EAAK4O,YACC,CACN,IAAImH,EAAapQ,GAAWH,EAC3BwQ,EAAmB7Q,GAEpB8G,GAAa,eAAgB,EAAG,EAAG,IAAKtS,EAAU0C,OAAOS,MAAMP,KAAK,SAAS0U,GAE5EtL,GAAWH,GAAKxF,EAAKuH,SAASO,gBAAgBtC,EAAIuQ,GAAc9E,EAAM8E,EAEtE9O,IAAmB,EAAI+O,GAAoB/E,EAAM+E,GACjDvO,IACL,IAEIZ,GAAO,iBAAkB,EACzB,KAnBF,CA0BA,IAAMpC,GAAsBM,KAAuC,IAAd4P,EAAiB,CAErE,GADkBsB,GAA8BR,EAAazR,GAE5D,OAEDyR,EAAc,eACd,CAGE1Q,KAKgB,UAAhB0Q,GAMChR,GAAsBlC,EAAiBvC,EAAKuH,SAASC,UACxD0O,GAAoBlS,GANpBmS,KAnBA,GAgCFN,GAAiC,WAEhC,IAAIO,EACHC,EAGG5L,EAAI,CACP6L,gBAAiB,CAAE,EACnBC,cAAe,CAAE,EACjBC,eAAgB,CAAE,EAClBC,cAAgB,CAAE,EAClBC,qBAAuB,CAAE,EACzBC,uBAAyB,CAAE,EAC3BC,0BAA4B,CAAE,EAC9BC,eAAiB,CAAE,EACnBC,oBAAqB,CAAE,EACvBC,gBAAiB,CAAE,EACnBjB,oBAAqB,SAAStN,GAGzBgJ,GAAWhe,OAAS,GACvB4iB,EAAoBpP,KAAoBjD,EAAyB,GACjEsS,EAAiB7E,GAAWA,GAAWhe,OAAO,GAAGgV,KAEjD4N,EAAoBpP,KAAoBlD,EACxCuS,EAAiBhF,GAAY7I,IAE9BiC,EAAE6L,gBAAgB9N,GAAQ4I,GAAW5I,GAAQ6N,EAC7C5L,EAAE8L,cAAc/N,GAAQ/L,KAAKwT,IAAIxF,EAAE6L,gBAAgB9N,IAChDiC,EAAE8L,cAAc/N,GAAQ,GAC1BiC,EAAE+L,eAAehO,GAAQiC,EAAE6L,gBAAgB9N,GAAQ4N,EAEnD3L,EAAE+L,eAAehO,GAAQ,EAEtB/L,KAAKwT,IAAIxF,EAAE+L,eAAehO,IAAS,KACtCiC,EAAE+L,eAAehO,GAAQ,GAG1BiC,EAAEgM,cAAcjO,GAAQ,IACxBiC,EAAEiM,qBAAqBlO,GAAQ,EAAIiC,EAAEgM,cAAcjO,GACnDiC,EAAEkM,uBAAuBnO,GAAQ,CACjC,EAEDwO,8BAA+B,SAASxO,EAAMsI,GACzCrG,EAAEsM,gBAAgBvO,KAElB7C,GAAW6C,GAAQ3D,GAAesF,IAAI3B,GACxCiC,EAAEqM,oBAAoBtO,GAAQ3D,GAAesF,IAAI3B,GAExC7C,GAAW6C,GAAQ3D,GAAetF,IAAIiJ,KAC/CiC,EAAEqM,oBAAoBtO,GAAQ3D,GAAetF,IAAIiJ,SAGf7N,IAAhC8P,EAAEqM,oBAAoBtO,KACxBiC,EAAEgM,cAAcjO,GAAQ,GACxBiC,EAAEiM,qBAAqBlO,GAAQ,EAAIiC,EAAEgM,cAAcjO,GAChDiC,EAAEmM,0BAA0BpO,GAAQ,MAEtCiC,EAAE+L,eAAehO,GAAQ,EACzBiC,EAAEsM,gBAAgBvO,IAAQ,EAE1ByD,GAAa,gBAAgBzD,EAAK7C,GAAW6C,GAC5CiC,EAAEqM,oBAAoBtO,GACtBsI,GAAS,IACTnX,EAAU0C,OAAOC,KAAKC,KACtB,SAAS0a,GACRtR,GAAW6C,GAAQyO,EACnBxP,IACA,MAML,EAGDyP,oBAAqB,SAAS1O,GACzBiC,EAAEsM,gBAAgBvO,KACrBiC,EAAEkM,uBAAuBnO,GAAQiC,EAAEkM,uBAAuBnO,IAASiC,EAAEgM,cAAcjO,GAC5EiC,EAAEiM,qBAAqBlO,GACvBiC,EAAEiM,qBAAqBlO,GAAQiC,EAAE0M,SAAW,IAEnD1M,EAAEmM,0BAA0BpO,GAAQ/L,KAAKwT,IAAIxF,EAAE+L,eAAehO,GAAQiC,EAAEkM,uBAAuBnO,IAC/FiC,EAAEoM,eAAerO,GAAQiC,EAAE+L,eAAehO,GAAQiC,EAAEkM,uBAAuBnO,GAAQiC,EAAE0M,SACrFxR,GAAW6C,IAASiC,EAAEoM,eAAerO,GAGtC,EAED4O,YAAa,WACZ,GAAKxL,GAAYyL,UAChBzL,GAAYyL,QAAQ/Z,IAAMgG,EAAWmH,EAAE2M,aAEvC3M,EAAEwG,IAAMjK,KACRyD,EAAE0M,SAAW1M,EAAEwG,IAAMxG,EAAE6M,QACvB7M,EAAE6M,QAAU7M,EAAEwG,IAEdxG,EAAEyM,oBAAoB,KACtBzM,EAAEyM,oBAAoB,KAEtBzP,KAEAgD,EAAEuM,8BAA8B,KAChCvM,EAAEuM,8BAA8B,KAG5BvM,EAAEmM,0BAA0BrR,EAAI,KAAQkF,EAAEmM,0BAA0BpR,EAAI,KAQ3E,OALAG,GAAWJ,EAAI9I,KAAK4L,MAAM1C,GAAWJ,GACrCI,GAAWH,EAAI/I,KAAK4L,MAAM1C,GAAWH,GACrCiC,UAEAqE,GAAe,UAKjB,GAEF,OAAOrB,GAGRyL,GAAsB,SAASqB,GAU9B,GARAA,EAASzB,oBAAoB,KAE7BjR,GAAiB7E,EAAKuH,SAASmC,OAE/B6N,EAAST,oBAAsB,GAC/BS,EAASR,gBAAkB,GAGxBta,KAAKwT,IAAIsH,EAASf,eAAejR,IAAM,KAAQ9I,KAAKwT,IAAIsH,EAASf,eAAehR,IAAM,IAMxF,OALA+R,EAASX,0BAA0BrR,EAAIgS,EAASX,0BAA0BpR,EAAI,EAG9E+R,EAASP,8BAA8B,KACvCO,EAASP,8BAA8B,MAChC,EAIRjL,GAAwB,WACxBwL,EAASD,QAAUtQ,KACnBuQ,EAASH,eAIVnB,GAAgC,SAASR,EAAazR,GACrD,IAAIwT,EAOAC,EAmBAC,EAjBJ,GARI3S,KACH2M,GAAuBzP,GAOL,UAAhBwT,EAAyB,CAC3B,IAAIkC,EAAiBvG,GAAW7L,EAAI8L,GAAY9L,EAC/CqS,EAAkB5T,EAAiBuS,cAAchR,EAAI,GAInDoS,EAAiBzG,KAClB0G,GAAmB5T,EAAiBsS,gBAAgB/Q,EAAI,IAEzDkS,GAAa,EACJE,GAAkBzG,KAC1B0G,GAAmB5T,EAAiBsS,gBAAgB/Q,GAAK,MAE1DkS,EAAY,EAEb,CAIEA,KAEFxV,GAAqBwV,GAEE,GACtBxV,EAAoB9B,EAASK,KAAOkG,KAAe,EAAI,EACvDgR,GAAa,GACJzV,GAAqByE,OAC9BzE,EAAoB9B,EAASK,KAAO,EAAIkG,KAAe,EACvDgR,GAAa,GAGVA,IAAcvX,EAASK,OAC1BwF,IAAcyR,EACd5R,IAAsB4R,EACtBD,GAAc,IAOhB,IAEIK,EAFAC,EAAa/R,GAAWR,EAAIM,GAC5BkS,EAAgBtb,KAAKwT,IAAK6H,EAAaxP,GAAe/C,GA2C1D,OAvCIiS,GAAeM,EAAaxP,GAAe/C,GAAMvB,EAAiBwS,eAAejR,EAAI,GAIxFsS,EAAqBpb,KAAKwT,IAAIjM,EAAiBwS,eAAejR,GAAK,EAC7DwS,EAAgBtb,KAAKwT,IAAIjM,EAAiBwS,eAAejR,GACzD,IAENsS,EAAqBpb,KAAK0N,IAAI0N,EAAoB,KAClDA,EAAqBpb,KAAK8C,IAAIsY,EAAoB,MAPlDA,EAAqB,IAUnBnG,KAAyBzP,IAC3BuV,GAAc,GAGfzS,IAAuB,EAEvB8B,GAAO,uBAEPoF,GAAa,aAAc3D,GAAe/C,EAAGuS,EAAYD,EAAoBle,EAAU0C,OAAOS,MAAMP,IACnG0L,IACA,WACC+D,KACAjH,IAAuB,EACvB2M,IAAwB,GAErB8F,GAAe9F,KAAyBzP,IAC1CjC,EAAK0O,iBAGN7H,GAAO,yBACP,IAGC2Q,GACFxX,EAAK0O,gBAAe,GAGd8I,GAGRzC,GAAsB,SAASiD,GAC9B,OAAQ,EAAIpT,GAAuBoT,EAAkBxV,GAItD2T,GAAuB,WACtB,IAAIjM,EAAgB3H,EACnB0S,EAAerL,KACfsL,EAAerL,KAEXtH,EAAiB0S,EACrB/K,EAAgB+K,EACL1S,EAAiB2S,IAC5BhL,EAAgBgL,GAGjB,IACC5I,EADG2L,EAAc,EAEjBC,EAAiB/S,GAElB,OAAGD,KAAoBjB,IAAiBmB,IAAuB7C,EAAiB0S,GAE/EjV,EAAK4O,SACE,IAGL1J,KACFoH,EAAW,SAAS2E,GACnBhK,IAAmBgR,EAAcC,GAAkBjH,EAAMiH,KAI3DlY,EAAK4Q,OAAO1G,EAAe,EAAG,IAAMvQ,EAAU0C,OAAOS,MAAMP,IAAK+P,IACzD,EACP,EAGFjG,GAAgB,WAAY,CAC3BE,cAAe,CAEd4R,aAAc,WAGb,IAAIC,EAAgB,SAASC,EAAMC,EAAMC,EAAMC,EAAIC,GAClD1V,EAAkBsV,EAAOC,EACzBtV,EAAiBqV,EAAOE,EACxBtV,EAAgBoV,EAAOG,EAEtBtV,EADEuV,EACiBJ,EAAOI,EAEP,KAIrBrV,EAAuBQ,EAAUnG,eACNmG,EAAUxG,QAEpCwG,EAAUxG,OAAQ,GAGhBgG,EACCzF,UAAUC,iBAEZwa,EAAc,YAAa,OAAQ,OAAQ,KAAM,UAEjDA,EAAc,UAAW,OAAQ,OAAQ,KAAM,UAEvCxU,EAAUxG,OACnBgb,EAAc,QAAS,QAAS,OAAQ,MAAO,UAC/C/U,GAAqB,GAErB+U,EAAc,QAAS,OAAQ,OAAQ,MAGxChW,EAAgBY,EAAiB,IAAMC,EAAiB,IAAOC,EAC/Db,EAAcU,EAEXK,IAAyBC,IAC3BA,EAAsB1F,UAAU+a,eAAiB,GAAO/a,UAAUgb,iBAAmB,GAGtF3Y,EAAK4Y,kBAAoBvV,EAEzBf,EAAqBS,GAAmBsR,GACxC/R,EAAqBU,GAAkB4R,GACvCtS,EAAqBW,GAAiBoS,GAEnCnS,IACFZ,EAAqBY,GAAoBZ,EAAqBW,IAI5DW,EAAUxG,QACZiF,GAAe,aACfD,GAAiB,qBACjBE,EAAqBuW,UAAYvW,EAAqBS,GACtDT,EAAqBwW,UAAYxW,EAAqBU,GACtDV,EAAqByW,QAAUzW,EAAqBW,IAGjDI,IAEHlD,EAASC,gBAAiB,EAE3B,KAqBH,IAAI2O,GAmLAiK,GAGHC,GACA1E,GAYGnG,GACH1H,GAnMAmI,GAAc,SAASpN,EAAMnL,EAAKiG,EAAK2c,GAWtC,IAAIC,EATDpK,IACFtP,aAAasP,IAGdwF,IAAsB,EACtB0E,IAAqB,EAKlBxX,EAAK2X,eACPD,EAAc1X,EAAK2X,cACnB3X,EAAK2X,cAAgB,MAErBD,EAAchZ,EAASkZ,kBAAoBlZ,EAASkZ,iBAAiBpX,GAGtE,IA8CKqX,EACHC,EA/CEC,EAAWjd,EAAM4D,EAASU,sBAAwBV,EAASW,sBAE3DyL,EAAa,WAChBT,GAAe,eACXvP,GAQHyD,EAAKxG,SAASigB,gBAAgB,SAC9BzZ,EAAKmH,GAAGsS,gBAAgB,WARxBxS,GAAgB,GACb3Q,IACFA,EAAIS,MAAM0W,QAAU,SAErB9T,EAAUuB,SAAS1B,EAAU,qBAC7BqN,GAAO,eAAiBtK,EAAM,SAAW,WAMvC2c,GACFA,IAED3E,IAAsB,GAIvB,IAAIiF,IAAaL,QAAiCxe,IAAlBwe,EAAY5T,EAmB3C,OAjBAsB,GAAO,eAAiBtK,EAAM,MAAQ,OAEtCgG,EAAiBd,EAAKC,iBACtBkH,GAAgBjD,GAAalE,EAAKqG,iBAClCL,KAEAjO,EAASzC,MAAMmQ,QAAU3K,EAAM,EAAI,EACnC0K,GAAgB,QAEbuS,EACFjkB,YAAW,WACVgX,GACA,GAAEiN,GAEHjN,KAOG+M,EAAetX,EAClBuX,GAAkBvZ,EAAKuH,SAAS9O,KAAOuH,EAAKuH,SAASmS,WAAavZ,EAASY,gBAGzEU,EAAKkY,UACPlY,EAAKkY,QAAQ5iB,MAAM6iB,yBAA2B,UAG3Crd,IACHgG,EAAiB4W,EAAYrP,EAAIrI,EAAKqI,EACtCnE,GAAWJ,EAAI4T,EAAY5T,EAC3BI,GAAWH,EAAI2T,EAAY3T,EAAI/B,EAE/BzD,EAAKuZ,EAAiB,WAAa,MAAMxiB,MAAMmQ,QAAU,KACzDO,MAGDsE,GAAwB,eAErBxP,IAAQ+c,GACV3f,EAAUmB,YAAYtB,EAAU,qBAG9B+f,IACChd,EACF5C,GAAY2f,EAAe,SAAW,OAAS,SAAU9f,EAAU,yBAEnEjE,YAAW,WACVoE,EAAUuB,SAAS1B,EAAU,wBAC7B,GAAE,KAILuV,GAAqBxZ,YAAW,WAK/B,GAHAsR,GAAO,eAAiBtK,EAAM,MAAQ,OAGlCA,EAmBG,CAGN,IAAI2N,EAAgBiP,EAAYrP,EAAIrI,EAAKqI,EACxCkH,EAAmB,CAClBzL,EAAGI,GAAWJ,EACdC,EAAGG,GAAWH,GAEf9D,EAAmBa,EACnBsX,EAAkB1U,GAClBmH,EAAW,SAAS2E,GAER,IAARA,GACF1O,EAAiB2H,EACjBvE,GAAWJ,EAAI4T,EAAY5T,EAC3BI,GAAWH,EAAI2T,EAAY3T,EAAK7B,IAEhCpB,GAAkB2H,EAAgBxI,GAAoBuP,EAAMvP,EAC5DiE,GAAWJ,GAAK4T,EAAY5T,EAAIyL,EAAiBzL,GAAK0L,EAAMD,EAAiBzL,EAC7EI,GAAWH,GAAK2T,EAAY3T,EAAI7B,EAAwBqN,EAAiBxL,GAAKyL,EAAMD,EAAiBxL,GAGtGiC,KACG8R,EACF/f,EAASzC,MAAMmQ,QAAU,EAAI+J,EAE7BhK,GAAiB4S,EAAkB5I,EAAM4I,IAIzCP,EACFrN,GAAa,cAAe,EAAG,EAAGuN,EAAU7f,EAAU0C,OAAOS,MAAMP,IAAK+P,EAAUC,IAElFD,EAAS,GACTyC,GAAqBxZ,WAAWgX,EAAYiN,EAAW,IAExD,MAhDAjX,EAAiBd,EAAKC,iBACtBkH,GAAgBjD,GAAalE,EAAKqG,iBAClCL,KACAR,GAAgB,GAEbsS,EACF/f,EAASzC,MAAMmQ,QAAU,EAEzBD,GAAgB,GAGjB8H,GAAqBxZ,WAAWgX,EAAYiN,EAAW,MAuCtDjd,EAAM,GAAK,KAmBhBud,GAAmB,CAAE,EACrBC,GAAsB,GAGtBC,GAA4B,CAC3BvmB,MAAO,EACPwmB,SAAU,wGACVC,yBAAyB,EACzBC,QAAS,CAAC,EAAE,GACZC,cAAe,WACd,OAAOpB,GAAOxlB,MACd,GAOF6mB,GAAiB,WAChB,MAAO,CACN1K,OAAO,CAACpK,EAAE,EAAEC,EAAE,GACdjG,IAAI,CAACgG,EAAE,EAAEC,EAAE,GACX2E,IAAI,CAAC5E,EAAE,EAAEC,EAAE,KAGb8U,GAAgC,SAAS7Y,EAAM8Y,EAAiBC,GAC/D,IAAI9Q,EAASjI,EAAKiI,OAGlBA,EAAOiG,OAAOpK,EAAI9I,KAAK4L,OAAOyR,GAAiBvU,EAAIgV,GAAmB,GACtE7Q,EAAOiG,OAAOnK,EAAI/I,KAAK4L,OAAOyR,GAAiBtU,EAAIgV,GAAmB,GAAK/Y,EAAKgZ,KAAK5P,IAGrFnB,EAAOnK,IAAIgG,EAAKgV,EAAkBT,GAAiBvU,EAC9C9I,KAAK4L,MAAMyR,GAAiBvU,EAAIgV,GAChC7Q,EAAOiG,OAAOpK,EAEnBmE,EAAOnK,IAAIiG,EAAKgV,EAAkBV,GAAiBtU,EAC9C/I,KAAK4L,MAAMyR,GAAiBtU,EAAIgV,GAAmB/Y,EAAKgZ,KAAK5P,IAC7DnB,EAAOiG,OAAOnK,EAGnBkE,EAAOS,IAAI5E,EAAKgV,EAAkBT,GAAiBvU,EAAK,EAAImE,EAAOiG,OAAOpK,EAC1EmE,EAAOS,IAAI3E,EAAKgV,EAAkBV,GAAiBtU,EAAK/D,EAAKgZ,KAAK5P,IAAMnB,EAAOiG,OAAOnK,GAEvFmE,GAAqB,SAASlI,EAAMoL,EAAcpE,GAEjD,GAAIhH,EAAKhJ,MAAQgJ,EAAKiY,UAAW,CAChC,IAAIgB,GAAajS,EAcjB,GAZGiS,IACEjZ,EAAKgZ,OACRhZ,EAAKgZ,KAAO,CAAC5P,IAAI,EAAE8P,OAAO,IAG3B9T,GAAO,sBAAuBpF,IAI/BqY,GAAiBvU,EAAIsH,EAAatH,EAClCuU,GAAiBtU,EAAIqH,EAAarH,EAAI/D,EAAKgZ,KAAK5P,IAAMpJ,EAAKgZ,KAAKE,OAE5DD,EAAW,CACd,IAAIE,EAASd,GAAiBvU,EAAI9D,EAAKqI,EACnC+Q,EAASf,GAAiBtU,EAAI/D,EAAKiJ,EAEvCjJ,EAAK+F,SAAWoT,EAASC,EAASD,EAASC,EAG3C,IAAIhZ,EAAY1B,EAAS0B,UAEP,SAAdA,EACH4G,EAAY,EACY,QAAd5G,IACV4G,EAAYhH,EAAK+F,UAGdiB,EAAY,IACfA,EAAY,GAGbhH,EAAKC,iBAAmB+G,EAEpBhH,EAAKiI,SAERjI,EAAKiI,OAAS2Q,KAEf,CAED,IAAI5R,EACH,OASD,OANA6R,GAA8B7Y,EAAMA,EAAKqI,EAAIrB,EAAWhH,EAAKiJ,EAAIjC,GAE7DiS,GAAajS,IAAchH,EAAKC,mBACnCD,EAAKqG,gBAAkBrG,EAAKiI,OAAOiG,QAG7BlO,EAAKiI,MACf,CAOG,OANAjI,EAAKqI,EAAIrI,EAAKiJ,EAAI,EAClBjJ,EAAKC,iBAAmBD,EAAK+F,SAAW,EACxC/F,EAAKiI,OAAS2Q,KACd5Y,EAAKqG,gBAAkBrG,EAAKiI,OAAOiG,OAG5BlO,EAAKiI,QAQdoR,GAAe,SAASrnB,EAAOgO,EAAMsZ,EAASzkB,EAAK0kB,EAAkBC,GAGjExZ,EAAKiY,WAILpjB,IAEFmL,EAAKyZ,eAAgB,EACrBvT,GAAclG,EAAMnL,EAAMmL,IAASzB,EAAKuH,UAAYnB,IAEpD2U,EAAQI,YAAY7kB,GAEjB2kB,GACF1lB,YAAW,WACPkM,GAAQA,EAAK2Z,QAAU3Z,EAAK4Z,cAC9B5Z,EAAK4Z,YAAYtkB,MAAM0W,QAAU,OACjChM,EAAK4Z,YAAc,KAEpB,GAAE,OAONC,GAAgB,SAAS7Z,GACxBA,EAAK8Z,SAAU,EACf9Z,EAAK2Z,QAAS,EACd,IAAI9kB,EAAMmL,EAAKnL,IAAMqD,EAAUO,SAAS,YAAa,OACjDqS,EAAa,WAChB9K,EAAK8Z,SAAU,EACf9Z,EAAK2Z,QAAS,EAEX3Z,EAAK+Z,aACP/Z,EAAK+Z,aAAa/Z,GAElBA,EAAKnL,IAAM,KAEZA,EAAI0C,OAAS1C,EAAI4C,QAAU,KAC3B5C,EAAM,MAUP,OARAA,EAAI0C,OAASuT,EACbjW,EAAI4C,QAAU,WACbuI,EAAKiY,WAAY,EACjBnN,KAGDjW,EAAImC,IAAMgJ,EAAKhJ,IAERnC,GAERmlB,GAAiB,SAASha,EAAMia,GAC/B,GAAGja,EAAKhJ,KAAOgJ,EAAKiY,WAAajY,EAAKoG,UAOrC,OALG6T,IACFja,EAAKoG,UAAU8T,UAAY,IAG5Bla,EAAKoG,UAAU8T,UAAYxb,EAAS8Z,SAAShf,QAAQ,QAAUwG,EAAKhJ,MAC7D,GAITkP,GAAgB,SAASlG,EAAMnL,EAAKslB,GACnC,GAAIna,EAAKhJ,IAAT,CAIInC,IACHA,EAAMmL,EAAKoG,UAAUgU,WAGtB,IAAI/R,EAAI8R,EAASna,EAAKqI,EAAIrN,KAAK4L,MAAM5G,EAAKqI,EAAIrI,EAAK+F,UAClDkD,EAAIkR,EAASna,EAAKiJ,EAAIjO,KAAK4L,MAAM5G,EAAKiJ,EAAIjJ,EAAK+F,UAE7C/F,EAAK4Z,cAAgB5Z,EAAK2Z,SAC5B3Z,EAAK4Z,YAAYtkB,MAAM4T,MAAQb,EAAI,KACnCrI,EAAK4Z,YAAYtkB,MAAM6T,OAASF,EAAI,MAGrCpU,EAAIS,MAAM4T,MAAQb,EAAI,KACtBxT,EAAIS,MAAM6T,OAASF,EAAI,IAftB,GAiBFoR,GAAoB,WAEnB,GAAG/B,GAAoBvmB,OAAQ,CAG9B,IAFA,IAAIuoB,EAEI9hB,EAAI,EAAGA,EAAI8f,GAAoBvmB,OAAQyG,KAC9C8hB,EAAWhC,GAAoB9f,IAClBwW,OAAOhd,QAAUsoB,EAAStoB,OACtCqnB,GAAaiB,EAAStoB,MAAOsoB,EAASta,KAAMsa,EAAShB,QAASgB,EAASzlB,KAAK,EAAOylB,EAASC,kBAG9FjC,GAAsB,EACtB,CACD,EAIF1T,GAAgB,aAAc,CAE7BE,cAAe,CAEd0V,aAAc,SAASxoB,GACtBA,EAAQ+S,GAAa/S,GACrB,IAAIgO,EAAO2M,GAAW3a,GAElBgO,KAAUA,EAAK2Z,SAAU3Z,EAAK8Z,SAAa3Y,KAI/CiE,GAAO,cAAepT,EAAOgO,GAExBA,EAAKhJ,KAIV6iB,GAAc7Z,GACd,EACDya,eAAgB,WACfviB,EAAUoC,OAAOoE,EAAU6Z,IAA2B,GACtDha,EAAKtG,MAAQsf,GAAStf,EACtB0U,GAAapO,EAAKmc,UAClBzV,GAAevG,EAASia,cAIPja,EAASK,KACvBkG,KAAiB,IACnBvG,EAASK,MAAO,GAGjBoG,GAAQ,gBAAgB,SAASyI,GAEhC,IAICpV,EAJG+O,EAAI7I,EAASga,QAChBiC,EAAkB,OAAT/M,GAAwBA,GAAQ,EACzCgN,EAAgB5f,KAAK0N,IAAInB,EAAE,GAAItC,MAC/B4V,EAAe7f,KAAK0N,IAAInB,EAAE,GAAItC,MAI/B,IAAIzM,EAAI,EAAGA,IAAMmiB,EAASE,EAAeD,GAAgBpiB,IACxD+F,EAAKic,aAAaha,EAAkBhI,GAErC,IAAIA,EAAI,EAAGA,IAAMmiB,EAASC,EAAgBC,GAAeriB,IACxD+F,EAAKic,aAAaha,EAAkBhI,EAEzC,IAEG2M,GAAQ,iBAAiB,WACxB5G,EAAKuH,SAAS6R,cAAgBjZ,EAASkZ,kBAAoBlZ,EAASkZ,iBAAiBpX,EACzF,IAEG2E,GAAQ,yBAA0BkV,IAClClV,GAAQ,mBAAoBkV,IAI5BlV,GAAQ,WAAW,WAElB,IADA,IAAInF,EACIxH,EAAI,EAAGA,EAAI+e,GAAOxlB,OAAQyG,KACjCwH,EAAOuX,GAAO/e,IAEN4N,YACPpG,EAAKoG,UAAY,MAEfpG,EAAK4Z,cACP5Z,EAAK4Z,YAAc,MAEjB5Z,EAAKnL,MACPmL,EAAKnL,IAAM,MAETmL,EAAK8a,YACP9a,EAAK8a,UAAY,MAEf9a,EAAKiY,YACPjY,EAAK2Z,OAAS3Z,EAAKiY,WAAY,GAGjCK,GAAsB,IAC1B,GACG,EAGDoC,UAAW,SAAS1oB,GACnB,OAAIA,GAAS,QACakH,IAAlBqe,GAAOvlB,IAAuBulB,GAAOvlB,EAG7C,EAED+oB,oBAAqB,WAWpB,OAAOrc,EAAS+Z,0BAA4B7W,GAAsBlD,EAASI,WAAakc,OAAO9R,MAAQ,IAEvG,EAED8D,WAAY,SAASgC,EAAQhd,GAEzB0M,EAASK,OACX/M,EAAQ+S,GAAa/S,IAGtB,IAAI2c,EAAWpQ,EAAKmc,UAAU1L,EAAOhd,OAClC2c,IACFA,EAASvI,UAAY,MAGtB,IACCvR,EADGmL,EAAOzB,EAAKmc,UAAU1oB,GAG1B,GAAIgO,EAAJ,CAMAoF,GAAO,cAAepT,EAAOgO,GAE7BgP,EAAOhd,MAAQA,EACfgd,EAAOhP,KAAOA,EAGd,IAAIsZ,EAAUtZ,EAAKoG,UAAYlO,EAAUO,SAAS,mBAgBlD,IAZIuH,EAAKhJ,KAAOgJ,EAAKib,OACjBjb,EAAKib,KAAKpb,QACZyZ,EAAQI,YAAY1Z,EAAKib,MAEzB3B,EAAQY,UAAYla,EAAKib,MAI3BjB,GAAeha,GAEfkI,GAAmBlI,EAAMmE,KAEtBnE,EAAKhJ,KAAQgJ,EAAKiY,WAAcjY,EAAK2Z,OA0F9B3Z,EAAKhJ,MAAQgJ,EAAKiY,aAE3BpjB,EAAMqD,EAAUO,SAAS,YAAa,QAClCnD,MAAMmQ,QAAU,EACpB5Q,EAAImC,IAAMgJ,EAAKhJ,IACfkP,GAAclG,EAAMnL,GACpBwkB,GAAarnB,EAAOgO,EAAMsZ,EAASzkB,QAhGY,CAkD/C,GAhDAmL,EAAK+Z,aAAe,SAAS/Z,GAG5B,GAAIK,EAAJ,CAKA,GAAG2O,GAAUA,EAAOhd,QAAUA,EAAQ,CACrC,GAAIgoB,GAAeha,GAAM,GASxB,OARAA,EAAK+Z,aAAe/Z,EAAKnL,IAAM,KAC/BqT,GAAmBlI,EAAMmE,IACzBgC,GAAoBnG,QAEjBgP,EAAOhd,QAAUwO,GAEnBjC,EAAKwP,sBAIF/N,EAAKyZ,eAeL3G,IAAuB9S,EAAK4Z,cAC/B5Z,EAAK4Z,YAAYtkB,MAAM0W,QAAU,OACjChM,EAAK4Z,YAAc,MAhBjBzX,EAAUwF,YAAcrE,IAAwBwP,IAClDwF,GAAoB5mB,KAAK,CACxBsO,KAAKA,EACLsZ,QAAQA,EACRzkB,IAAImL,EAAKnL,IACT7C,MAAMA,EACNgd,OAAOA,EACPuL,kBAAiB,IAGlBlB,GAAarnB,EAAOgO,EAAMsZ,EAAStZ,EAAKnL,IAAKyO,IAAwBwP,IAAqB,EAS5F,CAED9S,EAAK+Z,aAAe,KACpB/Z,EAAKnL,IAAM,KAEXuQ,GAAO,oBAAqBpT,EAAOgO,EAxClC,GA2CC9H,EAAUC,SAASwP,UAAW,CAEhC,IAAIuT,EAAuB,mCAC3BA,GAAyBlb,EAAKmb,KAAO,GAAK,iCAE1C,IAAIvB,EAAc1hB,EAAUO,SAASyiB,EAAsBlb,EAAKmb,KAAO,MAAQ,IAC5Enb,EAAKmb,OACPvB,EAAY5iB,IAAMgJ,EAAKmb,MAGxBjV,GAAclG,EAAM4Z,GAEpBN,EAAQI,YAAYE,GACpB5Z,EAAK4Z,YAAcA,CAEnB,CAKG5Z,EAAK8Z,SACRD,GAAc7Z,GAIXzB,EAAKwc,yBAEJvD,IAAsBrV,EAAUwF,UACnC2Q,GAAoB5mB,KAAK,CACxBsO,KAAKA,EACLsZ,QAAQA,EACRzkB,IAAImL,EAAKnL,IACT7C,MAAMA,EACNgd,OAAOA,IAGRqK,GAAarnB,EAAOgO,EAAMsZ,EAAStZ,EAAKnL,KAAK,GAAM,GAIrD,CAUG2iB,IAAsBxlB,IAAUwO,EAInC2F,GAAoBnG,IAHpBqD,GAAwBiW,EAAQhkB,MAChC8X,GAAYpN,EAAOnL,GAAMmL,EAAKnL,MAK/Bma,EAAOpW,GAAGshB,UAAY,GACtBlL,EAAOpW,GAAG8gB,YAAYJ,EArIrB,MAFAtK,EAAOpW,GAAGshB,UAAY,EAwIvB,EAEDhL,WAAY,SAAUlP,GAClBA,EAAKnL,MACPmL,EAAKnL,IAAI0C,OAASyI,EAAKnL,IAAI4C,QAAU,MAEtCuI,EAAK2Z,OAAS3Z,EAAK8Z,QAAU9Z,EAAKnL,IAAMmL,EAAKyZ,eAAgB,CAC7D,KAeH,IAAI2B,GAsFAC,GArFHC,GAAkB,CAAE,EACpBC,GAAoB,SAASC,EAAW3H,EAAcE,GACrD,IAAIzK,EAAIlW,SAASqoB,YAAa,eAC7BC,EAAU,CACTF,UAAUA,EACVpjB,OAAOojB,EAAUpjB,OACjByb,aAAcA,EACdE,YAAYA,GAAe,SAG7BzK,EAAEqS,gBAAiB,WAAW,GAAM,EAAMD,GAC1CF,EAAUpjB,OAAOwjB,cAActS,IAGjC1E,GAAgB,MAAO,CACtBE,cAAe,CACd+W,QAAS,WACR1W,GAAQ,kBAAmB5G,EAAKud,YAChC3W,GAAQ,eAAgB5G,EAAKwd,cAC7B5W,GAAQ,WAAW,WAClBmW,GAAkB,CAAA,EAClBF,GAAW,IACf,GACG,EACDU,WAAY,SAAS7H,GACjBA,EAAUliB,OAAS,IACrBiM,aAAaod,IACbA,GAAW,KAEZ,EACDW,aAAc,SAASzS,EAAGuK,GACzB,GAAIA,IAIA/Q,IAAWF,IAAkBwH,GAAgB,CAChD,IAAI4R,EAAKnI,EACT,GAAGuH,KACFpd,aAAaod,IACbA,GAAW,KAGN9K,GAAgB0L,EAAIV,KAExB,YADAlW,GAAO,YAAa4W,GAKtB,GAAyB,UAAtBnI,EAAavc,KAEf,YADAikB,GAAkBjS,EAAGuK,EAAc,SAMpC,GAAsB,WAFDvK,EAAElR,OAAOyH,QAAQtC,eAEJrF,EAAUwB,SAAS4P,EAAElR,OAAQ,oBAE9D,YADAmjB,GAAkBjS,EAAGuK,GAItB1M,GAAgBmU,GAAiBU,GAEjCZ,GAAWtnB,YAAW,WACrBynB,GAAkBjS,EAAGuK,GACrBuH,GAAW,IACX,GAAE,IACH,CACD,KAoBHxW,GAAgB,cAAe,CAE9BE,cAAe,CAEdmX,gBAAiB,WAEbha,IAKAL,EAGFuD,GAAQ,aAAa,WACpB5G,EAAK2d,kBACV,IAEI3d,EAAK2d,kBAAiB,GAGvB,EAEDA,iBAAkB,SAASC,GAE1Bd,GAAc,CAAA,EAEd,IAAI/pB,EAAS,kCAEb6T,GAAQ,cAAc,WACrBjN,EAAUlE,KAAK+D,EAAUzG,EAASiN,EAAK6d,iBAC3C,IAEGjX,GAAQ,gBAAgB,WACpBkW,IACFnjB,EAAUG,OAAON,EAAUzG,EAAQiN,EAAK6d,iBAE7C,IAEG7d,EAAK8d,eAAgB,EAErB,IAAIC,EACHC,EAAiB,WACbhe,EAAK8d,gBACPnkB,EAAUmB,YAAYtB,EAAU,mBAChCwG,EAAK8d,eAAgB,GAEnBvb,EAAiB,EACnB5I,EAAUuB,SAAS1B,EAAU,sBAE7BG,EAAUmB,YAAYtB,EAAU,sBAEjCykB,GACA,EACDA,EAAsB,WAClBF,IACFpkB,EAAUmB,YAAYtB,EAAU,kBAChCukB,GAAmB,IAItBnX,GAAQ,SAAWoX,GACnBpX,GAAQ,cAAgBoX,GACxBpX,GAAQ,eAAe,WACnB5G,EAAK8d,gBACPC,GAAmB,EACnBpkB,EAAUuB,SAAS1B,EAAU,kBAElC,IACGoN,GAAQ,YAAaqX,GAEjBL,GACHI,GAGD,EAEDH,iBAAkB,SAAS9S,GAE1B,GAAGxI,GAAkBvC,EAAKuH,SAASC,SAalC,OAZIrH,EAASyB,SAEPzB,EAASO,eAAiBmL,IAAkBzH,EAChD2G,EAAEO,iBACOnI,GAAiB1G,KAAKwT,IAAIlF,EAAEmT,QAAU,IAG/Clc,GAAkB,EAClBhC,EAAK4O,WAIA,EASR,GALA7D,EAAEU,kBAGFqR,GAAYvX,EAAI,EAEb,WAAYwF,EACK,IAAhBA,EAAEoT,WAEJrB,GAAYvX,EAAe,GAAXwF,EAAEqT,OAClBtB,GAAYtX,EAAe,GAAXuF,EAAEmT,SAElBpB,GAAYvX,EAAIwF,EAAEqT,OAClBtB,GAAYtX,EAAIuF,EAAEmT,aAEb,GAAG,eAAgBnT,EACtBA,EAAEsT,cACJvB,GAAYvX,GAAK,IAAOwF,EAAEsT,aAExBtT,EAAEuT,YACJxB,GAAYtX,GAAK,IAAOuF,EAAEuT,YAE1BxB,GAAYtX,GAAK,IAAOuF,EAAEwT,eAErB,MAAG,WAAYxT,GAGrB,OAFA+R,GAAYtX,EAAIuF,EAAEyT,MAGlB,CAEDhV,GAAoBjH,GAAgB,GAEpC,IAAIkc,EAAU9Y,GAAWJ,EAAIuX,GAAYvX,EACxCmZ,EAAU/Y,GAAWH,EAAIsX,GAAYtX,GAGlCrF,EAASyB,OAEZ6c,GAAW5Z,GAAesF,IAAI5E,GAAKkZ,GAAW5Z,GAAetF,IAAIgG,GACjEmZ,GAAW7Z,GAAesF,IAAI3E,GAAKkZ,GAAW7Z,GAAetF,IAAIiG,IAEjEuF,EAAEO,iBAIHtL,EAAKkP,MAAMuP,EAASC,EACpB,EAEDC,kBAAmB,SAAS9N,GAC3BA,EAAcA,GAAe,CAACtL,EAAEK,GAAcL,EAAE,EAAIO,GAAQP,EAAGC,EAAEI,GAAcJ,EAAE,EAAIM,GAAQN,GAE7F,IAAIoZ,EAAqBze,EAASoB,kBAAiB,EAAMvB,EAAKuH,UAC1DsX,EAAUtc,IAAmBqc,EAEjC5e,EAAK8d,eAAiBe,EAEtB7e,EAAK4Q,OAAOiO,EAAU7e,EAAKuH,SAAS7F,iBAAmBkd,EAAoB/N,EAAa,KACxFlX,GAAaklB,EAAkB,SAAR,OAAoB,SAASrlB,EAAU,kBAC9D,KAuBH,IAKIslB,GACHC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GAEAC,GAjBGC,GAAyB,CAC5BC,SAAS,EACTC,WAAY,GAiBZC,GAAW,WACV,OAAOL,GAAWM,KAAKC,UAAU,EACjC,EACDC,GAAwB,WAEpBlB,IACFrf,aAAaqf,IAGXE,IACFvf,aAAauf,GAEd,EAIDiB,GAAyB,WACxB,IAAIH,EAAOD,KACVK,EAAS,CAAA,EAEV,GAAGJ,EAAKtsB,OAAS,EAChB,OAAO0sB,EAGR,IAAIjmB,EAAGkmB,EAAOL,EAAK9lB,MAAM,KACzB,IAAKC,EAAI,EAAGA,EAAIkmB,EAAK3sB,OAAQyG,IAC5B,GAAIkmB,EAAKlmB,GAAT,CAGA,IAAImmB,EAAOD,EAAKlmB,GAAGD,MAAM,KACtBomB,EAAK5sB,OAAS,IAGjB0sB,EAAOE,EAAK,IAAMA,EAAK,GALtB,CAOF,GAAGjgB,EAASkgB,YAAa,CAExB,IAAIC,EAAYJ,EAAOK,IAEvB,IADAL,EAAOK,IAAM,EACTtmB,EAAI,EAAGA,EAAI+e,GAAOxlB,OAAQyG,IAC7B,GAAG+e,GAAO/e,GAAGsmB,MAAQD,EAAW,CAC/BJ,EAAOK,IAAMtmB,EACb,KACA,CAEL,MACGimB,EAAOK,IAAMpiB,SAAS+hB,EAAOK,IAAI,IAAI,EAKtC,OAHIL,EAAOK,IAAM,IAChBL,EAAOK,IAAM,GAEPL,CACP,EACDM,GAAc,WAOb,GALGxB,IACFvf,aAAauf,IAIXnT,IAAkBzH,EAGpB4a,GAAwBzpB,WAAWirB,GAAa,SAHjD,CAOGvB,GACFxf,aAAasf,IAEbE,IAAuB,EAIxB,IAAIsB,EAAOte,EAAoB,EAC3BR,EAAO2M,GAAYnM,GACpBR,EAAKrF,eAAe,SAEtBmkB,EAAM9e,EAAK8e,KAEZ,IAAIE,EAAUrB,WAAgCjf,EAASyf,WAAzCR,QAAqEmB,EAE/ElB,KACsC,IAAtCG,GAAWM,KAAKpsB,QAAQ+sB,KAC1BlB,IAAkB,GAKpB,IAAImB,EAASlB,GAAWmB,KAAK3mB,MAAM,KAAK,GAAK,IAAOymB,EAEhDhB,GAEA,IAAMgB,IAAYjuB,OAAOouB,SAASd,MACpCH,QAAQN,GAAkB,eAAiB,aAAa,GAAIxqB,SAASgsB,MAAOH,GAI1ErB,GACFG,GAAWvkB,QAASylB,GAEpBlB,GAAWM,KAAOW,EAMpBpB,IAAkB,EAClBN,GAAqBxpB,YAAW,WAC/B0pB,IAAuB,CACvB,GAAE,GA7CF,GAoDH5Y,GAAgB,UAAW,CAI1BE,cAAe,CACdua,YAAa,WAIZ,GAFAnnB,EAAUoC,OAAOoE,EAAUuf,IAAwB,GAE9Cvf,EAASwf,QAAd,CAKAH,GAAahtB,OAAOouB,SACpBrB,IAAkB,EAClBD,IAAiB,EACjBD,IAAkB,EAClBD,GAAeS,KACfJ,GAAsB,cAAeE,QAGlCP,GAAa1rB,QAAQ,SAAW,IAElC0rB,IADAA,GAAeA,GAAaplB,MAAM,SAAS,IACfA,MAAM,SAAS,IAI5C4M,GAAQ,cAAe5G,EAAK+gB,WAC5Bna,GAAQ,gBAAgB,WACvBjN,EAAUG,OAAOtH,OAAQ,aAAcwN,EAAKghB,aAChD,IAGG,IAAIC,EAAmB,WACtB9B,IAAe,EACXG,KAEAC,GACFI,QAAQuB,OAGL9B,GACFI,GAAWM,KAAOV,GAEdK,GAGHE,QAAQwB,UAAU,GAAItsB,SAASgsB,MAAQrB,GAAW4B,SAAW5B,GAAW6B,QAExE7B,GAAWM,KAAO,IAOtBE,MAIDpZ,GAAQ,gBAAgB,WACpB5E,GAGFif,GAEL,IACGra,GAAQ,WAAW,WACduY,IACH8B,GAEL,IACGra,GAAQ,eAAe,WACtB3E,EAAoBge,KAAyBM,GACjD,IAKG,IAAI9sB,EAAQ2rB,GAAa1rB,QAAQ,QAC9BD,GAAS,GAEmB,OAD9B2rB,GAAeA,GAAaW,UAAU,EAAGtsB,IACzBK,OAAO,KACtBsrB,GAAeA,GAAatrB,MAAM,GAAI,IAKxCyB,YAAW,WACPuM,GACFnI,EAAUlE,KAAKjD,OAAQ,aAAcwN,EAAKghB,aAE3C,GAAE,GAlFF,CAoFD,EACDA,aAAc,WAEb,GAAGnB,OAAeT,GAIjB,OAFAE,IAAiB,OACjBtf,EAAK4O,QAGFqQ,KAEHC,IAAwB,EACxBlf,EAAKoP,KAAM6Q,KAAyBM,KACpCrB,IAAwB,EAGzB,EACD6B,UAAW,WAKVf,KAGGd,KAICG,GAGHP,GAAwBvpB,WAAWirB,GAAa,KAFhDA,KAID,KAOF7mB,EAAUoC,OAAOiE,EAAMuG,KACvB,OAAOhN,CACR,CA9oHmBnH;;;;aCMjBC,EAAAC,QAIO,WAMT,IAAIgvB,EACH,SAASC,EAAM5nB,GAEf,IAGC6nB,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EAEAC,EACAC,EACApb,EAEAqb,EACAC,EACAC,EAEAC,EAEAjiB,EAoDAkiB,EAmKAC,EACAC,EA7OGrU,EAAKzb,KACL+vB,GAAoB,EACvBC,GAAmB,EAQnBC,GAAoB,EAYpBC,EAAoB,CACnBC,SAAU,CAAC/X,IAAI,GAAI8P,OAAO,QAC1BkI,eAAgB,CAAC,OAAQ,UAAW,YAAa,KAAM,WACvDC,WAAY,IACZC,kBAAmB,IACnBC,sBAAuB,IAEvBC,iBAAkB,SAASxhB,EAAMyhB,GAChC,OAAIzhB,EAAKof,OAITqC,EAAU3sB,SAAS,GAAGolB,UAAYla,EAAKof,OAChC,IAJNqC,EAAU3sB,SAAS,GAAGolB,UAAY,IAC3B,EAIR,EAEDwH,SAAQ,EACRD,WAAW,EACXE,cAAc,EACdC,QAAQ,EACRC,SAAS,EACTC,WAAW,EACXC,SAAS,EACTC,aAAa,EAEbC,YAAY,EACZC,qBAAqB,EAErBC,yBAAyB,EAEzBC,aAAc,CACb,CAACrkB,GAAG,WAAYskB,MAAM,oBAAqBltB,IAAI,wDAC/C,CAAC4I,GAAG,UAAWskB,MAAM,QAASltB,IAAI,8DAClC,CAAC4I,GAAG,YAAaskB,MAAM,SAAUltB,IAAI,oGAErC,CAAC4I,GAAG,WAAYskB,MAAM,iBAAkBltB,IAAI,oBAAqBmtB,UAAS,IAE3EC,oBAAqB,WACpB,OAAOzC,EAAKha,SAAS9O,KAAO,EAC5B,EACDwrB,mBAAoB,WACnB,OAAOzxB,OAAOouB,SAASD,IACvB,EACDuD,gBAAiB,WAChB,OAAO3C,EAAKha,SAASsZ,OAAS,EAC9B,EAEDsD,kBAAmB,MACnBC,iBAAkB,MAQhBC,EAAiB,SAAStZ,GAC5B,GAAGsX,EACF,OAAO,EAIRtX,EAAIA,GAAKvY,OAAOqG,MAEbsH,EAAS2iB,YAAc3iB,EAASI,YAAcyhB,GAEhDsC,IASD,IALA,IACCC,EAEAC,EADAC,GAFY1Z,EAAElR,QAAUkR,EAAE2Z,YAEJlS,aAAa,UAAY,GAGxCvY,EAAI,EAAGA,EAAI0qB,EAAYnxB,OAAQyG,KACtCsqB,EAAYI,EAAY1qB,IACX2qB,OAASH,EAAa/wB,QAAQ,SAAW6wB,EAAUje,OAAU,IACzEie,EAAUK,QACVJ,GAAQ,GAKV,GAAGA,EAAO,CACNzZ,EAAEU,iBACJV,EAAEU,kBAEH4W,GAAoB,EAQpB,IAAIwC,EAAWlrB,EAAUC,SAAS2E,aAAe,IAAM,GAC5BhJ,YAAW,WACrC8sB,GAAoB,CACpB,GAAEwC,EACH,CAED,EACDC,EAAyB,WACxB,OAAQvD,EAAK3I,mBAAqBzY,EAASI,WAAakc,OAAO9R,MAAQxK,EAASikB,gBAChF,EACDW,EAAmB,SAAS1qB,EAAI2qB,EAAOC,GACtCtrB,GAAYsrB,EAAM,MAAQ,UAAY,SAAU5qB,EAAI,SAAW2qB,EAC/D,EAIDE,EAAiB,WAChB,IAAIC,EAA4C,IAA7BhlB,EAASia,gBAEzB+K,IAAgB/C,IAClB2C,EAAiBtD,EAAW,gBAAiB0D,GAC7C/C,EAAsB+C,EAEvB,EACDC,EAAyB,WACxBL,EAAiBjD,EAAa,sBAAuBY,EACrD,EACD2C,EAAoB,WAwBnB,OAtBA3C,GAAqBA,IAWpB/oB,EAAUmB,YAAYgnB,EAAa,8BACnCvsB,YAAW,WACPmtB,GACF0C,GAED,GAAE,OAZHA,IACA7vB,YAAW,WACNmtB,GACH/oB,EAAUuB,SAAS4mB,EAAa,6BAEjC,GAAE,KAUAY,GACH4C,KAEM,CACP,EAEDC,EAAmB,SAASxa,GAE3B,IAAIlR,GADJkR,EAAIA,GAAKvY,OAAOqG,OACDgB,QAAUkR,EAAE2Z,WAI3B,OAFAnD,EAAK5U,MAAM,iBAAkB5B,EAAGlR,MAE5BA,EAAO8mB,OAIP9mB,EAAO2rB,aAAa,cAIxBhzB,OAAOizB,KAAK5rB,EAAO8mB,KAAM,aAAc,2FAE/BnuB,OAAOiqB,OAAShgB,KAAK4L,MAAMoU,OAAO9R,MAAQ,EAAI,KAAO,MAEzD+X,GACH2C,IAGM,GACP,EACDC,EAAmB,WAQlB,IAPA,IACCI,EAEAC,EACAC,EACAC,EALGC,EAAiB,GAOb7rB,EAAI,EAAGA,EAAIkG,EAAS0jB,aAAarwB,OAAQyG,IAChDyrB,EAAkBvlB,EAAS0jB,aAAa5pB,GAExC0rB,EAAYxlB,EAAS6jB,oBAAoB0B,GACzCE,EAAWzlB,EAAS8jB,mBAAmByB,GACvCG,EAAa1lB,EAAS+jB,gBAAgBwB,GAOtCI,GAAkB,YALPJ,EAAgB9uB,IAAIqE,QAAQ,UAAW8qB,mBAAmBH,IAC/D3qB,QAAQ,gBAAiB8qB,mBAAmBJ,IAC5C1qB,QAAQ,oBAAqB0qB,GAC7B1qB,QAAQ,WAAY8qB,mBAAmBF,IAE3B,yCACYH,EAAgBlmB,GAAK,KAC7CkmB,EAAgB3B,SAAW,WAAa,IAAM,IAC/C2B,EAAgB5B,MAAQ,OAE1B3jB,EAAS6lB,sBACXF,EAAiB3lB,EAAS6lB,oBAAoBN,EAAiBI,IAGjEhE,EAAYvrB,SAAS,GAAGolB,UAAYmK,EACpChE,EAAYvrB,SAAS,GAAG0vB,QAAUV,CAElC,EACDW,EAAiB,SAASrsB,GACzB,IAAI,IAAKI,EAAI,EAAGA,EAAIkG,EAAS0iB,eAAervB,OAAQyG,IACnD,GAAIN,EAAUwB,SAAStB,EAAQ,SAAWsG,EAAS0iB,eAAe5oB,IACjE,OAAO,CAGT,EAGDksB,EAAiB,EACjB7B,EAAmB,WAClB7kB,aAAa8iB,GACb4D,EAAiB,EACdnE,GACF9T,EAAGkY,SAAQ,EAEZ,EACDC,EAAsB,SAAStb,GAE9B,IAAIub,GADJvb,EAAIA,GAAQvY,OAAOqG,OACN0tB,eAAiBxb,EAAEyb,UAC3BF,GAA0B,SAAlBA,EAAKtwB,WACjByJ,aAAa8iB,GACbA,EAAahtB,YAAW,WACvB2Y,EAAGkY,SAAQ,EAChB,GAAOjmB,EAAS4iB,mBAEb,EACD0D,EAAsB,WAClBtmB,EAASijB,eAAiBzpB,EAAUC,SAAS2E,eAC3CijB,IACHA,EAAgBtT,EAAGwY,oBAEjBlF,GACF7nB,EAAUlE,KAAKZ,SAAU2sB,EAAcmF,OAAQzY,EAAG0Y,kBAClD1Y,EAAG0Y,mBACHjtB,EAAUuB,SAASqmB,EAAK/nB,SAAU,sBAElCG,EAAUmB,YAAYymB,EAAK/nB,SAAU,qBAGvC,EACDqtB,EAAyB,WAErB1mB,EAASsjB,cAEXqD,GAAwB,GAExBlgB,EAAQ,gBAAgB,WAEvBnH,aAAa0iB,GAGbA,EAA2B5sB,YAAW,WAElCgsB,EAAKha,UAAYga,EAAKha,SAASgU,UAE5BgG,EAAK/E,uBAA0B+E,EAAKha,SAASjR,MAAQirB,EAAKha,SAASjR,IAAI+B,eAG3EyuB,GAAwB,GAKzBA,GAAwB,EAG/B,GAAQ3mB,EAAS6iB,sBAEjB,IACIpc,EAAQ,qBAAqB,SAASnT,EAAOgO,GACzC8f,EAAKha,WAAa9F,GACpBqlB,GAAwB,EAE9B,IAGG,EACDA,EAA0B,SAASC,GAC9B7E,IAA4B6E,IAC/BhC,EAAiB9C,EAAmB,qBAAsB8E,GAC1D7E,EAA0B6E,EAE3B,EACDC,EAAmB,SAASvlB,GAC3B,IAAIwlB,EAAMxlB,EAAKgZ,KAEf,GAAIqK,IAA2B,CAE9B,IAAIoC,EAAO/mB,EAASyiB,SACpB,GAAGziB,EAAS+iB,WAA6B,SAAhBgE,EAAKvM,OAO7B,GANIgH,KACHA,EAAwBhoB,EAAUO,SAAS,sCACrBihB,YAAaxhB,EAAUO,SAAS,0BACtDunB,EAAU0F,aAAaxF,EAAuBD,GAC9C/nB,EAAUuB,SAASumB,EAAW,kBAE3BthB,EAAS8iB,iBAAiBxhB,EAAMkgB,GAAuB,GAAQ,CAElE,IAAIyF,EAAczF,EAAsBnR,aACxCyW,EAAItM,OAASxc,SAASipB,EAAY,KAAO,EAC/C,MACMH,EAAItM,OAASuM,EAAKrc,SAGnBoc,EAAItM,OAAyB,SAAhBuM,EAAKvM,OAAoB,EAAIuM,EAAKvM,OAIhDsM,EAAIpc,IAAMqc,EAAKrc,GACnB,MACIoc,EAAIpc,IAAMoc,EAAItM,OAAS,CAExB,EACD0M,EAAa,WAETlnB,EAAS2iB,YACXlc,EAAQ,aAAa,WAEpBjN,EAAUlE,KAAKZ,SAAU,YAAayvB,GACtC3qB,EAAUlE,KAAKZ,SAAU,WAAYwxB,GAErC/D,EAAgB3T,aAAY,WAEL,KADtBwX,GAECjY,EAAGkY,SAAQ,EAElB,GAAQjmB,EAAS2iB,WAAa,EAC9B,GAEG,EACDwE,EAAqC,WAYpC,IAAIC,EATJ3gB,EAAQ,kBAAkB,SAASqK,GAC/BwR,GAAoBxR,EAAM,IAC5B/C,EAAGsZ,gBACO/E,GAAoBxR,GAAO,KACrC/C,EAAGuZ,cAER,IAIG7gB,EAAQ,gBAAiB,SAASqK,GAC9BwR,GAAoBxR,EAAM,IAC5B/C,EAAGsZ,eACHD,GAAsB,GACbA,IAAwB9E,GAAoBxR,EAAM,IAC3D/C,EAAGuZ,cAER,IAEG7gB,EAAQ,oBAAoB,YAC3B2gB,GAAsB,KACK9E,GAC1BvU,EAAGuZ,cAER,KAMK9C,EAAc,CACjB,CACCre,KAAM,UACNohB,OAAQ,YACR9J,OAAQ,SAASvjB,GAChBqnB,EAAoBrnB,CACpB,GAEF,CACCiM,KAAM,cACNohB,OAAQ,UACR9J,OAAQ,SAASvjB,GAChBynB,EAAcznB,CACd,EACDuqB,MAAO,WACNS,GACA,GAEF,CACC/e,KAAM,gBACNohB,OAAQ,UACR9J,OAAQ,SAASvjB,GAChBwnB,EAAexnB,CACf,EACDuqB,MAAO,WACNS,GACA,GAEF,CACC/e,KAAM,eACNohB,OAAQ,SACR9C,MAAOrD,EAAK5C,mBAEb,CACCrY,KAAM,UACNohB,OAAQ,YACR9J,OAAQ,SAASvjB,GAChBunB,EAAkBvnB,CAClB,GAEF,CACCiM,KAAM,gBACNohB,OAAQ,UACR9C,MAAOrD,EAAK3S,OAEb,CACCtI,KAAM,sBACNohB,OAAQ,UACR9C,MAAOrD,EAAKhS,MAEb,CACCjJ,KAAM,uBACNohB,OAAQ,UACR9C,MAAOrD,EAAKjS,MAEb,CACChJ,KAAM,aACNohB,OAAQ,eACR9C,MAAO,WACHpD,EAAcmG,eAChBnG,EAAcoG,OAEdpG,EAAcqG,OAEf,GAEF,CACCvhB,KAAM,YACNohB,OAAQ,cACR9J,OAAQ,SAASvjB,GAChB4nB,EAAoB5nB,CACpB,IAKCytB,EAAmB,WACtB,IAAIrmB,EACHsmB,EACAxD,EAEGyD,EAA2B,SAASC,GACvC,GAAIA,EAKJ,IADA,IAAIC,EAAID,EAAUz0B,OACVyG,EAAI,EAAGA,EAAIiuB,EAAGjuB,IAAK,CAC1BwH,EAAOwmB,EAAUhuB,GACjB8tB,EAAYtmB,EAAKlH,UAEjB,IAAI,IAAIuE,EAAI,EAAGA,EAAI6lB,EAAYnxB,OAAQsL,IACtCylB,EAAYI,EAAY7lB,GAErBipB,EAAUr0B,QAAQ,SAAW6wB,EAAUje,OAAS,IAE9CnG,EAASokB,EAAUmD,SAEtB/tB,EAAUmB,YAAY2G,EAAM,2BACzB8iB,EAAU3G,QACZ2G,EAAU3G,OAAOnc,IAKlB9H,EAAUuB,SAASuG,EAAM,2BAK5B,GAEFumB,EAAyBvG,EAAUlrB,UAEnC,IAAI4xB,EAAUxuB,EAAU0B,gBAAgBomB,EAAW,iBAChD0G,GACFH,EAA0BG,EAAO5xB,WAOnC2X,EAAGZ,KAAO,WAGT3T,EAAUoC,OAAOwlB,EAAK9sB,QAASkuB,GAAmB,GAGlDxiB,EAAWohB,EAAK9sB,QAGhBgtB,EAAY9nB,EAAU0B,gBAAgBkmB,EAAKlY,WAAY,YAGvDzC,EAAU2a,EAAK3U,OAGf0a,IAGA1gB,EAAQ,eAAgBsH,EAAGzE,QAG3B7C,EAAQ,aAAa,SAASwhB,GAC7B,IAAI1mB,EAAmB6f,EAAKha,SAAS7F,iBAClC6f,EAAKxU,iBAAmBrL,EAC1B6f,EAAK3Q,OAAOlP,EAAkB0mB,EAAO,KAErC7G,EAAK3Q,OAAOzQ,EAASoB,kBAAiB,EAAOggB,EAAKha,UAAW6gB,EAAO,IAExE,IAGExhB,EAAQ,oBAAoB,SAASmE,EAAG4H,EAAQ0V,GAC/C,IAAI7b,EAAIzB,EAAElR,QAAUkR,EAAE2Z,WAErBlY,GACAA,EAAEgG,aAAa,UAAYzH,EAAEhS,KAAKrF,QAAQ,UAAY,IACpD8Y,EAAEgG,aAAa,SAAS9e,QAAQ,aAAe,GAAM,qBAAsB0H,KAAKoR,EAAElL,YAEpF+mB,EAAWzV,SAAU,EAEzB,IAGEhM,EAAQ,cAAc,WACrBjN,EAAUlE,KAAKgsB,EAAW,gBAAiB4C,GAC3C1qB,EAAUlE,KAAK8rB,EAAKlY,WAAY,UAAW6E,EAAGoa,aAE1C/G,EAAK3I,mBACRjf,EAAUlE,KAAK8rB,EAAKlY,WAAY,YAAa6E,EAAGqa,YAEpD,IAGE3hB,EAAQ,gBAAgB,WACnB8b,GACH2C,IAGE/C,GACFtT,cAAcsT,GAEf3oB,EAAUG,OAAOjF,SAAU,WAAYwxB,GACvC1sB,EAAUG,OAAOjF,SAAU,YAAayvB,GACxC3qB,EAAUG,OAAO2nB,EAAW,gBAAiB4C,GAC7C1qB,EAAUG,OAAOynB,EAAKlY,WAAY,UAAW6E,EAAGoa,aAChD3uB,EAAUG,OAAOynB,EAAKlY,WAAY,YAAa6E,EAAGqa,aAE/C/G,IACF7nB,EAAUG,OAAOjF,SAAU2sB,EAAcmF,OAAQzY,EAAG0Y,kBACjDpF,EAAcmG,iBAChBxnB,EAASU,sBAAwB,EACjC2gB,EAAcoG,QAEfpG,EAAgB,KAEpB,IAIE5a,EAAQ,WAAW,WACfzG,EAAS+iB,YACRvB,GACFF,EAAU+G,YAAY7G,GAEvBhoB,EAAUmB,YAAY4mB,EAAmB,yBAGvCI,IACFA,EAAYvrB,SAAS,GAAG0vB,QAAU,MAEnCtsB,EAAUmB,YAAY2mB,EAAW,wBACjC9nB,EAAUuB,SAAUumB,EAAW,oBAC/BvT,EAAGkY,SAAQ,EACd,IAGMjmB,EAASW,uBACZnH,EAAUmB,YAAa2mB,EAAW,oBAEnC7a,EAAQ,iBAAiB,WACrBzG,EAASW,uBACXnH,EAAUmB,YAAa2mB,EAAW,mBAEtC,IACE7a,EAAQ,kBAAkB,WACzBjN,EAAUuB,SAAUumB,EAAW,mBAClC,IAEE7a,EAAQ,sBAAuBogB,GAE/Bc,IAEG3nB,EAASmjB,SAAWzB,GAAgBC,IACtCY,GAAoB,GAGrBwC,IAEAmC,IAEAZ,IAEAI,KAGD3Y,EAAGkY,QAAU,SAASqC,GACrBzG,EAAUyG,EACV1D,EAAiBtD,EAAW,WAAYgH,IAGzCva,EAAGzE,OAAS,WAERgZ,GAAoBlB,EAAKha,UAE3B2G,EAAGwa,uBAEAvoB,EAAS+iB,YACX/iB,EAAS8iB,iBAAiB1B,EAAKha,SAAUma,GAEzCqD,EAAiBrD,EAAmB,kBAAmBH,EAAKha,SAASsZ,QAGtE2B,GAAoB,GAGpBA,GAAoB,EAGjBE,GACH2C,IAGDH,KAGDhX,EAAG0Y,iBAAmB,SAAS7b,GAE3BA,GAGFxV,YAAW,WACVgsB,EAAK5V,gBAAiB,EAAGhS,EAAUa,aACnC,GAAE,IAIJb,GAAY6nB,EAAcmG,eAAiB,MAAQ,UAAY,SAAUpG,EAAK/nB,SAAU,aAGzF0U,EAAGwa,qBAAuB,WACtBvoB,EAASojB,YACX3B,EAAgBjG,UAAa4F,EAAKvU,kBAAkB,EAC7C7M,EAASgkB,kBACThkB,EAASia,kBAIlBlM,EAAGoa,YAAc,SAASvd,GAEzB,IAAIlR,GADJkR,EAAIA,GAAKvY,OAAOqG,OACDgB,QAAUkR,EAAE2Z,WAE3B,IAAGrC,EAIH,GAAGtX,EAAEyT,QAAmC,UAAzBzT,EAAEyT,OAAOhJ,YAAyB,CAGhD,GAAG0Q,EAAersB,GAEjB,YADA0nB,EAAK3S,QAIHjV,EAAUwB,SAAStB,EAAQ,eACF,IAAxB0nB,EAAKxU,gBAAwBwU,EAAKxU,gBAAkBwU,EAAKha,SAASC,SACjErH,EAASyjB,yBACXrC,EAAK3S,QAGN2S,EAAK5C,kBAAkB5T,EAAEyT,OAAOlJ,cAIrC,MAYG,GATGnV,EAASwjB,sBACRlB,EACFvU,EAAGsZ,eAEHtZ,EAAGuZ,gBAKFtnB,EAASujB,aAAe/pB,EAAUwB,SAAStB,EAAQ,cAAgBqsB,EAAersB,IAEpF,YADA0nB,EAAK3S,SAMRV,EAAGqa,YAAc,SAASxd,GAEzB,IAAIlR,GADJkR,EAAIA,GAAKvY,OAAOqG,OACDgB,QAAUkR,EAAE2Z,WAG3BK,EAAiBtD,EAAW,iBAAkByE,EAAersB,KAG9DqU,EAAGsZ,aAAe,WACjB7tB,EAAUuB,SAASumB,EAAU,oBAC7BgB,GAAmB,GAGpBvU,EAAGuZ,aAAe,WACjBhF,GAAmB,EACfD,GACHtU,EAAGzE,SAEJ9P,EAAUmB,YAAY2mB,EAAU,qBAGjCvT,EAAGya,mBAAqB,WACvB,IAAIvc,EAAIvX,SACR,SAAUuX,EAAEwc,gBAAkBxc,EAAEyc,qBAAuBzc,EAAE0c,sBAAwB1c,EAAE2c,mBAGpF7a,EAAGwY,iBAAmB,WACrB,IACCsC,EADGC,EAAKp0B,SAAS+F,gBAEjBsuB,EAAK,mBA0DN,OAxDID,EAAGE,kBACNH,EAAM,CACLI,OAAQ,oBACRC,MAAO,iBACPC,SAAU,oBACV3C,OAAQuC,GAGAD,EAAGM,qBACZP,EAAM,CACLI,OAAQ,uBACRC,MAAO,sBACPC,SAAU,uBACV3C,OAAQ,MAAQuC,GAKRD,EAAGO,wBACZR,EAAM,CACLI,OAAQ,0BACRC,MAAO,uBACPC,SAAU,0BACV3C,OAAQ,SAAWuC,GAGXD,EAAGQ,sBACZT,EAAM,CACLI,OAAQ,sBACRC,MAAO,mBACPC,SAAU,sBACV3C,OAAQ,uBAIPqC,IACFA,EAAInB,MAAQ,WAKX,GAHA9F,EAA4B5hB,EAASO,cACrCP,EAASO,eAAgB,EAEN,4BAAhBjO,KAAK22B,OAGP,OAAO7H,EAAK/nB,SAAS/G,KAAK22B,UAF1B7H,EAAK/nB,SAAS/G,KAAK22B,QAASM,QAAQC,uBAKtCX,EAAIpB,KAAO,WAGV,OAFAznB,EAASO,cAAgBqhB,EAElBltB,SAASpC,KAAK42B,UAGtBL,EAAIrB,aAAe,WAAa,OAAO9yB,SAASpC,KAAK62B,YAG/CN,IAMT,OAAO1H,CAGP,CA/0BmBlvB,0BCVJ,SAASw3B,EAASC,GAiGdh1B,SAASC,iBAAiB+0B,GAChCh0B,SAAQ,SAAUi0B,GACvBA,EAAKtxB,iBAAiB,SAAS,SAAUuS,IAlGrB,SAAUA,GAC9BA,EAAEO,iBAOF,IALA,IAAI5R,EAAQ,GACRjG,EAAQ,EAERs2B,EAAchf,EAAElR,OAAOmwB,QAAQ,YAAYC,uBAExCF,IAAgBA,EAAYG,UAAUC,SAAS,kBAAoBJ,EAAYG,UAAUC,SAAS,qBAAqB,CAC1H,IAAIC,EAAY,GAEhBL,EAAYj1B,iBAAiB,OAAOe,SAAQ,SAAU4L,GAClD2oB,EAAUj3B,KAAK,CACXsF,IAAKgJ,EAAK+Q,aAAa,OACvBoK,KAAMnb,EAAK+Q,aAAa,OACxB1I,EAAGrI,EAAK+Q,aAAa,SACrB9H,EAAGjJ,EAAK+Q,aAAa,UACrBnY,GAAIoH,IAGRhO,GAAS,CACb,IACAs2B,EAAcA,EAAYE,uBAE1BvwB,EAAQ0wB,EAAUC,OAAO3wB,EAC7B,CAEA,GAAIqR,EAAElR,OAAOqwB,UAAUC,SAAS,YAC5BzwB,EAAMvG,KAAK,CACPsF,IAAKsS,EAAElR,OAAO2Y,aAAa,OAC3BoK,KAAM7R,EAAElR,OAAO2Y,aAAa,OAC5B1I,EAAGiB,EAAElR,OAAO2Y,aAAa,SACzB9H,EAAGK,EAAElR,OAAO2Y,aAAa,UACzBnY,GAAI0Q,EAAElR,aAEP,CACH,IAAIywB,GAAqB,EAEzBvf,EAAElR,OAAOmwB,QAAQ,oBAAoBl1B,iBAAiB,OAAOe,SAAQ,SAAU4L,GAC3E/H,EAAMvG,KAAK,CACPsF,IAAKgJ,EAAK+Q,aAAa,OACvBoK,KAAMnb,EAAK+Q,aAAa,OACxB1I,EAAGrI,EAAK+Q,aAAa,SACrB9H,EAAGjJ,EAAK+Q,aAAa,UACrBnY,GAAIoH,IAGH6oB,GAAsB7oB,IAASsJ,EAAElR,OAGlCywB,GAAqB,EAFrB72B,GAAS,CAIjB,GACJ,CAIA,IAFA,IAAIiI,EAAcqP,EAAElR,OAAOmwB,QAAQ,YAAYO,mBAExC7uB,IAAgBA,EAAYwuB,UAAUC,SAAS,kBAAoBzuB,EAAYwuB,UAAUC,SAAS,qBACrGzuB,EAAY5G,iBAAiB,OAAOe,SAAQ,SAAU4L,GAClD/H,EAAMvG,KAAK,CACPsF,IAAKgJ,EAAK+Q,aAAa,OACvBoK,KAAMnb,EAAK+Q,aAAa,OACxB1I,EAAGrI,EAAK+Q,aAAa,SACrB9H,EAAGjJ,EAAK+Q,aAAa,UACrBnY,GAAIoH,GAEZ,IACA/F,EAAcA,EAAY6uB,mBAG9B,IAAIC,EAAc31B,SAASC,iBAAiB,SAAS,GAoBvC,IAAIyE,EAAWixB,EAAalJ,EAAsB5nB,EAlBlD,CACV4G,UAAW,GACXI,eAAe,EACf0iB,cAAc,EACdzD,SAAS,EACTlsB,MAAOA,EACP6vB,SAAS,EACTD,QAAQ,EACRhK,iBAAkB,SAAS5lB,GACvB,IAAIg3B,EAAY/wB,EAAMjG,GAAO4G,GACzBqwB,EAAcl4B,OAAOkI,aAAe7F,SAAS+F,gBAAgBC,UAC7D8vB,EAAOF,EAAUG,wBAErB,MAAO,CAACrlB,EAAEolB,EAAKpgB,KAAM/E,EAAEmlB,EAAK9f,IAAM6f,EAAa5gB,EAAE6gB,EAAKhgB,MAC1D,IAKI2C,OAQJud,CAAkB9f,EACtB,GACJ,GACJ;;;;;;;KClGA,WACI,MAAM+f,EAAaj2B,SAASk2B,cAAc,kBACpCC,EAASF,EAAWC,cAAc,cACnCC,GAELA,EAAOxyB,iBAAiB,SAAS,WACxBsyB,EAAWZ,UAAUC,SAAS,YAI/BW,EAAWZ,UAAUe,OAAO,WAC5Bp2B,SAAS+F,gBAAgB7D,MAAMm0B,UAAY,OAJ3CJ,EAAWZ,UAAUjF,IAAI,WACzBpwB,SAAS+F,gBAAgB7D,MAAMm0B,UAAY,SAKnD,GACH,CAdD,GAkBItB,EACI,sECbR,SAAiB/vB,EAAQmrB,GACrB,IAAImG,EAAIC,EACJC,EAA2B,iBAAXxxB,EAAsBhF,SAASC,iBAAiB+E,GAAUA,EAC1EyxB,EAAItG,GAAS,aACX,WAAYqG,IACdA,EAAS,CAACA,IACd,IAAK,IAAIpxB,EAAI,EAAGA,EAAIoxB,EAAO73B,OAAQyG,GAAK,EAAG,CACvC,IAAIsxB,EAAQF,EAAOpxB,GAEnB,IAD0D,IAA3CsxB,EAAMhxB,UAAUP,MAAM,KAAKtG,QAAQ43B,IAClCC,EAAMx0B,MAAM4T,MAAMjX,QAAQ,MAAQ,EAC9C,OAGJ,IAAIkX,EAAS2gB,EAAM/Y,aAAa,WAAa+Y,EAAMC,aAC/C7gB,EAAQ4gB,EAAM/Y,aAAa,UAAY+Y,EAAME,YAI7CC,GAHiC,iBAAX9gB,EAAsBzM,SAASyM,GAAUA,IAChC,iBAAVD,EAAqBxM,SAASwM,GAASA,GAEnB,IAGzCghB,EAAM92B,SAASyF,cAAc,OACjCqxB,EAAIpxB,UAAY+wB,EAChB,IAAIM,EAAYD,EAAI50B,MACpB60B,EAAUtd,SAAW,WACrBsd,EAAUjhB,MAAQ,OAClBihB,EAAUC,WAAa,GAAGxB,OAAOqB,EAAS,KAE1C,IAAII,EAAaP,EAAMx0B,MACvB+0B,EAAWxd,SAAW,WACtBwd,EAAWnhB,MAAQ,OACnBmhB,EAAWlhB,OAAS,OACpBkhB,EAAWvhB,KAAO,IAClBuhB,EAAWjhB,IAAM,IAEW,QAA3BsgB,EAAKI,EAAM5yB,kBAA+B,IAAPwyB,GAAyBA,EAAGhE,aAAawE,EAAKJ,GACtD,QAA3BH,EAAKG,EAAM5yB,kBAA+B,IAAPyyB,GAAyBA,EAAG5C,YAAY+C,GAC5EI,EAAIxQ,YAAYoQ,EACpB,CACJ,CDZIQ,CAAQl3B,SAASC,iBARD,CACZ,yCACA,kDACA,8CACA,gEACA,qBACA,qBAEsCk3B,KAAK,OEvCpC,WACX,MAAMC,EAAaz5B,OAAO05B,WAAW,sBAE/BC,EAAOt3B,SAASk2B,cAAc,kBAC9BqB,EAAOD,EAAKpB,cAAc,uBAC1BsB,EAAMD,GAAMrB,cAAc,QAChC,IAAKsB,EAAK,OAEV,MAAMC,EAAOz3B,SAASk2B,cAAc,uBAC9BwB,EAAUF,EAAI1Q,UAEhBsQ,EAAWh1B,SACGo1B,EAAIv3B,iBAAiB,MAC7Be,SAAQ,SAAU4L,EAAMhO,GAC1BgO,EAAK1K,MAAMy1B,gBAAqB,KAAQ/4B,EAAQ,GAAnB,GACjC,IAGJ,MAAMg5B,EAAe,WACjB,GAAIR,EAAWh1B,QAAS,OACxB,MAAMy1B,EAAe,GAErB,KAAQL,EAAIZ,YAAc,GAAMW,EAAKX,aAC7BY,EAAIM,kBACJD,EAAavc,QAAQkc,EAAIM,kBACzBN,EAAIM,iBAAiB1B,SAM7B,IAAKyB,EAAal5B,OAEd,YADA24B,EAAKjC,UAAUjF,IAAI,sBAIvB,MAAM2H,EAAS/3B,SAASyF,cAAc,UACtCsyB,EAAOve,aAAa,QAAS,iCAC7Bue,EAAOve,aAAa,aAAc,QAClCue,EAAOjR,UAAY,siBAEnB,MAAMkR,EAAUh4B,SAASyF,cAAc,OACvCuyB,EAAQxe,aAAa,QAAS,eAE1Bqe,EAAal5B,QAAU,IACvB24B,EAAKjC,UAAUjF,IAAI,oBACnB4H,EAAQ91B,MAAM+1B,iBAAmB,UAAUrwB,KAAKswB,KAAKL,EAAal5B,OAAS,YAE3E24B,EAAKjC,UAAUe,OAAO,oBAG1ByB,EAAa72B,SAAQ,SAAUW,GAC3Bq2B,EAAQ1R,YAAY3kB,EACxB,IAEAo2B,EAAOzR,YAAY0R,GACnBR,EAAIlR,YAAYyR,GAEhB,MAAMI,EAAaJ,EAAOhC,wBACpBqC,EAAiBz6B,OAAO8d,WAAa,EAEvC0c,EAAWziB,KAAO0iB,GAClBJ,EAAQ3C,UAAUjF,IAAI,WAG1BkH,EAAKjC,UAAUjF,IAAI,sBAEnBzyB,OAAOgG,iBAAiB,SAAS,SAAUuS,GACnCohB,EAAKjC,UAAUC,SAAS,oBACxBgC,EAAKjC,UAAUe,OAAO,oBACf2B,EAAOzC,SAASpf,EAAElR,SACzBsyB,EAAKjC,UAAUjF,IAAI,mBAE3B,KAGJ9wB,EAAam4B,GAAM,WACfG,GACJ,IAEAj6B,OAAOgG,iBAAiB,QAAQ,WACvB8zB,GACDG,GAER,IAEAj6B,OAAOgG,iBAAiB,UAAU,WAC9BjD,YAAW,KACP82B,EAAI1Q,UAAY4Q,EAChBE,GAAc,GACf,EACP,GACJ,CFhDIS,GAKKr4B,SAASs4B,KAAKjD,UAAUC,SAAS,kBAAqBt1B,SAASs4B,KAAKjD,UAAUC,SAAS,kBGnDjF,SAAoBiD,GAAa,EAAMC,EAAMC,GAAY,GACpE,MAAMC,EAAc14B,SAASk2B,cAAc,YAC3C,IAAKwC,EAAa,OAElB,IAAIhS,GAAU,EACd,MAAM1hB,EAAShF,SAASk2B,cAAc,cAChCyC,EAAgB34B,SAASk2B,cAAc,iBAExCl2B,SAASk2B,cAAc,mBAAqByC,GAC7CA,EAAcvC,SAGlB,MAAMwC,EAAeC,iBACjB,MAAMC,EAAc94B,SAASk2B,cAAc,kBAC3C,GAAK4C,EAEL,IACI,MAAMC,QAAYC,MAAMF,EAAYhN,MAC9BjE,QAAakR,EAAIE,OAEjBC,GADS,IAAIC,WACAC,gBAAgBvR,EAAM,aAEnCwR,EAAeH,EAAIj5B,iBAAiB,mDACpCq5B,EAAWt5B,SAASu5B,yBACpBC,EAAQ,GAEdH,EAAar4B,SAAQ,SAAUy4B,GAC3B,IAAIC,EAAa15B,SAAS25B,WAAWF,GAAM,GAEvChB,IACAiB,EAAWx3B,MAAM03B,WAAa,UAGlCN,EAAShT,YAAYoT,GACrBF,EAAMl7B,KAAKo7B,EACf,IAEAhB,EAAYpS,YAAYgT,GAEpBd,GACAA,EAAKgB,EAAOK,GAGhB,MAAMC,EAAiBZ,EAAIhD,cAAc,kBACrC4D,GAAkBA,EAAehO,KACjCgN,EAAYhN,KAAOgO,EAAehO,MAElCgN,EAAY1C,SACRuC,GACAA,EAAcvC,SAGzB,CAAC,MAAOlgB,GAEL,MADA4iB,EAAY1C,SACNlgB,CACV,GAGE2jB,EAAoBhB,iBAClB7zB,EAAO+wB,wBAAwB/f,KAAOrY,OAAO+d,aAAe1b,SAASk2B,cAAc,yBAC7E0C,KA2BRmB,EAAW,IAAIC,sBAvBJnB,eAAgBoB,GAC7B,IAAIvT,EAAJ,CAIA,GAFAA,GAAU,EAENuT,EAAQ,GAAGC,eAEX,GAAKzB,QAKKG,SAJN,KAAO5zB,EAAO+wB,wBAAwB/f,KAAOrY,OAAO+d,aAAe1b,SAASk2B,cAAc,yBAChF0C,IAOlBlS,GAAU,EAEL1mB,SAASk2B,cAAc,mBACxB6D,EAASI,YAlBA,KAwBb5B,EACAwB,EAASK,QAAQp1B,GAEjB2zB,EAAch1B,iBAAiB,QAASi1B,EAEhD,CH1CQyB,GAMWr6B,SAASC,iBAAiB,wCAElCe,SAAQ,SAAUs5B,GACrB,MAAMtC,EAAUh4B,SAASyF,cAAc,OACvCuyB,EAAQtyB,UAAY,WACpB40B,EAAMx2B,WAAWwuB,aAAa0F,EAASsC,GACvCtC,EAAQ1R,YAAYgU,EACxB","x_google_ignoreList":[0,1,2,3,6]}