{{!-- --------------------------------------------------------------------------------------
Props:  
    1. postType - for image optimization 
    2. showExcerpt - if "true", post excerpt will be show
    3. index - post index to add lazy loading for images, when posts are boyond viewing height
    4. className - add a class to style the component 
    5. lazyLoading - if "true", an attribute "loading='lazy'" will be added to the tag <img>
------------------------------------------------------------------------------------------}}

<article class="post-card{{className}}" role="article">
    {{#if feature_image}}
        <a class="post-card__img-link" href="{{url}}" aria-label="{{t "Post image link"}}">
            <picture>
                <source 
                {{#match postType "=" 'Small post'}}
                    srcset="{{img_url feature_image size="1200" format="webp" }} 1200w, 
                    {{img_url feature_image size="960" format="webp" }} 960w, 
                    {{img_url feature_image size="720" format="webp" }} 720w,
                    {{img_url feature_image size="480" format="webp" }} 480w,
                    {{img_url feature_image size="400" format="webp" }} 400w"
                    sizes="(max-width: 550px) 90vw, (max-width: 1100px) 47vw, 21vw"
                    type="image/webp">
                    <img 
                    srcset="
                    {{img_url feature_image size="1200"}} 1200w, 
                    {{img_url feature_image size="960"}} 960w, 
                    {{img_url feature_image size="720"}} 720w,
                    {{img_url feature_image size="480"}} 480w,
                    {{img_url feature_image size="400"}} 400w"
                    sizes="(max-width: 550px) 90vw, (max-width: 1100px) 47vw, 21vw"
                    src="{{img_url feature_image size="1200"}}"
                    {{#match lazyLoading "=" "true"}}loading="lazy"{{/match}}
                {{/match}}
                {{#match postType "=" 'Big post'}}
                    srcset="{{img_url feature_image size="2000" format="webp"}} 2000w, 
                    {{img_url feature_image size="1600" format="webp" }} 1600w, 
                    {{img_url feature_image size="1200" format="webp" }} 1200w, 
                    {{img_url feature_image size="960" format="webp" }} 960w, 
                    {{img_url feature_image size="720" format="webp" }} 720w,
                    {{img_url feature_image size="480" format="webp" }} 480w,
                    {{img_url feature_image size="400" format="webp" }} 400w"
                    sizes="(max-width: 1100px) 90vw, 49vw"
                    type="image/webp">
                    <img 
                    srcset="{{img_url feature_image size="2000"}} 2000w, 
                    {{img_url feature_image size="1600"}} 1600w, 
                    {{img_url feature_image size="1200"}} 1200w, 
                    {{img_url feature_image size="960"}} 960w, 
                    {{img_url feature_image size="720"}} 720w,
                    {{img_url feature_image size="480"}} 480w,
                    {{img_url feature_image size="400"}} 400w"
                    sizes="(max-width: 1100px) 90vw, 49vw"
                    src="{{img_url feature_image size="2000"}}"
                    {{#match lazyLoading "=" "true"}}loading="lazy"{{/match}}
                {{/match}}
                {{#match postType "=" 'Grid 2 column'}}
                    srcset="{{img_url feature_image size="1200" format="webp" }} 1200w, 
                    {{img_url feature_image size="960" format="webp" }} 960w, 
                    {{img_url feature_image size="720" format="webp" }} 720w,
                    {{img_url feature_image size="480" format="webp" }} 480w,
                    {{img_url feature_image size="400" format="webp" }} 400w"
                    sizes="(max-width: 550px) 90vw, (max-width: 1000px) 33vw, 18vw"
                    type="image/webp">
                    <img 
                    srcset="{{img_url feature_image size="1200"}} 1200w, 
                    {{img_url feature_image size="960"}} 960w, 
                    {{img_url feature_image size="720"}} 720w,
                    {{img_url feature_image size="480"}} 480w,
                    {{img_url feature_image size="400"}} 400w"
                    sizes="(max-width: 550px) 90vw, (max-width: 1000px) 33vw, 18vw"
                    src="{{img_url feature_image size="1200"}}"
                    {{#match lazyLoading "=" "true"}}loading="lazy"{{else}}{{#match index ">" 7}}loading="lazy"{{/match}}{{/match}}
                {{/match}}
                {{#match postType "=" 'Grid 2 column + sidebar with featured posts'}}
                    srcset="{{img_url feature_image size="1200" format="webp" }} 1200w, 
                    {{img_url feature_image size="960" format="webp" }} 960w, 
                    {{img_url feature_image size="720" format="webp" }} 720w,
                    {{img_url feature_image size="480" format="webp" }} 480w,
                    {{img_url feature_image size="400" format="webp" }} 400w"
                    sizes="(max-width: 650px) 90vw, (max-width: 1100px) 41vw, 24vw"
                    type="image/webp">
                    <img 
                    srcset="{{img_url feature_image size="1200"}} 1200w, 
                    {{img_url feature_image size="960"}} 960w, 
                    {{img_url feature_image size="720"}} 720w,
                    {{img_url feature_image size="480"}} 480w,
                    {{img_url feature_image size="400"}} 400w"
                    sizes="(max-width: 650px) 90vw, (max-width: 1100px) 41vw, 24vw"
                    src="{{img_url feature_image size="1200"}}"
                    {{#match lazyLoading "=" "true"}}loading="lazy"{{else}}{{#match index ">" 3}}loading="lazy"{{/match}}{{/match}}
                {{/match}}
                {{#match postType "=" 'Grid 2 column + sidebar with latest posts'}}
                    srcset="{{img_url feature_image size="1200" format="webp" }} 1200w, 
                    {{img_url feature_image size="960" format="webp" }} 960w, 
                    {{img_url feature_image size="720" format="webp" }} 720w,
                    {{img_url feature_image size="480" format="webp" }} 480w,
                    {{img_url feature_image size="400" format="webp" }} 400w"
                    sizes="(max-width: 650px) 90vw, (max-width: 1100px) 41vw, 24vw"
                    type="image/webp">
                    <img 
                    srcset="{{img_url feature_image size="1200"}} 1200w, 
                    {{img_url feature_image size="960"}} 960w, 
                    {{img_url feature_image size="720"}} 720w,
                    {{img_url feature_image size="480"}} 480w,
                    {{img_url feature_image size="400"}} 400w"
                    sizes="(max-width: 650px) 90vw, (max-width: 1100px) 41vw, 24vw"
                    src="{{img_url feature_image size="1200"}}"
                    {{#match lazyLoading "=" "true"}}loading="lazy"{{else}}{{#match index ">" 3}}loading="lazy"{{/match}}{{/match}}
                {{/match}}
                {{#match postType "=" 'List with sidebar featured posts'}}
                    srcset="{{img_url feature_image size="1200" format="webp" }} 1200w, 
                    {{img_url feature_image size="960" format="webp" }} 960w, 
                    {{img_url feature_image size="720" format="webp" }} 720w,
                    {{img_url feature_image size="480" format="webp" }} 480w,
                    {{img_url feature_image size="400" format="webp" }} 400w"
                    sizes="(max-width: 550px) 90vw, (max-width: 1100px) 41vw, 27vw"
                    type="image/webp">
                    <img 
                    srcset="{{img_url feature_image size="1200"}} 1200w, 
                    {{img_url feature_image size="960"}} 960w, 
                    {{img_url feature_image size="720"}} 720w,
                    {{img_url feature_image size="480"}} 480w,
                    {{img_url feature_image size="400"}} 400w"
                    sizes="(max-width: 550px) 90vw, (max-width: 1100px) 41vw, 27vw"
                    src="{{img_url feature_image size="1200"}}"
                    {{#match lazyLoading "=" "true"}}loading="lazy"{{else}}{{#match index ">" 3}}loading="lazy"{{/match}}{{/match}}
                {{/match}}
                {{#match postType "=" 'List with sidebar latest posts'}}
                    srcset="{{img_url feature_image size="1200" format="webp" }} 1200w, 
                    {{img_url feature_image size="960" format="webp" }} 960w, 
                    {{img_url feature_image size="720" format="webp" }} 720w,
                    {{img_url feature_image size="480" format="webp" }} 480w,
                    {{img_url feature_image size="400" format="webp" }} 400w"
                    sizes="(max-width: 550px) 90vw, (max-width: 1100px) 41vw, 27vw"
                    type="image/webp">
                    <img 
                    srcset="{{img_url feature_image size="1200"}} 1200w, 
                    {{img_url feature_image size="960"}} 960w, 
                    {{img_url feature_image size="720"}} 720w,
                    {{img_url feature_image size="480"}} 480w,
                    {{img_url feature_image size="400"}} 400w"
                    sizes="(max-width: 550px) 90vw, (max-width: 1100px) 41vw, 27vw"
                    src="{{img_url feature_image size="1200"}}"
                    {{#match lazyLoading "=" "true"}}loading="lazy"{{else}}{{#match index ">" 3}}loading="lazy"{{/match}}{{/match}}
                {{/match}}
                {{#match postType "=" 'Grid 3 column'}}
                    srcset="{{img_url feature_image size="1200" format="webp" }} 1200w, 
                    {{img_url feature_image size="960" format="webp" }} 960w, 
                    {{img_url feature_image size="720" format="webp" }} 720w,
                    {{img_url feature_image size="480" format="webp" }} 480w,
                    {{img_url feature_image size="400" format="webp" }} 400w"
                    sizes="(max-width: 650px) 90vw, (max-width: 1000px) 45vw, 27vw"
                    type="image/webp">
                    <img 
                    srcset="{{img_url feature_image size="1200"}} 1200w, 
                    {{img_url feature_image size="960"}} 960w, 
                    {{img_url feature_image size="720"}} 720w,
                    {{img_url feature_image size="480"}} 480w,
                    {{img_url feature_image size="400"}} 400w"
                    sizes="(max-width: 650px) 90vw, (max-width: 1000px) 45vw, 27vw"
                    src="{{img_url feature_image size="1200"}}"
                    {{#match lazyLoading "=" "true"}}loading="lazy"{{else}}{{#match index ">" 6}}loading="lazy"{{/match}}{{/match}}
                {{/match}}
                {{#match postType "=" 'Grid 4 column'}}
                    srcset="{{img_url feature_image size="1200" format="webp" }} 1200w, 
                    {{img_url feature_image size="960" format="webp" }} 960w, 
                    {{img_url feature_image size="720" format="webp" }} 720w,
                    {{img_url feature_image size="480" format="webp" }} 480w,
                    {{img_url feature_image size="400" format="webp" }} 400w"
                    sizes="(max-width: 650px) 90vw, (max-width: 900px) 45vw, (max-width: 1100px) 30vw, 20vw"
                    type="image/webp">
                    <img 
                    srcset="{{img_url feature_image size="1200"}} 1200w, 
                    {{img_url feature_image size="960"}} 960w, 
                    {{img_url feature_image size="720"}} 720w,
                    {{img_url feature_image size="480"}} 480w,
                    {{img_url feature_image size="400"}} 400w"
                    sizes="(max-width: 650px) 90vw, (max-width: 900px) 45vw, (max-width: 1100px) 30vw, 20vw"
                    src="{{img_url feature_image size="1200"}}"
                    {{#match lazyLoading "=" "true"}}loading="lazy"{{else}}{{#match index ">" 7}}loading="lazy"{{/match}}{{/match}}
                {{/match}}
                {{#match postType "=" 'Fullscreen slider'}}
                    srcset="{{img_url feature_image size="2000" format="webp" }} 2000w, 
                    {{img_url feature_image size="1600" format="webp" }} 1600w, 
                    {{img_url feature_image size="1200" format="webp" }} 1200w, 
                    {{img_url feature_image size="960" format="webp" }} 960w, 
                    {{img_url feature_image size="720" format="webp" }} 720w,
                    {{img_url feature_image size="480" format="webp" }} 480w,
                    {{img_url feature_image size="400" format="webp" }} 400w"
                    sizes="(min-width: 1050px) 990px, 92vw"
                    type="image/webp">
                    <img 
                    srcset="{{img_url feature_image size="2000"}} 2000w, 
                    {{img_url feature_image size="1600"}} 1600w, 
                    {{img_url feature_image size="1200"}} 1200w, 
                    {{img_url feature_image size="960"}} 960w, 
                    {{img_url feature_image size="720"}} 720w,
                    {{img_url feature_image size="480"}} 480w,
                    {{img_url feature_image size="400"}} 400w"
                    sizes="(min-width: 1050px) 990px, 92vw"
                    src="{{img_url feature_image size="2000"}}"
                    {{#match index ">" 0}}loading="lazy"{{/match}}
                {{/match}}
                {{#match postType "=" 'Small slider'}}
                    srcset="{{img_url feature_image size="1200" format="webp" }} 1200w,
                    {{img_url feature_image size="960" format="webp" }} 960w, 
                    {{img_url feature_image size="720" format="webp" }} 720w,
                    {{img_url feature_image size="480" format="webp" }} 480w,
                    {{img_url feature_image size="400" format="webp" }} 400w,
                    {{img_url feature_image size="300" format="webp" }} 300w"
                    sizes="(max-width: 650px) 90vw, (max-width: 1000px) 46vw, 30vw"
                    type="image/webp">
                    <img 
                    srcset="{{img_url feature_image size="1200"}} 1200w,
                    {{img_url feature_image size="960"}} 960w, 
                    {{img_url feature_image size="720"}} 720w,
                    {{img_url feature_image size="480"}} 480w,
                    {{img_url feature_image size="400"}} 400w,
                    {{img_url feature_image size="300"}} 300w"
                    sizes="(max-width: 650px) 90vw, (max-width: 1000px) 46vw, 30vw"
                    src="{{img_url feature_image size="1200"}}"
                    loading="lazy"
                {{/match}}
                {{#match postType "=" 'Big slider'}}
                    srcset="{{img_url feature_image size="2000" format="webp" }} 2000w, 
                    {{img_url feature_image size="1600" format="webp" }} 1600w, 
                    {{img_url feature_image size="1200" format="webp" }} 1200w, 
                    {{img_url feature_image size="960" format="webp" }} 960w, 
                    {{img_url feature_image size="720" format="webp" }} 720w,
                    {{img_url feature_image size="480" format="webp" }} 480w,
                    {{img_url feature_image size="400" format="webp" }} 400w"
                    sizes="(min-width: 1500px) 93vw, 74vw"
                    type="image/webp">
                    <img 
                    srcset="{{img_url feature_image size="2000"}} 2000w, 
                    {{img_url feature_image size="1600"}} 1600w, 
                    {{img_url feature_image size="1200"}} 1200w, 
                    {{img_url feature_image size="960"}} 960w, 
                    {{img_url feature_image size="720"}} 720w,
                    {{img_url feature_image size="480"}} 480w,
                    {{img_url feature_image size="400"}} 400w"
                    sizes="(min-width: 1500px) 93vw, 74vw"
                    src="{{img_url feature_image size="2000"}}"
                    loading="lazy"
                {{/match}}
                {{#match postType "=" 'Medium slider'}}
                    srcset="{{img_url feature_image size="2000" format="webp" }} 2000w, 
                    {{img_url feature_image size="1600" format="webp" }} 1600w, 
                    {{img_url feature_image size="1200" format="webp" }} 1200w, 
                    {{img_url feature_image size="960" format="webp" }} 960w, 
                    {{img_url feature_image size="720" format="webp" }} 720w,
                    {{img_url feature_image size="480" format="webp" }} 480w,
                    {{img_url feature_image size="400" format="webp" }} 400w"
                    sizes="(max-width: 1050px) 94vw, (max-width: 1500px) 62vw, 56vw"
                    type="image/webp">
                    <img 
                    srcset="{{img_url feature_image size="2000"}} 2000w, 
                    {{img_url feature_image size="1600"}} 1600w, 
                    {{img_url feature_image size="1200"}} 1200w, 
                    {{img_url feature_image size="960"}} 960w, 
                    {{img_url feature_image size="720"}} 720w,
                    {{img_url feature_image size="480"}} 480w,
                    {{img_url feature_image size="400"}} 400w"
                    sizes="(max-width: 1050px) 94vw ,(max-width: 1500px) 62vw, 56vw"
                    src="{{img_url feature_image size="2000"}}"
                    loading="lazy"
                {{/match}}
                alt="{{#if feature_image_alt}}{{feature_image_alt}}{{else}}{{title}} {{t "Post feature image"}}{{/if}}"
                class="post-card__img">
            </picture>
            {{#match postType "=" 'Fullscreen slider'}}
                <div class="swiper-lazy-preloader"></div>
            {{/match}}

            {{#match postType "=" 'Big slider'}}
                <div class="swiper-lazy-preloader"></div>
            {{/match}}

            {{#match postType "=" 'Medium slider'}}
                <div class="swiper-lazy-preloader"></div>
            {{/match}}

            {{#match postType "=" 'Small slider'}}
                <div class="swiper-lazy-preloader"></div>
            {{/match}}
        </a>
    {{else}}
         <a href="{{url}}" class="post-card-no-image{{#if @custom.dark_mode_logo}} post-card-no-image--dark-logo{{/if}}" aria-label="{{t "Post image link"}}">
            {{#if @site.logo}}
                {{#if @custom.dark_mode_logo}}
                <img src="{{img_url @custom.dark_mode_logo}}" alt="{{@site.title}} {{t "logo"}}" class="post-card-no-image__dark-logo" {{#match lazyLoading "=" "true"}}loading="lazy"{{/match}}/>
                {{/if}}
                <img src="{{img_url @site.logo}}" alt="{{@site.title}} {{t "logo"}}" class="post-card-no-image__logo" {{#match lazyLoading "=" "true"}}loading="lazy"{{/match}}/>
                {{else}}
                <h3 class="post-card-no-image__title">{{@site.title}}</h3>
            {{/if}}
        </a>
    {{/if}}
    {{#match showPrimaryTag "=" "true"}}
        {{#if tags}}
            {{>post-tags showOnlyPrimaryTag='true'}}
        {{else if featured}}
            {{>post-tags showOnlyPrimaryTag='true'}}
        {{else}}
            {{^match visibility "=" 'public'}}
                {{>post-tags showOnlyPrimaryTag='true'}}
            {{/match}}
        {{/if}}
    {{/match}}

    {{#match firstFeaturedPost "=" "true"}}
        {{#if tags}}
            {{>post-tags}}
        {{else if featured}}
            {{>post-tags}}
        {{else}}
            {{^match visibility "=" 'public'}}
                {{>post-tags}}
            {{/match}}
        {{/if}}
    {{/match}}
            

    {{#match fullScreenSlide "=" "true"}}
        {{#if tags}}
            {{>post-tags}}
        {{else if featured}}
            {{>post-tags}}
        {{else}}
            {{^match visibility "=" 'public'}}
                {{>post-tags}}
            {{/match}}
        {{/if}}
    {{/match}}

    <div class="post-card__content"{{#match fullScreenSlide "=" "true"}} data-swiper-parallax-opacity="0.15" data-swiper-parallax="-35%"{{/match}}{{#match postType "=" "Medium slider" }} data-swiper-parallax-opacity="0.01"{{/match}}>
        {{^match fullScreenSlide "=" "true"}}
            {{^match firstFeaturedPost "=" "true"}}
                {{^match showPrimaryTag "=" "true"}}
                    {{#if tags}}
                        {{>post-tags}}
                    {{else if featured}}
                        {{>post-tags}}
                    {{else}}
                        {{^match visibility "=" 'public'}}
                            {{>post-tags}}
                        {{/match}}
                    {{/if}}
                {{/match}}
            {{/match}}
        {{/match}}


        {{#match fullScreenSlide "=" "true"}}
            {{>post-meta}}
        {{/match}}

        <h3 class="post-card__heading">
            <a class="post-card__heading-link" aria-label="{{t "Post title link"}}" href="{{url}}">{{title}}</a>
        </h3>
        {{#match showExcerpt "=" "true"}}
            {{#if custom_excerpt}}
                <p class="post-card__excerpt">{{custom_excerpt}}</p>
            {{/if}}
        {{/match}}

        {{^match fullScreenSlide "=" "true"}}
            {{>post-meta}}
        {{/match}}

        {{#match slide "=" "true"}}
            <a href="{{url}}" class="post-card__btn" aria-label="{{t "Read now button"}}">
                <span class="post-card__btn-text-wrapper">
                    <span class="post-card__btn-text">
                        {{t "Read Now"}}
                        {{>icons/chevron-right-icon}}
                    </span>
                    <span class="post-card__btn-text">
                        {{t "Read Now"}}
                        {{>icons/chevron-right-icon}}
                    </span>
                </span>
            </a>
        {{/match}}
    </div>

</article>